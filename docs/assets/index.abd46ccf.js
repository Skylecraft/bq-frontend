import{J as e,j as t,F as n,E as o,r as l,o as a,c as s,a as i,w as d,b as c,d as u,e as r,t as m,f as p,g,h as _,i as h,k as v,l as y}from"./vendor.7d09f438.js";const b=["conversations","menus"];function $(n,o){e.loadAsync(n).then((function(e){e.forEach((function(e,n){n.dir||n.async("text").then((function(e){let l=function(e,n){const o=e.split("/");let l={section:o[0],fileType:o[1].replace(".yml",""),data:{}};if(b.indexOf(l.fileType)>=0&&(l.subsection=o[2].replace(".yml","")),n)try{const e=t.load(n);l.data=e}catch(a){console.error(`Section "${e}" error: ${a}`)}return l}(n.name,e);o[l.section]||(o[l.section]={}),b.indexOf(l.fileType)>=0?(o[l.section][l.fileType]||(o[l.section][l.fileType]={}),o[l.section][l.fileType][l.subsection]=l.data):o[l.section][l.fileType]=l.data}))}))}),(function(e){console.error(`Error reading ${f.name}: ${e.message}`)}))}const V=["conversations","menus"];const w={components:{Multiselect:o},props:["modelValue","placeholder","projectData","section","type"],data:()=>({selectedTags:null,options:[],optionsLoaded:!1}),mounted(){this.modelValue&&(this.selectedTags=this.modelValue.split(",").map((e=>({value:e.trim(),label:e.trim()}))))},methods:{openTags(){this.updateOptions()},tagsChange(e){this.$emit("update:modelValue",e.map((e=>e.value)).join(","))},async getChoicesUpdate(e){return this.options},updateOptions(){if(!this.optionsLoaded){this.optionsLoaded=!0;for(const[e,t]of Object.entries(this.projectData))if("conditions"===this.type){t.conditions||(t.conditions={});for(const[n,o]of Object.entries(t.conditions)){const t=`${e}.${n}`;this.options.push({value:t,label:t})}}else if("events"===this.type){t.events||(t.events={});for(const[n,o]of Object.entries(t.events)){const t=`${e}.${n}`;this.options.push({value:t,label:t})}}else if("pointers"===this.type&&(t.conversations||(t.conversations={NPC_options:{},player_options:{}}),t.conversations))for(const[n,o]of Object.entries(t.conversations))if("NPC_options"===this.section)for(const[t,l]of Object.entries(o.player_options)){const n=`${e}.${t}`;this.options.push({value:n,label:n})}else if("player_options"===this.section)for(const[t,l]of Object.entries(o.NPC_options)){const n=`${e}.${t}`;this.options.push({value:n,label:n})}}}}};w.render=function(e,t,n,o,i,d){const c=l("Multiselect");return a(),s(c,{class:"autocomplete",modelValue:i.selectedTags,"onUpdate:modelValue":t[1]||(t[1]=e=>i.selectedTags=e),mode:"tags",searchable:!0,createTag:!0,minChars:1,resolveOnLoad:!0,appendNewTag:!0,object:!0,options:async function(e){return await d.getChoicesUpdate(e)},onChange:d.tagsChange,onOpen:d.openTags,ref:"multiselect",noOptionsText:e.$t("no-options"),noResultsText:e.$t("no-results")},null,8,["modelValue","options","onChange","onOpen","noOptionsText","noResultsText"])};const x={props:["modelValue","spanLeft","spanRight"],data:()=>({languagesAvailable:[],newLang:""}),computed:{localValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},created(){if("string"==typeof this.localValue){const e={};e[this.$root.settings.language]=this.localValue,this.localValue=e}},methods:{addLang(){2===this.newLang.length&&(this.localValue||(this.localValue={}),this.localValue[this.newLang]="",this.newLang="",this.$refs.languagePopover.hide())},delLang(e){this.$confirm(`Delete language ${e}?`,"Delete",{confirmButtonText:"Delete",cancelButtonText:"Cancel"}).then((()=>{delete this.localValue[e]}))}}},k={class:"lang-header"},j=i("i",{class:"el-icon-plus"},null,-1),q=i("i",{class:"el-icon-s-flag el-input__icon"},null,-1),S=r("Add"),T=i("i",{class:"el-icon-delete"},null,-1);x.render=function(e,t,n,o,p,g){const _=l("el-tag"),h=l("el-input"),f=l("el-button"),v=l("el-popover"),y=l("el-col"),b=l("el-row");return a(),s(c,null,[i("div",k,[i(v,{placement:"bottom",title:"Input language",trigger:"click","popper-class":"language-popover",ref:"languagePopover","show-after":0,"hide-after":0},{reference:d((()=>[i(_,{type:"info",class:"setting-header"},{default:d((()=>[j])),_:1})])),default:d((()=>[i(h,{modelValue:p.newLang,"onUpdate:modelValue":t[1]||(t[1]=e=>p.newLang=e),maxlength:2,minlength:2,size:"mini",class:"lang-input"},{prefix:d((()=>[q])),_:1},8,["modelValue"]),i(f,{type:"primary",size:"mini",onClick:g.addLang},{default:d((()=>[S])),_:1},8,["onClick"])])),_:1},512)]),(a(!0),s(c,null,u(g.localValue,((e,t)=>(a(),s(b,{class:"dialog-setting-section section-lang"},{default:d((()=>[i(y,{span:n.spanLeft||2},{default:d((()=>[i(_,{type:"info",class:"setting-header lang-slug",onClick:g.addLang},{default:d((()=>[r(m(t),1)])),_:2},1032,["onClick"]),i(_,{type:"info",class:"setting-header lang-delete",onClick:e=>g.delLang(t)},{default:d((()=>[T])),_:2},1032,["onClick"])])),_:2},1032,["span"]),i(y,{span:n.spanRight||22},{default:d((()=>[i(h,{class:"lang-editor",type:"textarea",autosize:{minRows:1,maxRows:20},modelValue:g.localValue[t],"onUpdate:modelValue":e=>g.localValue[t]=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["span"])])),_:2},1024)))),256))],64)};const N={components:{tagComplete:w,langField:x},props:["modelValue","dialogKey","activeKey","projectData","section","dialogSectionInfo"],data:()=>({}),created(){this.dialogInfo.event&&(this.dialogInfo.events=this.dialogInfo.event,delete this.dialogInfo.event),this.dialogInfo.condition&&(this.dialogInfo.conditions=this.dialogInfo.condition,delete this.dialogInfo.condition),this.dialogInfo.pointer&&(this.dialogInfo.pointers=this.dialogInfo.pointer,delete this.dialogInfo.pointer)},computed:{dialogInfo:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{renameDialog(e,t){this.$prompt("Enter new name","Dialog",{confirmButtonText:"Rename",cancelButtonText:"Cancel",inputPattern:/^[a-zA-Z0-9_]+$/,inputErrorMessage:"Already exists or bad name (use only a-z A-Z 0-9 and _)",inputValidator:t=>!this.dialogSectionInfo[e][t],inputValue:t}).then((({value:n})=>{this.$emit("rename",e,t,n)}))},deleteDialog(e,t){this.$confirm(this.$t("delete-section-key").replace("{section}",e).replace("{dialogKey}",t),this.$t("delete"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((()=>{this.$emit("delete",e,t)}))}}},C={class:"dialog-header"},I=i("i",{class:"el-icon-edit"},null,-1),D=i("i",{class:"el-icon-delete"},null,-1),z=i("i",{class:"el-icon-chat-line-round"},null,-1),E=i("i",{class:"el-icon-unlock"},null,-1),U=i("i",{class:"el-icon-magic-stick"},null,-1),L=i("i",{class:"el-icon-guide"},null,-1);N.render=function(e,t,n,o,c,u){const r=l("el-tag"),p=l("el-tooltip"),g=l("el-col"),_=l("langField"),h=l("el-row"),f=l("tagComplete"),v=l("el-card");return a(),s(v,{class:"dialog-card"},{header:d((()=>[i("div",C,m(n.dialogKey),1),i(r,{type:"info",class:"setting-header",onClick:t[1]||(t[1]=e=>u.renameDialog(n.section,n.dialogKey))},{default:d((()=>[I])),_:1}),i(r,{type:"info",class:"setting-header",onClick:t[2]||(t[2]=e=>u.deleteDialog(n.section,n.dialogKey))},{default:d((()=>[D])),_:1})])),default:d((()=>[i(h,{class:"dialog-setting-section section-lang"},{default:d((()=>[i(g,{span:1},{default:d((()=>[i(p,{class:"item",effect:"dark",content:"Text",placement:"left"},{default:d((()=>[i(r,{type:"info",class:"setting-header"},{default:d((()=>[z])),_:1})])),_:1})])),_:1}),i(g,{span:23},{default:d((()=>[i(_,{modelValue:u.dialogInfo.text,"onUpdate:modelValue":t[3]||(t[3]=e=>u.dialogInfo.text=e)},null,8,["modelValue"])])),_:1})])),_:1}),i(h,{class:"dialog-setting-section section-conditions"},{default:d((()=>[i(g,{span:1},{default:d((()=>[i(p,{class:"item",effect:"dark",content:"Conditions",placement:"left"},{default:d((()=>[i(r,{type:"info",class:"setting-header"},{default:d((()=>[E])),_:1})])),_:1})])),_:1}),i(g,{span:23},{default:d((()=>[i(f,{type:"conditions",modelValue:u.dialogInfo.conditions,"onUpdate:modelValue":t[4]||(t[4]=e=>u.dialogInfo.conditions=e),section:n.section,"project-data":n.projectData},null,8,["modelValue","section","project-data"])])),_:1})])),_:1}),i(h,{class:"dialog-setting-section section-event"},{default:d((()=>[i(g,{span:1},{default:d((()=>[i(p,{class:"item",effect:"dark",content:"Events",placement:"left"},{default:d((()=>[i(r,{type:"info",class:"setting-header"},{default:d((()=>[U])),_:1})])),_:1})])),_:1}),i(g,{span:23},{default:d((()=>[i(f,{type:"events",modelValue:u.dialogInfo.events,"onUpdate:modelValue":t[5]||(t[5]=e=>u.dialogInfo.events=e),section:n.section,"project-data":n.projectData},null,8,["modelValue","section","project-data"])])),_:1})])),_:1}),i(h,{class:"dialog-setting-section section-pointers"},{default:d((()=>[i(g,{span:1},{default:d((()=>[i(p,{class:"item",effect:"dark",content:"Pointers",placement:"left"},{default:d((()=>[i(r,{type:"info",class:"setting-header"},{default:d((()=>[L])),_:1})])),_:1})])),_:1}),i(g,{span:23},{default:d((()=>[i(f,{type:"pointers",modelValue:u.dialogInfo.pointers,"onUpdate:modelValue":t[6]||(t[6]=e=>u.dialogInfo.pointers=e),section:n.section,"project-data":n.projectData},null,8,["modelValue","section","project-data"])])),_:1})])),_:1})])),_:1})};const M={components:{dialogOption:N,langField:x},props:["modelValue","projectData"],data:()=>({yamlEdit:!1,yamlText:null}),computed:{dialogSectionInfo:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{changeToYaml(){this.yamlText=t.dump(this.dialogSectionInfo,{lineWidth:-1}),this.yamlEdit=!0},changeToEditor(){this.dialogSectionInfo=t.load(this.yamlText),this.yamlText=null,this.yamlEdit=!1},addDialogOption(e){this.$prompt(this.$t("enter-dialog-name"),this.$t("dialog-window-title"),{confirmButtonText:this.$t("create"),cancelButtonText:this.$t("cancel"),inputPattern:/^[a-zA-Z0-9_]+$/,inputErrorMessage:this.$t("dialog-exists-regex"),inputValidator:t=>!this.dialogSectionInfo[e][t],closeOnClickModal:!1}).then((({value:t})=>{const n={text:{}};n.text[this.$root.settings.language]="",this.dialogSectionInfo[e][t]=n,this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-created").replace("{value}",t)})}))},renameDialog(e,t,n){this.dialogSectionInfo[e][n]=this.dialogSectionInfo[e][t],delete this.dialogSectionInfo[e][t],this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-created").replace("{dialogKey}",t).replace("{newKey}",n)})},deleteDialog(e,t){delete this.dialogSectionInfo[e][t],this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-deleted").replace("{dialogKey}",t)})}}},A={key:0,class:"view-editor-section dialog-section"},K={class:"menu-buttons"},P={class:"quester-name"},O={class:"dialog-title"},Q={class:"dialog-options-section"},R={class:"menu-buttons"},F={class:"dialog-title"},B={key:1,class:"yaml-editor-section"},H={class:"menu-buttons"};M.render=function(e,t,n,o,p,g){const _=l("el-button"),h=l("langField"),f=l("el-card"),v=l("dialogOption"),y=l("el-space"),b=l("el-input");return p.yamlEdit?(a(),s("div",B,[i("div",H,[i(_,{size:"mini",onClick:g.changeToEditor,class:"menu-button"},{default:d((()=>[r(m(e.$t("save-and-return")),1)])),_:1},8,["onClick"])]),i(b,{class:"yaml-editor",type:"textarea",autosize:{minRows:20,maxRows:60},modelValue:p.yamlText,"onUpdate:modelValue":t[2]||(t[2]=e=>p.yamlText=e)},null,8,["modelValue"])])):(a(),s("div",A,[i("div",K,[i(_,{size:"mini",onClick:g.changeToYaml,class:"menu-button"},{default:d((()=>[r(m(e.$t("yaml-editor")),1)])),_:1},8,["onClick"])]),i("div",P,[i("div",O,m(e.$t("quester-name")),1),i(f,{class:"quester-lang"},{default:d((()=>[i(h,{modelValue:g.dialogSectionInfo.quester,"onUpdate:modelValue":t[1]||(t[1]=e=>g.dialogSectionInfo.quester=e),"span-left":10,"span-right":14},null,8,["modelValue"])])),_:1})]),(a(),s(c,null,u(["NPC_options","player_options"],(t=>i("div",Q,[i("div",R,[i("div",F,m(e.$t(t)),1),i(_,{size:"mini",onClick:e=>g.addDialogOption(t),class:"menu-button",type:"success",plain:"",icon:"el-icon-chat-line-round"},{default:d((()=>[r(m(e.$t("add-dialog")),1)])),_:2},1032,["onClick"])]),i(y,{wrap:"",class:"dialogs-section"},{default:d((()=>[(a(!0),s(c,null,u(g.dialogSectionInfo[t],((e,o)=>(a(),s(v,{key:o,modelValue:g.dialogSectionInfo[t][o],"onUpdate:modelValue":e=>g.dialogSectionInfo[t][o]=e,section:t,dialogKey:o,"project-data":n.projectData,"dialog-section-info":g.dialogSectionInfo,onDelete:g.deleteDialog,onRename:g.renameDialog},null,8,["modelValue","onUpdate:modelValue","section","dialogKey","project-data","dialog-section-info","onDelete","onRename"])))),128))])),_:2},1024)]))),64))]))};const J={props:["modelValue","valueKey","activeKey"],data:()=>({}),computed:{localValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},localActiveKey:{get(){return this.activeKey},set(e){this.$emit("update:activeKey",e)}}},methods:{deleteSetting(e){this.$confirm(this.$t("delete-key").replace("{key}",e),this.$t("delete"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((()=>{this.$emit("delete",e)}))}}},Z={class:"setting-section el-row"},Y=i("i",{class:"el-icon-delete"},null,-1),G={key:1,class:"field-editor"};J.render=function(e,t,n,o,c,u){const p=l("el-tag"),g=l("el-input");return a(),s("div",Z,[i(p,{type:"info",class:"setting-header delete-button",onClick:t[1]||(t[1]=e=>u.deleteSetting(n.valueKey))},{default:d((()=>[Y])),_:1}),i(p,{type:"info",class:"setting-header el-col el-col-4"},{default:d((()=>[r(m(n.valueKey),1)])),_:1}),u.localActiveKey!==n.valueKey?(a(),s("div",{key:0,class:"setting-value el-col-18",onClick:t[2]||(t[2]=e=>u.localActiveKey=n.valueKey)},m(u.localValue),1)):(a(),s("div",G,[i(g,{modelValue:u.localValue,"onUpdate:modelValue":t[3]||(t[3]=e=>u.localValue=e)},null,8,["modelValue"])]))])};const W={components:{simpleField:J},props:["modelValue"],data:()=>({yamlEdit:!1,yamlText:null,activeKey:""}),computed:{localValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{changeToYaml(){this.yamlText=t.dump(this.localValue,{lineWidth:-1}),this.yamlEdit=!0},changeToEditor(){this.localValue=t.load(this.yamlText),this.yamlText=null,this.yamlEdit=!1},deleteSetting(e){delete this.localValue[e]},newSetting(){this.$prompt(this.$t("new-setting-key"),this.$t("create"),{confirmButtonText:this.$t("create"),cancelButtonText:this.$t("cancel"),inputPattern:/^[a-zA-Z0-9_]+$/,inputErrorMessage:this.$t("dialog-exists-regex"),inputValidator:e=>!this.localValue[e]}).then((({value:e})=>{this.localValue[e]=""}))}}},X={key:0,class:"view-editor-section"},ee={class:"menu-buttons"},te={key:1,class:"yaml-editor-section"},ne={class:"menu-buttons"};W.render=function(e,t,n,o,p,g){const _=l("el-button"),h=l("simpleField"),f=l("el-input");return p.yamlEdit?(a(),s("div",te,[i("div",ne,[i(_,{size:"mini",onClick:g.changeToEditor,class:"menu-button"},{default:d((()=>[r(m(this.$t("save-and-return")),1)])),_:1},8,["onClick"])]),i(f,{class:"yaml-editor",type:"textarea",autosize:{minRows:20,maxRows:50},modelValue:p.yamlText,"onUpdate:modelValue":t[2]||(t[2]=e=>p.yamlText=e)},null,8,["modelValue"])])):(a(),s("div",X,[i("div",ee,[i(_,{size:"mini",onClick:g.changeToYaml,class:"menu-button"},{default:d((()=>[r(m(this.$t("yaml-editor")),1)])),_:1},8,["onClick"]),i(_,{size:"mini",onClick:g.newSetting,class:"menu-button",type:"success",icon:"el-icon-plus",plain:""},{default:d((()=>[r(m(e.$t("new-setting")),1)])),_:1},8,["onClick"])]),(a(!0),s(c,null,u(g.localValue,((e,n)=>(a(),s(h,{modelValue:g.localValue[n],"onUpdate:modelValue":e=>g.localValue[n]=e,"value-key":n,activeKey:p.activeKey,"onUpdate:activeKey":t[1]||(t[1]=e=>p.activeKey=e),onDelete:g.deleteSetting},null,8,["modelValue","onUpdate:modelValue","value-key","activeKey","onDelete"])))),256))]))};const oe={props:["modelValue"],data:()=>({}),computed:{localValue:{get(){return t.dump(this.modelValue,{lineWidth:-1})},set(e){this.$emit("update:modelValue",t.load(this.yamlText))}}},methods:{}};oe.render=function(e,t,n,o,i,d){const c=l("el-input");return a(),s(c,{class:"yaml-editor",type:"textarea",autosize:{minRows:20,maxRows:50},modelValue:d.localValue,"onUpdate:modelValue":t[1]||(t[1]=e=>d.localValue=e)},null,8,["modelValue"])};const le={components:{dialogSection:M,simpleSection:W,yamlEditor:oe},props:["modelValue","projectData"],data:()=>({addVisible:!1,newNameError:null,newName:"",dialogSelected:null,menuSelected:null,newMode:null,sectionSelected:""}),computed:{sectionInfo:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{removeDialogSection(e){this.$confirm(this.$t("delete-section").replace("{tab}",e),this.$t("confirm"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((()=>{delete this.projectData[e],this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("tab-deleted").replace("{tab}",e)})}))},addDialoge(){if(this.newName.length<=0)this.newNameError=this.$t("empty-title");else{if(this.sectionInfo.conversations||(this.sectionInfo.conversations={}),"dialog"===this.newMode){if(this.sectionInfo.conversations||(this.sectionInfo.conversations={}),this.sectionInfo.conversations[this.newName])return void(this.newNameError=this.$t("dialog-exists").replace("{newName}",this.newName));this.sectionInfo.conversations[this.newName]={quester:this.newName,NPC_options:{},player_options:{}},this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-section-created").replace("{newName}",this.newName)})}else if("menu"===this.newMode){if(this.sectionInfo.menus||(this.sectionInfo.menus={}),this.sectionInfo.menus[this.newName])return void(this.newNameError=this.$t("menu-section-exists").replace("{newName}",this.newName));this.sectionInfo.menus||(this.sectionInfo.menus={}),this.sectionInfo.menus[this.newName]={},this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("menu-section-created").replace("{newName}",this.newName)})}this.dialogSelected=this.newName,this.newName=null,this.includeExample=!1,this.addVisible=!1,this.newNameError=null,this.newMode=null}},openNew(e){this.includeExample=!1,this.newMode=e,this.newName="",this.addVisible=!0}}},ae={class:"menu-buttons"},se={class:"dialogs-tabs"},ie={class:"menu-buttons"},de={class:"dialogs-tabs"},ce={class:"dialog-footer"};le.render=function(e,t,n,o,g,_){const h=l("el-button"),f=l("dialogSection"),v=l("el-tab-pane"),y=l("el-tabs"),b=l("yamlEditor"),$=l("simpleSection"),V=l("el-alert"),w=l("el-input"),x=l("el-dialog");return a(),s(c,null,[i(y,{"tab-position":"left",modelValue:g.sectionSelected,"onUpdate:modelValue":t[12]||(t[12]=e=>g.sectionSelected=e),class:"section-tabs",onTabRemove:_.removeDialogSection},{default:d((()=>[i(v,{label:e.$t("dialogs")},{default:d((()=>[i("div",ae,[i(h,{size:"mini",onClick:t[1]||(t[1]=e=>_.openNew("dialog")),class:"menu-button",icon:"el-icon-plus"},{default:d((()=>[r(m(e.$t("add-dialog-section")),1)])),_:1})]),i("div",se,[i(y,{"tab-position":"left",modelValue:g.dialogSelected,"onUpdate:modelValue":t[2]||(t[2]=e=>g.dialogSelected=e)},{default:d((()=>[(a(!0),s(c,null,u(_.sectionInfo.conversations,((e,t)=>(a(),s(v,{label:t,name:t,key:t},{default:d((()=>[g.dialogSelected===t?(a(),s(f,{key:0,modelValue:_.sectionInfo.conversations[t],"onUpdate:modelValue":e=>_.sectionInfo.conversations[t]=e,"project-data":n.projectData},null,8,["modelValue","onUpdate:modelValue","project-data"])):p("",!0)])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])])),_:1},8,["label"]),i(v,{label:e.$t("menus")},{default:d((()=>[i("div",ie,[i(h,{size:"mini",onClick:t[3]||(t[3]=e=>_.openNew("menu")),class:"menu-button"},{default:d((()=>[r(m(e.$t("add-menu")),1)])),_:1})]),i("div",de,[i(y,{"tab-position":"left",modelValue:g.menuSelected,"onUpdate:modelValue":t[4]||(t[4]=e=>g.menuSelected=e)},{default:d((()=>[(a(!0),s(c,null,u(_.sectionInfo.menus,((e,t)=>(a(),s(v,{label:t,name:t,key:t},{default:d((()=>[i(b,{modelValue:_.sectionInfo.menus[t],"onUpdate:modelValue":e=>_.sectionInfo.menus[t]=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])])),_:1},8,["label"]),i(v,{label:e.$t("events")},{default:d((()=>["2"===g.sectionSelected?(a(),s($,{key:0,modelValue:_.sectionInfo.events,"onUpdate:modelValue":t[5]||(t[5]=e=>_.sectionInfo.events=e)},null,8,["modelValue"])):p("",!0)])),_:1},8,["label"]),i(v,{label:e.$t("conditions")},{default:d((()=>["3"===g.sectionSelected?(a(),s($,{key:0,modelValue:_.sectionInfo.conditions,"onUpdate:modelValue":t[6]||(t[6]=e=>_.sectionInfo.conditions=e)},null,8,["modelValue"])):p("",!0)])),_:1},8,["label"]),i(v,{label:e.$t("objectives")},{default:d((()=>["4"===g.sectionSelected?(a(),s($,{key:0,modelValue:_.sectionInfo.objectives,"onUpdate:modelValue":t[7]||(t[7]=e=>_.sectionInfo.objectives=e)},null,8,["modelValue"])):p("",!0)])),_:1},8,["label"]),i(v,{label:e.$t("items")},{default:d((()=>["5"===g.sectionSelected?(a(),s($,{key:0,modelValue:_.sectionInfo.items,"onUpdate:modelValue":t[8]||(t[8]=e=>_.sectionInfo.items=e)},null,8,["modelValue"])):p("",!0)])),_:1},8,["label"]),i(v,{label:e.$t("main")},{default:d((()=>["6"===g.sectionSelected?(a(),s(b,{key:0,modelValue:_.sectionInfo.main,"onUpdate:modelValue":t[9]||(t[9]=e=>_.sectionInfo.main=e)},null,8,["modelValue"])):p("",!0)])),_:1},8,["label"]),i(v,{label:e.$t("journal")},{default:d((()=>["7"===g.sectionSelected?(a(),s(b,{key:0,modelValue:_.sectionInfo.journal,"onUpdate:modelValue":t[10]||(t[10]=e=>_.sectionInfo.journal=e)},null,8,["modelValue"])):p("",!0)])),_:1},8,["label"]),i(v,{label:e.$t("custom")},{default:d((()=>["8"===g.sectionSelected?(a(),s(b,{key:0,modelValue:_.sectionInfo.custom,"onUpdate:modelValue":t[11]||(t[11]=e=>_.sectionInfo.custom=e)},null,8,["modelValue"])):p("",!0)])),_:1},8,["label"])])),_:1},8,["modelValue","onTabRemove"]),i(x,{title:e.$t("create-subsection"),modelValue:g.addVisible,"onUpdate:modelValue":t[15]||(t[15]=e=>g.addVisible=e),width:"30%","custom-class":"create-section-dialog","close-on-click-modal":!1},{footer:d((()=>[i("span",ce,[i(h,{onClick:t[14]||(t[14]=e=>g.addVisible=!1)},{default:d((()=>[r(m(e.$t("cancel")),1)])),_:1}),i(h,{type:"primary",onClick:_.addDialoge},{default:d((()=>[r(m(e.$t("create")),1)])),_:1},8,["onClick"])])])),default:d((()=>[g.newNameError?(a(),s(V,{key:0,title:g.newNameError,type:"error"},null,8,["title"])):p("",!0),i("span",null,m(e.$t("dialog-section-name")),1),i(w,{modelValue:g.newName,"onUpdate:modelValue":t[13]||(t[13]=e=>g.newName=e)},null,8,["modelValue"])])),_:1},8,["title","modelValue"])],64)};const ue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 480"},re=i("g",{"fill-rule":"evenodd","stroke-width":"1pt"},[i("path",{fill:"#fff",d:"M0 0h640v480H0z"}),i("path",{fill:"#0039a6",d:"M0 160h640v320H0z"}),i("path",{fill:"#d52b1e",d:"M0 320h640v160H0z"})],-1);function me(e,t){return a(),s("svg",ue,[re])}const pe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 480"},ge=i("path",{fill:"#012169",d:"M0 0h640v480H0z"},null,-1),_e=i("path",{fill:"#FFF",d:"m75 0 244 181L562 0h78v62L400 241l240 178v61h-80L320 301 81 480H0v-60l239-178L0 64V0h75z"},null,-1),he=i("path",{fill:"#C8102E",d:"m424 281 216 159v40L369 281h55zm-184 20 6 35L54 480H0l240-179zM640 0v3L391 191l2-44L590 0h50zM0 0l239 176h-60L0 42V0z"},null,-1),fe=i("path",{fill:"#FFF",d:"M241 0v480h160V0H241zM0 160v160h640V160H0z"},null,-1),ve=i("path",{fill:"#C8102E",d:"M0 193v96h640v-96H0zM273 0v480h96V0h-96z"},null,-1);function ye(e,t){return a(),s("svg",pe,[ge,_e,he,fe,ve])}const be={components:{questSection:le,ruFlag:me,enFlag:ye},data:()=>({projectData:{},sectionSelected:null,dialogAddSectionVisible:!1,newTabName:null,newTabNameError:null,inclideDialogExample:!1,inclideMenuExample:!1,openSettingsVisible:!1,settings:{language:"ru"},avaliableLanguages:{en:ye,ru:me}}),created(){this.readSettings();g().setLocale(this.settings.language)},methods:{changeLang(e){this.settings.language=e,this.saveSettings(),document.location.reload()},closeAndSaveSettings(){this.openSettingsVisible=!1,this.saveSettings()},saveSettings(){localStorage.setItem("settings",JSON.stringify(this.settings))},readSettings(){const e=JSON.parse(localStorage.getItem("settings"));e&&(this.settings=e)},addTab(){if(this.newTabName.length<=0)this.newTabNameError=this.$t("error-title-name-empty");else{if(this.projectData[this.newTabName]={},this.inclideDialogExample){const e=t.load("conversations:\n  gregory:\n    quester:\n      en: 'Gregory'\n      ru: 'Грегори'\n    first: message_start\n    stop: 'false' \n\n    NPC_options:\n\n      message_start:\n        text: \n          ru: 'Да?'\n          en: 'Yes?'\n        pointers: option_el_start,option_el_done, option_golem_start,option_golem_done ,option_bye\n\n      # el\n      message_el_start:\n        text: \n          ru: 'Здравствуй путник! Мое имя Грегори, Грегори Д`Вагнер, этот мир я увидел тридцать восемь зим назад. Когда-то давно, я тоже искал приключения, и жил опираясь только на миг настоящего, даже не задумываясь о будущем, считая, что в этом заключается мое счастье, быть свободным словно ветер и смотреть, как по ночному небу робко пробегают первые всполохи рассвета, пробиваясь сквозь сияние звезд. Что-то у меня в горле пересохло.. Я с удовольствием продолжу историю если ты принесёшь бутылочку эля.\\n\\n&6Необходимый уровень 5\\n\\n&2Награда:\\n✦ $mag_training_exp$ опыта\\n✦ $mag_training_money$ монет'\n        pointers: option_el_yes,option_no\n      message_el_yes:\n        text: \n          ru: 'Ты сможешь найти меня тут.'\n        event: event_el_start\n        pointers: option_ok\n      message_el_done:\n        text: 'Хороший эль.. О чем это я, так я считал до того решающего заказа на логово орков, где повстречал ее. Она не просто бегала, она буквально порхала вокруг целой толпы громил, кувыркаясь, приседая и осыпая чудовищ смертельными ударами своего кинжала. С этого задания и началась наша новая жизнь. Она была такая же, свободная и прекрасная, как лепестки сакуры на ветру, неуловима и свежа, словно теплый весенний ветерок в лесу.. Выпей со мной!'\n        event: event_el_paid\n        pointers: option_ok\n\n      # golem\n      message_golem_start:\n        text: \n          ru: 'В какой-то момент ей надоела жизнь на дороге и мы купили себе небольшой дом и мы хотели мирно жить.. Но меня манила свобода, и я, ослепленный ей, снова взял заказ, на пещерного голема. Будь проклят тот день, когда я решился на это.. Моя прекрасная Мэри естественно отправилась со мной, но там было слишком опасно. Она.. умерла прямо на моих глазах, а я ничего не мог сделать и сам еле спасся и был покалечен. Слепой идиот, слишком любивший свободу..'\n        pointers: option_golem_start_1\n      message_golem_start_1:\n        text: \n          ru: 'Так, свобода, о которой я так мечтал, стала для меня вечным пустым и холодным одиночеством.. Выбирай свои ценности правильно, не повторяй моих ошибок.'\n        pointers: option_golem_yes,option_no\n      message_golem_yes:\n        text: \n          ru: 'Если ты уверен, что хочешь этим заняться. Я отдам тебе всю награду.'\n        event: event_golem_start\n        pointers: option_ok\n      message_golem_done:\n        text: \n          ru: 'Невероятно! Вот, возьми всю награду.'\n        pointers: option_golem_paid1,option_golem_paid2\n\n    player_options:\n\n      option_el_start:\n        text: \n          ru: '$quest_prefix$Здравствуй'\n        conditions: '!cond_el_started'\n        pointers: message_el_start\n      option_el_yes:\n        text: \n          ru: '$quest_yes_prefix$Хорошо, я принесу.'\n        pointers: message_el_yes\n      option_el_done:\n        text: \n          ru: '$quest_done_prefix$Вот бутылочка'\n        conditions: 'cond_el_done,!cond_el_paid'\n        pointers: message_el_done\n\n      option_golem_start:\n        text: \n          ru: '$quest_prefix$Так что было дальше?'\n        conditions: '!cond_golem_started,cond_el_paid'\n        pointers: message_golem_start\n      option_golem_start_1:\n        text: \n          ru: '$quest_prefix$Почему?'\n        pointers: message_golem_start_1\n      option_golem_yes:\n        text: \n          ru: '$quest_yes_prefix$Возможно я смогу тебе помочь с заданием?'\n        pointers: message_golem_yes\n      option_golem_done:\n        text: \n          ru: '$quest_done_prefix$Я убил голема!'\n        conditions: 'cond_golem_done,!cond_golem_paid'\n        pointers: message_golem_done\n\n      option_golem_paid1:\n        text: \n          ru: '$quest_done_prefix$Не надо. Тебе эти деньги теперь нужны больше.'\n        event: event_golem_paid_exp\n      option_golem_paid2:\n        text: \n          ru: '$quest_done_prefix$Да, давай. Спасибо!'\n        event: event_golem_paid_money\n\n      option_no:\n        text:\n          ru: '$quest_no_prefix$Мне некогда'\n        pointers: message_start\n\n      option_ok:\n        text:\n          ru: 'Хорошо'\n        pointers: message_start\n\n      option_bye:\n        text:\n          ru: '{oak_door}До встречи'\n\nevents:\n  event_el_start: folder event_el_s2,event_el_s3,event_el_s4\n  event_el_s2: journal add j_el_started\n  event_el_s3: tag add tag_el_started\n  event_el_s4: notify &2Вы начали квест &a$el_name$ category:start_quest\n\n  event_el_done: folder event_el_d1,event_el_d2,event_el_d3,event_el_d4,event_el_d5\n  event_el_d1: journal delete j_el_started\n  event_el_d2: journal add j_el_done\n  event_el_d3: tag add tag_el_done\n  event_el_d4: money -50 notify\n  event_el_d5: give el_item notify\n\n  event_el_paid: folder event_el_p1,event_el_p2,event_el_p3,event_el_p5,event_el_p6\n  event_el_p1: journal delete j_el_done\n  event_el_p2: tag add tag_el_paid\n  event_el_p3: run ^command mmocore admin exp give %player% main $el_exp$ ^notify &eВы получили &6$el_exp$ &eопыта category:reward\n  event_el_p5: notify &2Вы закончили квест &a$el_name$ category:end_quest\n  event_el_p6: take el_item notify\n\n  event_golem_start: folder event_golem_s2,event_golem_s3,event_golem_s4,event_golem_s5,event_golem_s6\n  event_golem_s2: journal add j_golem_started\n  event_golem_s3: tag add tag_golem_started\n  event_golem_s4: notify &2Вы начали квест &a$golem_name$ category:start_quest\n  event_golem_s5: objective start obj_golem\n  event_golem_s6: compass add cave_golem\n\n  event_golem_done: folder event_golem_d1,event_golem_d2,event_golem_d3\n  event_golem_d1: journal delete j_golem_started\n  event_golem_d2: journal add j_golem_done\n  event_golem_d3: tag add tag_golem_done\n\n  event_golem_paid: folder event_golem_p1,event_golem_p2,event_golem_p5,event_golem_p6\n  event_golem_p1: journal delete j_golem_done\n  event_golem_p2: tag add tag_golem_paid\n  event_golem_p5: notify &2Вы закончили квест &a$golem_name$ category:end_quest\n  event_golem_p6: compass del cave_golem\n\n  event_golem_paid_money: folder event_golem_paid,event_golem_pm\n  event_golem_pm: money $golem_money$ notify\n\n  event_golem_paid_exp: folder event_golem_paid,event_golem_pexp\n  event_golem_pexp: run ^command mmocore admin exp give %player% main $golem_exp$ ^notify &eВы получили &6$golem_exp$ &eопыта category:reward\n\njournal:\n  j_el_started:\n    ru: 'Грегори обещал продолжить свой рассказ если я принесу ему бутылочку эля.'\n  j_el_done:\n    ru: 'Я раздобыл эль, я могу отнести его Грегори.'\n\n  j_golem_started:\n    ru: 'Грегори указал на пещеру, мне надо убить там пещерного голема.'\n  j_golem_done:\n    ru: 'Я убил пещерного голема, я могу рассказать об этом Грегори.'\n\nmain:\n  variables:\n    quest_prefix: '{book}&a[Квест]&e '\n    quest_done_prefix: '{enchanted_book}&2[Завершение квеста]&e '\n    quest_yes_prefix: '{book}&a[Принять]&e '\n    quest_no_prefix: '{barrier}&c[Отмена]&e '\n    quest_exit: '{oak_door}&7[Выход]&e '\n    gui_smith: '{anvil}&7[Ковка]&e '\n\n  npcs:\n    '70': gregory\n\n  compass:\n    cave_golem:\n      name:\n        ru: 'Пещерный голем'\n      location: -932;77;-510;world_rpg\n      item: compass_button\n\nobjectives:\n  obj_golem: mmobkill cave_golem amount:1 notify events:event_golem_done\n\ncustom:\n  notifications:\n    start_quest:\n      io: advancement\n      frame: task\n      icon: book\n      sound: entity.experience_orb.pickup\n    get_item:\n      frame: task\n      io: advancement\n      sound: entity.experience_orb.pickup\n    task_done:\n      frame: task\n      io: advancement\n      sound: entity.experience_orb.pickup\n    reward:\n      io: chat\n    chat:\n      io: chat\n\n  npc_holograms:\n    check_interval: 100\n    quest_avalible_gregory:\n      lines:\n        - 'item:default.quest_avalible'\n      vector: '0;3.2;0'\n      npcs:\n        - 70\n      conditions: 'cond_quest_avalible_gregory,!cond_quest_progress_gregory,!cond_quest_done_gregory'\n    quest_progress_gregory:\n      lines:\n        - 'item:default.quest_progress'\n      vector: '0;3.2;0'\n      npcs:\n        - 70\n      conditions: 'cond_quest_progress_gregory,!cond_quest_done_gregory'\n    quest_done_gregory:\n      lines:\n        - 'item:default.quest_done'\n      vector: '0;3.2;0'\n      npcs:\n        - 70\n      conditions: 'cond_quest_done_gregory'\n\nconditions:\n  cond_quest_avalible_gregory: or cond_gregory_el_icon1,cond_gregory_golem_icon1\n  cond_quest_progress_gregory: or cond_gregory_el_icon2,cond_gregory_golem_icon2\n  cond_quest_done_gregory: or cond_gregory_el_icon3,cond_gregory_golem_icon3\n\n  cond_gregory_el_icon1: and !cond_el_started\n  cond_gregory_el_icon2: and cond_el_started,!cond_el_done\n  cond_gregory_el_icon3: and cond_el_done,!cond_el_paid\n\n  cond_gregory_golem_icon1: and !cond_golem_started,cond_el_paid\n  cond_gregory_golem_icon2: and cond_golem_started,!cond_golem_done\n  cond_gregory_golem_icon3: and cond_golem_done,!cond_golem_paid\n\n  cond_el_started: tag tag_el_started\n  cond_el_done: tag tag_el_done\n  cond_el_paid: tag tag_el_paid\n\n  cond_golem_started: tag tag_golem_started\n  cond_golem_done: tag tag_golem_done\n  cond_golem_paid: tag tag_golem_paid\n  cond_50_coins: money 50\n\nitems:\n");this.projectData[this.newTabName].conversations=e.conversations,this.projectData[this.newTabName].conditions=e.conditions,this.projectData[this.newTabName].custom=e.custom,this.projectData[this.newTabName].events=e.events,this.projectData[this.newTabName].items=e.items,this.projectData[this.newTabName].journal=e.journal,this.projectData[this.newTabName].main=e.main,this.projectData[this.newTabName].objectives=e.objectives}if(this.inclideDialogExample=!1,this.inclideMenuExample){const e=t.load("example:\n  height: 3\n  title: '&6&lQuests'\n  bind: menu_quests_open\n  command: '/quests'\n  open_conditions: 'menu_quests_open_permission'\n  items:\n    quest1_active:\n      item: menu_quests_1\n      amount: 1\n      conditions: '!menu_quests_1_tag_completed'\n      text:\n        en:\n          - '&7[Quest] &f&lBone ripper'\n          - '&f&oRipp some skeletons off'\n          - '&f&otheir bones to complete'\n          - '&f&othis quest.'\n          - '&f&o'\n          - '&eLeft click to locate npc'\n          - '&eRight click to cancel quest'\n        de:\n          - '&7[Quest] &f&lKnochenbrecher'\n          - '&f&oBrech den Skeletten alle'\n          - '&f&oKnochen um diese Quest'\n          - '&f&oabzuschließen'\n          - '&f&o'\n          - '&eLinksclick um den NPC zu finden'\n          - '&eRechstclick um die Quest abzubrechen'\n      click:\n        right: menu_quests_1_cancel,menu_quests_1_cancel_msg\n        left: menu_quests_1_compass,menu_quests_1_location_msg\n      close: true\n    quest1_completed:\n      item: menu_quests_1_completed\n      amount: 1\n      conditions: menu_quests_1_tag_completed\n      text:\n        en:\n          - '&2[Quest] &f&lBone ripper'\n          - '&f&oRipp some skeletons off'\n          - '&f&otheir bones to complete'\n          - '&f&othis quest.'\n          - '&f&o'\n          - '&2Quest completed!'\n        de:\n          - '&2[Quest] &f&lKnochenbrecher'\n          - '&f&oBrech den Skeletten alle'\n          - '&f&oKnochen um diese Quest'\n          - '&f&oabzuschließen'\n          - '&f&o'\n          - '&2Quest abgeschlossen!'\n      close: false\n    quest2_active:\n      item: menu_quests_2\n      amount: 1\n      conditions: '!menu_quests_2_tag_completed'\n      text:\n        en:\n          - '&7[Quest] &7&lSorcerer''s apprentice'\n          - '&d&oCollect some ingredients'\n          - '&d&ofor the sorcerer to'\n          - '&d&ocomplete this quest.'\n          - '&d&o'\n          - '&eLeft click to locate npc'\n          - '&eRight click to cancel quest'\n        de:\n          - '&7[Quest] &7&lZauberlehrling'\n          - '&d&oSammel für den Zauberer'\n          - '&d&oeinige Trankzutaten um '\n          - '&d&odiese Quest abzuschließen.'\n          - '&d&o'\n          - '&eLinksclick um den NPC zu finden'\n          - '&eRechstclick um die Quest abzubrechen'\n      click:\n        right: menu_quests_2_cancel,menu_quests_2_cancel_msg\n        left: menu_quests_2_compass,menu_quests_2_location_msg\n      close: true\n    quest2_completed:\n      item: menu_quests_2_completed\n      amount: 1\n      conditions: menu_quests_2_tag_completed\n      text:\n        en:\n          - '&2[Quest] &7&lSorcerer''s apprentice'\n          - '&d&oCollect some ingredients'\n          - '&d&ofor the sorcerer to'\n          - '&d&ocomplete this quest.'\n          - '&d&o'\n          - '&2Quest completed!'\n        de:\n          - '&2[Quest] &7&lZauberlehrling'\n          - '&d&oSammel für den Zauberer'\n          - '&d&oeinige Trankzutaten um '\n          - '&d&odiese Quest abzuschließen.'\n          - '&d&o'\n          - '&2Quest abgeschlossen!'\n      close: false\n    quest3_active:\n      item: menu_quests_3\n      amount: 1\n      conditions: '!menu_quests_3_tag_completed'\n      text:\n        en:\n          - '&7[Quest] &6&lThe lost amulet'\n          - '&4&oFind the lost amulet of'\n          - '&4&oSonequa to complete '\n          - '&4&othis quest.'\n          - '&4&o'\n          - '&eLeft click to locate npc'\n          - '&eRight click to cancel quest'\n        de:\n          - '&7[Quest] &6&lDas verlorene Amulet'\n          - '&4&oFinde das verlorene Amulet'\n          - '&4&ovon Sonequa um diese'\n          - '&4&oQuest abzuschließen.'\n          - '&4&o'\n          - '&eLinksclick um den NPC zu finden'\n          - '&eRechstclick um die Quest abzubrechen'\n      click:\n        right: menu_quests_3_cancel,menu_quests_3_cancel_msg\n        left: menu_quests_3_compass,menu_quests_3_location_msg\n      close: true\n    quest3_completed:\n      item: menu_quests_3_completed\n      amount: 1\n      conditions: menu_quests_3_tag_completed\n      text:\n        en:\n          - '&2[Quest] &6&lThe lost amulet'\n          - '&4&oFind the lost amulet of'\n          - '&4&oSonequa to complete '\n          - '&4&othis quest.'\n          - '&4&o'\n          - '&2Quest completed!'\n        de:\n          - '&2[Quest] &6&lDas verlorene Amulet'\n          - '&4&oFinde das verlorene Amulet'\n          - '&4&ovon Sonequa um diese'\n          - '&4&oQuest abzuschließen.'\n          - '&4&o'\n          - '&2Quest abgeschlossen!'\n      close: false\n    reputation:\n      item: menu_quests_reputation\n      amount: 1\n      text:\n        en:\n          - '&2Quest reputation: &6&l%point.quest_reputation.amount%'\n        de:\n          - '&2Quest Ansehen: &6&l%point.quest_reputation.amount%'\n      click: menu_quests_reputation_msg\n      close: true\n  slots:\n    8: reputation\n    11: 'quest1_active,quest1_completed'\n    13: 'quest2_active,quest2_completed'\n    15: 'quest3_active,quest3_completed'\n");this.projectData[this.newTabName].menus=e}this.inclideMenuExample=!1,this.$message({dangerouslyUseHTMLString:!0,message:`Section <b>${this.newTabName}</b> created!`,type:"success"}),this.sectionSelected=this.newTabName,this.newTabName=null,this.dialogAddSectionVisible=!1,this.newTabNameError=null}},openNewTabDialog(){this.newTabName="",this.dialogAddSectionVisible=!0},removeTab(e){this.$confirm(this.$t("delete-section").replace("{tab}",e),this.$t("confirm"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((()=>{delete this.projectData[e],this.$message({type:"success",message:`Tab ${e} deleted`})}))},openArchive(){this.$refs.arciveFileInput.click()},async onFileArchivePicked(e){const t=e.target.files;this.projectData={},await $(t[0],this.projectData)},openJson(){this.$refs.jsonFileInput.click()},async onFileJsonPicked(e){const t=e.target.files;this.projectData={},self=this;var n=new FileReader;n.onload=function(){self.projectData=JSON.parse(n.result)},n.readAsText(t[0])},saveAsJson(){const e=JSON.stringify(this.projectData),t=new Blob([e],{type:"text/plain"}),n=JSON.stringify(new Date);this.downloadBlob(t,`bq${n}.json`)},saveAsZip(){this.projectData?function(o){var l=new e;for(const[e,n]of Object.entries(o)){n.events&&l.file(`${e}/events.yml`,t.dump(n.events)),n.conditions&&l.file(`${e}/conditions.yml`,t.dump(n.conditions)),n.objectives&&l.file(`${e}/objectives.yml`,t.dump(n.objectives)),n.items&&l.file(`${e}/items.yml`,t.dump(n.items)),n.main&&l.file(`${e}/main.yml`,t.dump(n.main)),n.journal&&l.file(`${e}/journal.yml`,t.dump(n.journal)),n.custom&&l.file(`${e}/custom.yml`,t.dump(n.custom));for(const o of V)if(n[o])for(const[a,s]of Object.entries(n[o]))l.file(`${e}/${o}/${a}.yml`,t.dump(s))}l.generateAsync({type:"blob"}).then((function(e){const t=`bq${JSON.stringify(new Date)}.zip`;n.exports.saveAs(e,t)}),(function(e){console.log(`Error with zip save: ${e}`)}))}(this.projectData):this.$message({dangerouslyUseHTMLString:!0,message:this.$t("data-is-empty"),type:"info"})},downloadBlob(e,t){const n=document.createEvent("MouseEvents"),o=document.createElement("a");o.download=t,o.href=window.URL.createObjectURL(e),o.dataset.downloadurl=["text/json",o.download,o.href].join(":"),n.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(n)},openLocalStorage(e){const t=JSON.parse(localStorage.getItem(`projects_${e}`));t?(this.projectData=t,this.$message({dangerouslyUseHTMLString:!0,message:`Project loaded from <b>${e}</b> slot`,type:"success"})):this.$message({message:`Project slot ${e} emty`,type:"info"})},saveLocalStorage(e){localStorage.setItem(`projects_${e}`,JSON.stringify(this.projectData)),this.$message({dangerouslyUseHTMLString:!0,message:`Project saved to <b>${e}</b> slot`,type:"success"})}}},$e={class:"el-container is-vertical"},Ve={class:"el-header header-section"},we=i("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),xe=i("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),ke={class:"right-header"},je={class:"el-dropdown-link"},qe=i("br",null,null,-1),Se=i("br",null,null,-1),Te=i("br",null,null,-1),Ne=i("br",null,null,-1),Ce={class:"dialog-footer"},Ie={class:"dialog-footer"};be.render=function(e,t,n,o,g,h){const f=l("el-button"),v=l("el-dropdown-item"),y=l("el-dropdown-menu"),b=l("el-dropdown"),$=l("el-link"),V=l("el-alert"),w=l("el-input"),x=l("el-checkbox"),k=l("el-dialog"),j=l("questSection"),q=l("el-tab-pane"),S=l("el-tabs");return a(),s("section",$e,[i("input",{type:"file",style:{display:"none"},ref:"arciveFileInput",accept:".zip,",onChange:t[1]||(t[1]=(...e)=>h.onFileArchivePicked&&h.onFileArchivePicked(...e))},null,544),i("input",{type:"file",style:{display:"none"},ref:"jsonFileInput",accept:".json,",onChange:t[2]||(t[2]=(...e)=>h.onFileJsonPicked&&h.onFileJsonPicked(...e))},null,544),i("header",Ve,[i(b,{size:"small"},{dropdown:d((()=>[i(y,null,{default:d((()=>[i(v,{onClick:h.openArchive},{default:d((()=>[r(m(e.$t("open-zip")),1)])),_:1},8,["onClick"]),i(v,{onClick:h.openJson},{default:d((()=>[r(m(e.$t("open-json")),1)])),_:1},8,["onClick"]),(a(),s(c,null,u(5,(t=>i(v,{onClick:e=>h.openLocalStorage(t),key:t,divided:1===t},{default:d((()=>[r(m(e.$t("open-slot"))+" "+m(t),1)])),_:2},1032,["onClick","divided"]))),64))])),_:1})])),default:d((()=>[i(f,{size:"mini",class:"header-buttons",icon:"el-icon-folder-opened"},{default:d((()=>[r(m(e.$t("open")),1),we])),_:1})])),_:1}),i(b,{size:"small"},{dropdown:d((()=>[i(y,null,{default:d((()=>[i(v,{onClick:h.saveAsZip},{default:d((()=>[r(m(e.$t("save-zip")),1)])),_:1},8,["onClick"]),i(v,{onClick:h.saveAsJson},{default:d((()=>[r(m(e.$t("save-json")),1)])),_:1},8,["onClick"]),(a(),s(c,null,u(5,(t=>i(v,{onClick:e=>h.saveLocalStorage(t),key:t,divided:1===t},{default:d((()=>[r(m(e.$t("save-slot"))+" "+m(t),1)])),_:2},1032,["onClick","divided"]))),64))])),_:1})])),default:d((()=>[i(f,{size:"mini",class:"header-buttons",icon:"el-icon-takeaway-box"},{default:d((()=>[r(m(e.$t("save")),1),xe])),_:1})])),_:1}),i(f,{size:"mini",onClick:h.openNewTabDialog,class:"header-buttons",icon:"el-icon-folder-add"},{default:d((()=>[r(m(e.$t("new-section")),1)])),_:1},8,["onClick"]),i($,{type:"primary",target:"_blank",rel:"noopener noreferrer",href:"https://docs.betonquest.org/",class:"header-buttons"},{default:d((()=>[r(m(e.$t("bq-doc")),1)])),_:1}),i($,{type:"primary",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/BetonQuest/RPGMenu/wiki/",class:"header-buttons"},{default:d((()=>[r(m(e.$t("rpgmenu-doc")),1)])),_:1}),i("div",ke,[i(b,null,{dropdown:d((()=>[i(y,null,{default:d((()=>[(a(!0),s(c,null,u(g.avaliableLanguages,((e,t)=>(a(),s(v,{class:"lang-option",onClick:e=>h.changeLang(t)},{default:d((()=>[(a(),s(_(e),{class:"lang-icon"}))])),_:2},1032,["onClick"])))),256))])),_:1})])),default:d((()=>[i("span",je,[(a(),s(_(g.avaliableLanguages[g.settings.language]),{class:"lang-icon"}))])])),_:1})])]),i(k,{title:e.$t("create-section"),modelValue:g.dialogAddSectionVisible,"onUpdate:modelValue":t[7]||(t[7]=e=>g.dialogAddSectionVisible=e),width:"30%","custom-class":"dialog create-section"},{footer:d((()=>[i("span",Ce,[i(f,{onClick:t[6]||(t[6]=e=>g.dialogAddSectionVisible=!1)},{default:d((()=>[r(m(e.$t("cancel")),1)])),_:1}),i(f,{type:"primary",onClick:h.addTab},{default:d((()=>[r(m(e.$t("create")),1)])),_:1},8,["onClick"])])])),default:d((()=>[g.newTabNameError?(a(),s(V,{key:0,title:g.newTabNameError,type:"error"},null,8,["title"])):p("",!0),i("span",null,m(e.$t("quest-name")),1),i(w,{modelValue:g.newTabName,"onUpdate:modelValue":t[3]||(t[3]=e=>g.newTabName=e)},null,8,["modelValue"]),qe,Se,i(x,{modelValue:g.inclideDialogExample,"onUpdate:modelValue":t[4]||(t[4]=e=>g.inclideDialogExample=e)},{default:d((()=>[r(m(e.$t("quest-example")),1)])),_:1},8,["modelValue"]),Te,i(x,{modelValue:g.inclideMenuExample,"onUpdate:modelValue":t[5]||(t[5]=e=>g.inclideMenuExample=e)},{default:d((()=>[r(m(e.$t("menu-example")),1)])),_:1},8,["modelValue"]),Ne])),_:1},8,["title","modelValue"]),i(k,{title:e.$t("settings"),modelValue:g.openSettingsVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>g.openSettingsVisible=e),width:"30%","custom-class":"dialog setting-dialog"},{footer:d((()=>[i("span",Ie,[i(f,{type:"primary",onClick:h.closeAndSaveSettings},{default:d((()=>[r(m(e.$t("save")),1)])),_:1},8,["onClick"])])])),default:d((()=>[r(m(e.$t("language"))+": ",1)])),_:1},8,["title","modelValue"]),i(S,{modelValue:g.sectionSelected,"onUpdate:modelValue":t[9]||(t[9]=e=>g.sectionSelected=e),type:"border-card",closable:"",onTabRemove:h.removeTab},{default:d((()=>[(a(!0),s(c,null,u(g.projectData,((e,t)=>(a(),s(q,{key:t,label:t,name:t},{default:d((()=>[i(j,{modelValue:g.projectData[t],"onUpdate:modelValue":e=>g.projectData[t]=e,"project-data":g.projectData},null,8,["modelValue","onUpdate:modelValue","project-data"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue","onTabRemove"])])};const De=h({locale:"ru",messages:{en:t.load("open: Open\nopen-zip: Open Project zip\nopen-json: Open Project json\nopen-slot: Open Project from local slot\nsave-json: Export as json\nsave: Save\nsave-slot: Save Project to local slot\nnew-section: New section\nsettings: Settings\nbq-doc: BetonQuest documentation\nrpgmenu-doc: RPGMenu documentation\nquest-name: Provide quest section name\nquest-example: Include dialog example\nmenu-example: Include menu example\ncancel: Cancel\ncreate: Create\nlanguage: Language\nerror-title-name-empty: Section title cannot be empty\ncreate-section: Create section\nadd-dialog-section: Add dialog section\ndialogs: Dialogs\nadd-menu: Add menu\nmenus: Menu\nevents: Events\nconditions: Conditions\nobjectives: Objectives\nitems: Items\nmain: Main\njournal: Journal\ncustom: Custom\ncreate-subsection: Create section\ndialog-section-name: Enter section name\nprovide-name: Provide name\nempty-title: Title cannot be empty\ndelete-section: Delete section {tab}?\nconfirm: Confirm\ndelete: Delete\ntab-deleted: Tab <b>{tab}</b> deleted\ndialog-exists: Dialog {newName} already exisis\ndialog-section-created: Dialog section <b>{newName}</b> created\nmenu-section-exists: Menu {newName} already exisis\nmenu-section-created: Menu section <b>{newName}</b> created\nyaml-editor: Yaml editor\nadd-dialog: Add dialog option\nsave-and-return: Save and return visual editor\nenter-dialog-name: Provide dialog name\ndialog-window-title: New dialog\ndialog-exists-regex: Already exists or bad name (use only a-z A-Z 0-9 and _)\ndialog-created: Dialog <b>{value}</b> created\ndialog-renamed: Dialog <b>{dialogKey}</b> renamed to <b>{newKey}</b>\ndialog-deleted: Dialog <b>{dialogKey}</b> deleted\nNPC_options: NPC options\nplayer_options: Player options\nno-options: No options found\nno-results: No results found\ndelete-section-key: Delete {dialogKey} from {section}?\ndelete-key: Delete {key}?\nnew-setting: New setting\nquester-name: Quester name\nnew-setting-key: Enter new setting key\nsave-zip: Export as zip\ndata-is-empty: Data is empty\n"),ru:t.load("open: Открыть\nopen-zip: Открыть zip\nopen-json: Открыть json\nopen-slot: Открыть сохранённый слот\nsave-json: Экспорт в json\nsave: Сохранить\nsave-slot: Сохранить в слот\nnew-section: Новый раздел\nsettings: Настройки\nbq-doc: Документация BetonQuest\nrpgmenu-doc: Документация RPGMenu\nquest-name: Введите название раздела квестов\nquest-example: Добавить пример квеста?\nmenu-example: Добавить пример меню?\ncancel: Отмена\ncreate: Создать\nlanguage: Язык\nerror-title-name-empty: Заголовок раздела не может быть пустым\ncreate-section: Создание раздела\nadd-dialog-section: Добавить раздел диалога\ndialogs: Диалоги\nadd-menu: Добавить меню\nmenus: Меню\nevents: События\nobjectives: Задания\nconditions: Условия\nitems: Предметы\nmain: Главное\njournal: Журнал\ncustom: Разное\ncreate-subsection: Создание раздела\ndialog-section-name: Введите название раздела\nprovide-name: Введите название\nempty-title: Заголовок не может быть пустым\ndelete-section: Удалить раздел {tab}?\nconfirm: Подтвердить\ndelete: Удалить\ntab-deleted: Раздел <b>{tab}</b> удалён\ndialog-exists: Диалог {newName} уже существует\ndialog-section-created: Раздел диалогов <b>{newName}</b> создан\nmenu-section-exists: Меню {newName} уже существует\nmenu-section-created: Раздел меню <b>{newName}</b> создан\nyaml-editor: Yaml редактор\nadd-dialog: Добавить вариант диалога\nsave-and-return: Сохранить и вернуться в визуальный редактор\nenter-dialog-name: Введите название диалога\ndialog-window-title: Новый диалог\ndialog-exists-regex: Диалог уже существует или не ошибка в названии (используйте a-z A-Z 0-9 и _)\ndialog-created: Диалог <b>{value}</b> создан\ndialog-renamed: Диалог <b>{dialogKey}</b> периименован <b>{newKey}</b>\ndialog-deleted: Диалог <b>{dialogKey}</b> удалён\nNPC_options: Варианты ответов NPC\nplayer_options: Варианты от игрока\nno-options: Нет вариантов\nno-results: Не найдено вариантов\ndelete-section-key: Удалить {dialogKey} из раздела {section}?\ndelete-key: Удалить {key}?\nnew-setting: Добавить запись\nquester-name: Имя квестодателя\nnew-setting-key: Введите название\nsave-zip: Экспорт в zip архив\ndata-is-empty: Нет данных для сохранения\n")}}),ze=v(be);ze.use(y),ze.use(De),ze.mount("#app");
