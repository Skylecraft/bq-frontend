import{J as e,j as t,F as n,E as a,r as o,o as l,c as s,a as i,w as d,b as m,d as u,t as c,e as r,f as p,s as _,g,h,i as v,k as y,l as b}from"./vendor.e133924a.js";const q=["conversations","menus"];function $(n,a){e.loadAsync(n).then((function(e){e.forEach((function(e,n){n.dir||n.async("text").then((function(e){let o=function(e,n){const a=e.split("/");let o={section:a[0],fileType:a[1].replace(".yml",""),data:{}};if(q.indexOf(o.fileType)>=0&&(o.subsection=a[2].replace(".yml","")),n)try{const e=t.load(n);o.data=e}catch(l){console.error(`Section "${e}" error: ${l}`)}return o}(n.name,e);a[o.section]||(a[o.section]={}),q.indexOf(o.fileType)>=0?(a[o.section][o.fileType]||(a[o.section][o.fileType]={}),a[o.section][o.fileType][o.subsection]=o.data):a[o.section][o.fileType]=o.data}))}))}),(function(e){console.error(`Error reading ${f.name}: ${e.message}`)}))}const V=["conversations","menus"];const N={components:{Multiselect:a},props:["modelValue","placeholder","type","sectionInfo","dialogType","max"],data:()=>({selectedTags:null,options:[],optionsLoaded:!1}),mounted(){this.modelValue&&(this.selectedTags=this.modelValue.split(",").map((e=>({value:e.trim(),label:e.trim()}))))},created(){void 0===this.sectionInfo&&console.error(`sectionInfo in tagComplete is undefined; type: ${this.type}`)},methods:{openTags(){this.updateOptions()},tagsChange(e){this.$emit("update:modelValue",e.map((e=>e.value)).join(","))},async getChoicesUpdate(e){return this.options},updateOptions(){if(!this.optionsLoaded)if(this.optionsLoaded=!0,"conditions"===this.type){if(!this.sectionInfo.conditions)return void(this.sectionInfo.conditions={});for(const[e,t]of Object.entries(this.sectionInfo.conditions))this.options.push({value:e,label:e})}else if("events"===this.type){if(!this.sectionInfo.events)return void(this.sectionInfo.events={});for(const[e,t]of Object.entries(this.sectionInfo.events))this.options.push({value:e,label:e})}else if("pointers"===this.type){if(!this.sectionInfo.conversations)return void(this.sectionInfo.conversations={NPC_options:{},player_options:{}});if(this.sectionInfo.conversations)for(const[e,t]of Object.entries(this.sectionInfo.conversations))if("NPC_options"===this.dialogType)for(const[n,a]of Object.entries(t.player_options))this.options.push({value:n,label:n});else if("player_options"===this.dialogType)for(const[n,a]of Object.entries(t.NPC_options))this.options.push({value:n,label:n})}}}};N.render=function(e,t,n,a,i,d){const m=o("Multiselect");return l(),s(m,{class:"autocomplete",modelValue:i.selectedTags,"onUpdate:modelValue":t[1]||(t[1]=e=>i.selectedTags=e),mode:"tags",searchable:!0,createTag:!0,minChars:1,resolveOnLoad:!0,appendNewTag:!0,object:!0,options:async function(e){return await d.getChoicesUpdate(e)},placeholder:n.placeholder,max:n.max||-1,canClear:!1,openDirection:"top",onChange:d.tagsChange,onOpen:d.openTags,ref:"multiselect",noOptionsText:e.$t("no-options"),noResultsText:e.$t("no-results")},null,8,["modelValue","options","placeholder","max","onChange","onOpen","noOptionsText","noResultsText"])};const w={props:["modelValue","spanLeft","spanRight","maxRows"],data:()=>({}),computed:{localValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},created(){if("string"==typeof this.localValue){const e={};e[this.$root.settings.language]=this.localValue,this.localValue=e}},methods:{delLang(e){this.$confirm(this.$t("delete-language").replace("{language}",e),this.$t("delete"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((()=>{delete this.localValue[e]}))}}};w.render=function(e,t,n,a,p,_){const g=o("el-tag"),f=o("el-col"),h=o("el-input"),v=o("el-row");return l(!0),s(r,null,i(_.localValue,((e,t)=>(l(),s(v,{class:"dialog-setting-section section-lang"},{default:d((()=>[m(f,{span:n.spanLeft||1},{default:d((()=>[m(g,{type:"info",class:"setting-header lang-delete",onClick:e=>_.delLang(t)},{default:d((()=>[u(c(t),1)])),_:2},1032,["onClick"])])),_:2},1032,["span"]),m(f,{span:n.spanRight||23},{default:d((()=>[m(h,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:n.maxRows||20},modelValue:_.localValue[t],"onUpdate:modelValue":e=>_.localValue[t]=e},null,8,["autosize","modelValue","onUpdate:modelValue"])])),_:2},1032,["span"])])),_:2},1024)))),256)};const x={emits:["newLang"],data:()=>({newLang:""}),methods:{addLang(){2===this.newLang.length&&(this.$emit("newLang",this.newLang.toLowerCase()),this.newLang="",this.$refs.languagePopover.hide())}}},j=m("i",{class:"el-icon-plus"},null,-1),k=m("i",{class:"el-icon-s-flag el-input__icon"},null,-1);x.render=function(e,t,n,a,i,r){const p=o("el-tag"),_=o("el-input"),g=o("el-button"),f=o("el-popover");return l(),s(f,{placement:"bottom",title:e.$t("add-language"),trigger:"click","popper-class":"language-popover",ref:"languagePopover","show-after":0,"hide-after":0},{reference:d((()=>[m(p,{type:"info",class:"setting-header"},{default:d((()=>[j])),_:1})])),default:d((()=>[m(_,{modelValue:i.newLang,"onUpdate:modelValue":t[1]||(t[1]=e=>i.newLang=e),maxlength:2,minlength:2,size:"mini",class:"lang-input"},{prefix:d((()=>[k])),_:1},8,["modelValue"]),m(g,{type:"primary",size:"mini",onClick:r.addLang},{default:d((()=>[u(c(e.$t("add")),1)])),_:1},8,["onClick"])])),_:1},8,["title"])};const D={components:{tagComplete:N,langField:w,langHeader:x},props:["modelValue","dialogType","subSectionName","dialogName","projectData","dialogSectionName","dialogSectionInfo"],data:()=>({}),created(){void 0!==this.dialogInfo?(this.dialogInfo.event&&(this.dialogInfo.events=this.dialogInfo.event,delete this.dialogInfo.event),this.dialogInfo.condition&&(this.dialogInfo.conditions=this.dialogInfo.condition,delete this.dialogInfo.condition),this.dialogInfo.pointer&&(this.dialogInfo.pointers=this.dialogInfo.pointer,delete this.dialogInfo.pointer)):console.error(`dialogInfo is undefined in dialogOption; dialogType: ${this.dialogType} dialogName: ${this.dialogName}`)},computed:{dialogInfo:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{renameDialog(){this.$prompt(this.$t("enter-new-name"),this.$t("rename"),{confirmButtonText:"Rename",cancelButtonText:"Cancel",inputPattern:/^[a-zA-Z0-9_]+$/,inputErrorMessage:this.$t("exists-regex"),inputValidator:e=>!this.dialogSectionInfo[this.dialogType][e],inputValue:this.dialogName}).then((({value:e})=>{this.$emit("rename",this.dialogName,this.dialogType,e)}))},deleteDialog(){this.$confirm(this.$t("delete-section-key").replace("{name}",this.dialogName).replace("{from}",this.dialogSectionName),this.$t("delete"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((()=>{this.$emit("delete",this.dialogType,this.dialogName)}))},newLang(e){this.dialogInfo.text||(this.dialogInfo.text={}),this.dialogInfo.text[e]=""}}},S={class:"dialog-header"},T=m("i",{class:"el-icon-edit"},null,-1),C=m("i",{class:"el-icon-delete"},null,-1);D.render=function(e,t,n,a,i,u){const r=o("el-tag"),p=o("langHeader"),_=o("langField"),g=o("el-col"),f=o("el-row"),h=o("tagComplete"),v=o("el-card");return l(),s(v,{class:"dialog-card"},{header:d((()=>[m("div",S,c(n.dialogName),1),m(r,{type:"info",class:"setting-header",onClick:t[1]||(t[1]=e=>u.renameDialog())},{default:d((()=>[T])),_:1}),m(r,{type:"info",class:"setting-header",onClick:t[2]||(t[2]=e=>u.deleteDialog())},{default:d((()=>[C])),_:1}),m(p,{onNewLang:u.newLang},null,8,["onNewLang"])])),default:d((()=>[m(f,{class:"dialog-setting-section section-lang"},{default:d((()=>[m(g,{span:24},{default:d((()=>[m(_,{ref:"dialogLangs",modelValue:u.dialogInfo.text,"onUpdate:modelValue":t[3]||(t[3]=e=>u.dialogInfo.text=e),"max-rows":10},null,8,["modelValue"])])),_:1})])),_:1}),m(f,{class:"dialog-setting-section section-conditions"},{default:d((()=>[m(g,{span:24},{default:d((()=>[m(h,{type:"conditions",modelValue:u.dialogInfo.conditions,"onUpdate:modelValue":t[4]||(t[4]=e=>u.dialogInfo.conditions=e),"section-info":n.projectData[n.subSectionName],"dialog-type":n.dialogType,placeholder:e.$t("conditions")},null,8,["modelValue","section-info","dialog-type","placeholder"])])),_:1})])),_:1}),m(f,{class:"dialog-setting-section section-event"},{default:d((()=>[m(g,{span:24},{default:d((()=>[m(h,{type:"events",modelValue:u.dialogInfo.events,"onUpdate:modelValue":t[5]||(t[5]=e=>u.dialogInfo.events=e),"section-info":n.projectData[n.subSectionName],"dialog-type":n.dialogType,placeholder:e.$t("events")},null,8,["modelValue","section-info","dialog-type","placeholder"])])),_:1})])),_:1}),m(f,{class:"dialog-setting-section section-pointers"},{default:d((()=>[m(g,{span:24},{default:d((()=>[m(h,{type:"pointers",modelValue:u.dialogInfo.pointers,"onUpdate:modelValue":t[6]||(t[6]=e=>u.dialogInfo.pointers=e),"section-info":n.projectData[n.subSectionName],"dialog-type":n.dialogType,placeholder:e.$t("pointers")},null,8,["modelValue","section-info","dialog-type","placeholder"])])),_:1})])),_:1})])),_:1})};const I={props:["initData"],data:()=>({}),computed:{questData:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{}},P={class:"diagram-editor"};I.render=function(e,t,n,a,o,i){return l(),s("div",P)};const U={components:{dialogOption:D,diagramEdit:I,langField:w,langHeader:x,tagComplete:N},props:["modelValue","projectData","dialogSectionName","subSectionName"],data:()=>({editMode:null,yamlText:null,diagramData:null}),computed:{dialogSectionInfo:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{changeToDiagram(){this.editMode="diagram"},changeToYaml(){this.yamlText=t.dump(this.dialogSectionInfo,{lineWidth:-1}),this.editMode="yaml"},changeToEditor(){this.dialogSectionInfo=t.load(this.yamlText),this.yamlText=null,this.editMode=null},addDialogOption(){this.$prompt(this.$t("enter-dialog-name"),this.$t("dialog-window-title"),{confirmButtonText:this.$t("create"),cancelButtonText:this.$t("cancel"),inputPattern:/^[a-z0-9_]+$/,inputErrorMessage:this.$t("exists-regex"),inputValidator:e=>!this.dialogSectionInfo[this.dialogSectionName][e],closeOnClickModal:!1}).then((({value:e})=>{const t={text:{}};t.text[this.$root.settings.language]="",this.dialogSectionInfo[this.dialogSectionName][e]=t,this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-created").replace("{value}",e)})}))},renameDialog(e,t,n){this.dialogSectionInfo[t][n]=this.dialogSectionInfo[t][e],delete this.dialogSectionInfo[t][e],this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-renamed").replace("{old}",e).replace("{new}",n)})},deleteDialog(e,t){delete this.dialogSectionInfo[e][t],this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-deleted").replace("{dialogKey}",t)})},newQuesterNameLang(e){this.dialogSectionInfo.quester||(this.dialogSectionInfo.quester={}),this.dialogSectionInfo.quester[e]=""}}},z={key:0,class:"view-editor-section dialog-section"},L={class:"menu-buttons"},O={class:"conversation-settings-sction"},R={class:"conversation-setting-title"},E=m("div",{class:"conversation-settings-separator"},null,-1),M={class:"conversation-settings-sction"},A={class:"conversation-setting-title"},Q={class:"conversation-settings-sction"},F={class:"conversation-setting-title"},B=m("br",null,null,-1),H={class:"dialog-options-section"},K={class:"menu-buttons"},J={class:"dialog-title"},Y={key:1,class:"yaml-editor-section"},Z={class:"menu-buttons"},G={key:2,class:"yaml-editor-section"};U.render=function(e,t,n,a,_,g){const f=o("el-button"),h=o("langHeader"),v=o("langField"),y=o("tagComplete"),b=o("el-checkbox"),q=o("el-card"),$=o("dialogOption"),V=o("el-space"),N=o("el-input"),w=o("diagramEdit");return _.editMode?"yaml"===_.editMode?(l(),s("div",Y,[m("div",Z,[m(f,{size:"mini",onClick:g.changeToEditor,class:"menu-button"},{default:d((()=>[u(c(e.$t("save-and-return")),1)])),_:1},8,["onClick"])]),m(N,{class:"yaml-editor",type:"textarea",autosize:{minRows:20,maxRows:60},modelValue:_.yamlText,"onUpdate:modelValue":t[5]||(t[5]=e=>_.yamlText=e)},null,8,["modelValue"])])):"diagram"===_.editMode?(l(),s("div",G,[m(w,{"init-data":n.modelValue},null,8,["init-data"])])):p("",!0):(l(),s("div",z,[m("div",L,[m(f,{size:"mini",onClick:g.changeToYaml,class:"menu-button"},{default:d((()=>[u(c(e.$t("yaml-editor")),1)])),_:1},8,["onClick"]),m(f,{size:"mini",onClick:g.changeToDiagram,class:"menu-button"},{default:d((()=>[u(c(e.$t("diagram-editor")),1)])),_:1},8,["onClick"])]),m(q,{class:"conversation-settings"},{default:d((()=>[m("div",O,[m("div",R,c(e.$t("quester-name"))+":",1),m(h,{onNewLang:g.newQuesterNameLang},null,8,["onNewLang"]),m(v,{modelValue:g.dialogSectionInfo.quester,"onUpdate:modelValue":t[1]||(t[1]=e=>g.dialogSectionInfo.quester=e),"span-left":8,"span-right":20},null,8,["modelValue"])]),E,m("div",M,[m("div",A,c(e.$t("first-option"))+":",1),m(y,{modelValue:g.dialogSectionInfo.first,"onUpdate:modelValue":t[2]||(t[2]=e=>g.dialogSectionInfo.first=e),type:"pointers",dialogType:"player_options","section-info":n.projectData[n.subSectionName],placeholder:e.$t("select-option"),max:1},null,8,["modelValue","section-info","placeholder"])]),m("div",Q,[m("div",F,c(e.$t("stop-option"))+":",1),m(b,{modelValue:g.dialogSectionInfo.stop,"onUpdate:modelValue":t[3]||(t[3]=e=>g.dialogSectionInfo.stop=e)},null,8,["modelValue"]),B])])),_:1}),(l(),s(r,null,i(["NPC_options","player_options"],(a=>m("div",H,[m("div",K,[m("div",J,c(e.$t(a)),1),m(f,{size:"mini",onClick:t[4]||(t[4]=e=>g.addDialogOption()),class:"menu-button",type:"success",plain:"",icon:"el-icon-chat-line-round"},{default:d((()=>[u(c(e.$t("add-dialog")),1)])),_:1})]),m(V,{wrap:"",class:"dialogs-section"},{default:d((()=>[(l(!0),s(r,null,i(g.dialogSectionInfo[a],((e,t)=>(l(),s($,{key:a,modelValue:g.dialogSectionInfo[a][t],"onUpdate:modelValue":e=>g.dialogSectionInfo[a][t]=e,"dialog-name":t,"dialog-type":a,"project-data":n.projectData,"dialog-section-name":n.dialogSectionName,"dialog-section-info":g.dialogSectionInfo,"sub-section-name":n.subSectionName,onDelete:g.deleteDialog,onRename:g.renameDialog},null,8,["modelValue","onUpdate:modelValue","dialog-name","dialog-type","project-data","dialog-section-name","dialog-section-info","sub-section-name","onDelete","onRename"])))),128))])),_:2},1024)]))),64))]))};const W={props:["modelValue","valueKey","activeKey"],data:()=>({}),computed:{localValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},localActiveKey:{get(){return this.activeKey},set(e){this.$emit("update:activeKey",e)}}},methods:{deleteSetting(e){this.$confirm(this.$t("delete-key").replace("{key}",e),this.$t("delete"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((()=>{this.$emit("delete",e)}))}}},X={class:"setting-section el-row"},ee=m("i",{class:"el-icon-delete"},null,-1),te={key:1,class:"field-editor"};W.render=function(e,t,n,a,i,r){const p=o("el-tag"),_=o("el-input");return l(),s("div",X,[m(p,{type:"info",class:"setting-header delete-button",onClick:t[1]||(t[1]=e=>r.deleteSetting(n.valueKey))},{default:d((()=>[ee])),_:1}),m(p,{type:"info",class:"setting-header el-col el-col-4"},{default:d((()=>[u(c(n.valueKey),1)])),_:1}),r.localActiveKey!==n.valueKey?(l(),s("div",{key:0,class:"setting-value el-col-18",onClick:t[2]||(t[2]=e=>r.localActiveKey=n.valueKey)},c(r.localValue),1)):(l(),s("div",te,[m(_,{modelValue:r.localValue,"onUpdate:modelValue":t[3]||(t[3]=e=>r.localValue=e)},null,8,["modelValue"])]))])};const ne={components:{simpleField:W},props:["modelValue"],data:()=>({yamlEdit:!1,yamlText:null,activeKey:""}),computed:{localValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{changeToYaml(){this.yamlText=t.dump(this.localValue,{lineWidth:-1}),this.yamlEdit=!0},changeToEditor(){this.localValue=t.load(this.yamlText),this.yamlText=null,this.yamlEdit=!1},deleteSetting(e){delete this.localValue[e]},newSetting(){this.$prompt(this.$t("new-setting-key"),this.$t("create"),{confirmButtonText:this.$t("create"),cancelButtonText:this.$t("cancel"),inputPattern:/^[a-z0-9_]+$/,inputErrorMessage:this.$t("exists-regex"),inputValidator:e=>!this.localValue[e]}).then((({value:e})=>{this.localValue[e]=""}))}}},ae={key:0,class:"view-editor-section"},oe={class:"menu-buttons"},le={key:1,class:"yaml-editor-section"},se={class:"menu-buttons"};ne.render=function(e,t,n,a,p,_){const g=o("el-button"),f=o("simpleField"),h=o("el-input");return p.yamlEdit?(l(),s("div",le,[m("div",se,[m(g,{size:"mini",onClick:_.changeToEditor,class:"menu-button"},{default:d((()=>[u(c(this.$t("save-and-return")),1)])),_:1},8,["onClick"])]),m(h,{class:"yaml-editor",type:"textarea",autosize:{minRows:20,maxRows:50},modelValue:p.yamlText,"onUpdate:modelValue":t[2]||(t[2]=e=>p.yamlText=e)},null,8,["modelValue"])])):(l(),s("div",ae,[m("div",oe,[m(g,{size:"mini",onClick:_.changeToYaml,class:"menu-button"},{default:d((()=>[u(c(this.$t("yaml-editor")),1)])),_:1},8,["onClick"]),m(g,{size:"mini",onClick:_.newSetting,class:"menu-button",type:"success",icon:"el-icon-plus",plain:""},{default:d((()=>[u(c(e.$t("new-setting")),1)])),_:1},8,["onClick"])]),(l(!0),s(r,null,i(_.localValue,((e,n)=>(l(),s(f,{modelValue:_.localValue[n],"onUpdate:modelValue":e=>_.localValue[n]=e,"value-key":n,activeKey:p.activeKey,"onUpdate:activeKey":t[1]||(t[1]=e=>p.activeKey=e),onDelete:_.deleteSetting},null,8,["modelValue","onUpdate:modelValue","value-key","activeKey","onDelete"])))),256))]))};const ie={props:["modelValue"],data:()=>({}),computed:{localValue:{get(){return t.dump(this.modelValue,{lineWidth:-1})},set(e){this.$emit("update:modelValue",t.load(this.yamlText))}}},methods:{}};ie.render=function(e,t,n,a,i,d){const m=o("el-input");return l(),s(m,{class:"yaml-editor",type:"textarea",autosize:{minRows:20,maxRows:50},modelValue:d.localValue,"onUpdate:modelValue":t[1]||(t[1]=e=>d.localValue=e)},null,8,["modelValue"])};const de={props:["modelValue"],data(){return{templateData:{langSlug:this.$root.settings.language,questName:"example",questReadableName:"Example quest",expReward:"200",moneyReward:"1000",requiedLevel:"10",questPlayerOption1:"$default.quest_prefix$Hi!",questNPCOption1:"Hello, do the quest for the glory of example!",questPlayerOption2:"$default.quest_yes_prefix$Okay, I will.",questNPCOption2:"Go and do it!",questPlayerOption3:"$default.quest_done_prefix$I did what you told",questNPCOption3:"Thank you!",journalStart:"Started.",journalDone:"Done!",mobName:"wz1",mobAmount:"1",compassName:"Target",compassLocation:"100;66;100;world_rpg"},preview:!1,previewText:null,objective:"mmobkill",error:null}},computed:{sectionInfo:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{togglePreview(){this.previewText=this.getFormattedYaml(),this.preview=!0},toggleEdit(){this.previewText=null,this.preview=!1},getFormattedYaml(){let e="conversations:\n  NPC_options:\n    message_{questName}_start:\n      text:\n        {langSlug}: '{questNPCOption1}\\n\\n&6Необходимый уровень {requiedLevel}\\n\\n&2Награда:\\n✦ ${questName}_exp$ опыта\\n■ ${questName}_money$ монет&0---'\n      pointers: option_{questName}_yes, option_no\n    message_{questName}_yes:\n      text: \n        {langSlug}: '{questNPCOption2}'\n      event: event_{questName}_start\n      pointers: option_ok\n    message_{questName}_done:\n      text: \n        {langSlug}: '{questNPCOption3}'\n      event: event_{questName}_paid\n      pointers: option_ok\n\n  player_options:\n    option_{questName}_start:\n      text: \n        {langSlug}: '{questPlayerOption1}'\n      conditions: 'cond_stone_paid,!cond_{questName}_started'\n      pointers: message_{questName}_start\n    option_{questName}_yes:\n      text: \n        {langSlug}: '{questPlayerOption2}'\n      conditions: 'cond_level_{requiedLevel}'\n      pointers: message_{questName}_yes\n    option_{questName}_done:\n      text:\n        {langSlug}: '{questPlayerOption3}'\n      conditions: 'cond_{questName}_done,!cond_{questName}_paid'\n      pointers: message_{questName}_done\n\nevents:\n  event_{questName}_start: folder event_{questName}_s1,event_{questName}_s2,event_{questName}_s3,event_{questName}_s4,event_{questName}_s5\n  event_{questName}_s1: journal add j_{questName}_started\n  event_{questName}_s2: tag add tag_{questName}_started\n  event_{questName}_s3: notify &2Вы начали квест &a${questName}_name$ category:start_quest\n  event_{questName}_s4: compass add compass_{questName}\n  event_{questName}_s5: objective start obj_{questName}\n\n  event_{questName}_done: folder event_{questName}_d_1,event_{questName}_d_2,event_{questName}_d_3\n  event_{questName}_d_1: journal delete j_{questName}_started\n  event_{questName}_d_2: journal add j_{questName}_done\n  event_{questName}_d_3: tag add tag_{questName}_done\n\n  event_{questName}_paid: folder event_{questName}_p1,event_{questName}_p2,event_{questName}_p3,event_{questName}_p4,event_{questName}_p5,event_{questName}_p6,event_{questName}_p7\n  event_{questName}_p1: journal delete j_{questName}_done\n  event_{questName}_p2: tag add tag_{questName}_paid\n  event_{questName}_p3: run ^command mmocore admin exp give %player% main ${questName}_exp$ ^notify &eВы получили &6${questName}_exp$ &eопыта category:reward\n  event_{questName}_p4: money ${questName}_money$ notify\n  event_{questName}_p5: notify &2Вы закончили квест &a${questName}_name$ category:end_quest\n  event_{questName}_p6: take {questName}_item notify\n  event_{questName}_p7: compass del compass_{questName}\n\nconditions:\n  cond_{questName}_icon1: and !cond_{questName}_started\n  cond_{questName}_icon2: and cond_{questName}_started,!cond_{questName}_done\n  cond_{questName}_icon3: and cond_{questName}_done,!cond_{questName}_paid\n\n  cond_{questName}_started: tag tag_{questName}_started\n  cond_{questName}_done: tag tag_{questName}_done\n  cond_{questName}_paid: tag tag_{questName}_paid\n\njournal:\n  j_{questName}_started:\n    {langSlug}: '{journalStart}'\n  j_{questName}_done:\n    {langSlug}: '{journalDone}'\n\nmain:\n  variables:\n    {questName}_name: '{questReadableName}'\n    {questName}_exp: {expReward}\n    {questName}_money: {moneyReward}\n  compass:\n    compass_{questName}:\n      name:\n        ru: {compassName}\n      location: {compassLocation}\n      item: compass_button\n\nobjectives:\n  obj_{questName}: {objective}\n";for(const[t,n]of Object.entries(this.templateData))e=e.replaceAll(`{${t}}`,n||"");return"mmobkill"==this.objective&&(e=e.replaceAll("{objective}",`mmobkill ${this.templateData.mobName} amount:${this.templateData.mobAmount} notify events:event_${this.templateData.questName}_done`)),e},apply(){try{if(this.error=null,!this.templateData.quester)return void(this.error=this.$t("no-quester"));const e=t.load(this.getFormattedYaml());this.sectionInfo.conversations[this.templateData.quester].NPC_options=Object.assign({},this.sectionInfo.conversations[this.templateData.quester].NPC_options,e.conversations.NPC_options),this.sectionInfo.conversations[this.templateData.quester].player_options=Object.assign({},this.sectionInfo.conversations[this.templateData.quester].player_options,e.conversations.player_options),this.sectionInfo.events=Object.assign({},this.sectionInfo.events,e.events),this.sectionInfo.conditions=Object.assign({},this.sectionInfo.conditions,e.conditions),this.sectionInfo.journal=Object.assign({},this.sectionInfo.journal,e.journal),this.sectionInfo.objectives=Object.assign({},this.sectionInfo.objectives,e.objectives),this.sectionInfo.main||(this.sectionInfo.main={variables:{},npcs:{},compass:{}}),this.sectionInfo.main.variables=Object.assign({},this.sectionInfo.main.variables,e.main.variables),this.sectionInfo.main.compass=Object.assign({},this.sectionInfo.main.compass,e.main.compass),this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("template-applyed")}),this.$emit("close")}catch(e){let t=e;"YAMLException"===e.name&&(t=e.message),this.error=t}}}},me={key:0},ue={class:"menu-buttons"},ce=u(" mmobkill "),re=u(" amount:"),pe={class:"right-section"},_e={key:1},ge={class:"menu-buttons"};de.render=function(e,t,n,a,_,g){const f=o("el-button"),h=o("el-alert"),v=o("el-col"),y=o("el-option"),b=o("el-select"),q=o("el-row"),$=o("el-input"),V=o("el-divider"),N=o("el-tab-pane"),w=o("el-tabs");return _.preview?(l(),s("div",_e,[m("div",ge,[m(f,{size:"mini",class:"menu-button",onClick:g.toggleEdit},{default:d((()=>[u(c(e.$t("return-to-edit")),1)])),_:1},8,["onClick"])]),m($,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:50},modelValue:_.previewText,"onUpdate:modelValue":t[20]||(t[20]=e=>_.previewText=e),readonly:!0},null,8,["modelValue"])])):(l(),s("div",me,[m("div",ue,[m(f,{size:"mini",class:"menu-button",onClick:g.togglePreview},{default:d((()=>[u(c(e.$t("preview")),1)])),_:1},8,["onClick"])]),_.error?(l(),s(h,{key:0,title:_.error,class:"template-error",type:"error"},null,8,["title"])):p("",!0),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-select"))+":",1)])),_:1}),m(v,{span:18,class:"field-editor"},{default:d((()=>[m(b,{modelValue:_.templateData.quester,"onUpdate:modelValue":t[1]||(t[1]=e=>_.templateData.quester=e),placeholder:" "},{default:d((()=>[(l(!0),s(r,null,i(g.sectionInfo.conversations,((e,t)=>(l(),s(y,{key:t,label:t,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-name"))+":",1)])),_:1}),m(v,{span:18,class:"field-editor"},{default:d((()=>[m($,{modelValue:_.templateData.questName,"onUpdate:modelValue":t[2]||(t[2]=e=>_.templateData.questName=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-readable-name"))+":",1)])),_:1}),m(v,{span:18,class:"field-editor"},{default:d((()=>[m($,{modelValue:_.templateData.questReadableName,"onUpdate:modelValue":t[3]||(t[3]=e=>_.templateData.questReadableName=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-exp-reward"))+":",1)])),_:1}),m(v,{span:18,class:"field-editor"},{default:d((()=>[m($,{modelValue:_.templateData.expReward,"onUpdate:modelValue":t[4]||(t[4]=e=>_.templateData.expReward=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-money-reward"))+":",1)])),_:1}),m(v,{span:18,class:"field-editor"},{default:d((()=>[m($,{modelValue:_.templateData.moneyReward,"onUpdate:modelValue":t[5]||(t[5]=e=>_.templateData.moneyReward=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-level"))+":",1)])),_:1}),m(v,{span:18,class:"field-editor"},{default:d((()=>[m($,{modelValue:_.templateData.requiedLevel,"onUpdate:modelValue":t[6]||(t[6]=e=>_.templateData.requiedLevel=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(V),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-compass-name"))+":",1)])),_:1}),m(v,{span:18,class:"field-editor"},{default:d((()=>[m($,{modelValue:_.templateData.compassName,"onUpdate:modelValue":t[7]||(t[7]=e=>_.templateData.compassName=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-compass-location"))+":",1)])),_:1}),m(v,{span:18,class:"field-editor"},{default:d((()=>[m($,{modelValue:_.templateData.compassLocation,"onUpdate:modelValue":t[8]||(t[8]=e=>_.templateData.compassLocation=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(V),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-player-option-1"))+":",1)])),_:1}),m(v,{span:18},{default:d((()=>[m($,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:20},modelValue:_.templateData.questPlayerOption1,"onUpdate:modelValue":t[9]||(t[9]=e=>_.templateData.questPlayerOption1=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-NPC-option-1"))+":",1)])),_:1}),m(v,{span:18},{default:d((()=>[m($,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:20},modelValue:_.templateData.questNPCOption1,"onUpdate:modelValue":t[10]||(t[10]=e=>_.templateData.questNPCOption1=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-player-option-2"))+":",1)])),_:1}),m(v,{span:18},{default:d((()=>[m($,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:20},modelValue:_.templateData.questPlayerOption2,"onUpdate:modelValue":t[11]||(t[11]=e=>_.templateData.questPlayerOption2=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-NPC-option-2"))+":",1)])),_:1}),m(v,{span:18},{default:d((()=>[m($,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:20},modelValue:_.templateData.questNPCOption2,"onUpdate:modelValue":t[12]||(t[12]=e=>_.templateData.questNPCOption2=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-player-option-3"))+":",1)])),_:1}),m(v,{span:18},{default:d((()=>[m($,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:20},modelValue:_.templateData.questPlayerOption3,"onUpdate:modelValue":t[13]||(t[13]=e=>_.templateData.questPlayerOption3=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-NPC-option-3"))+":",1)])),_:1}),m(v,{span:18},{default:d((()=>[m($,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:20},modelValue:_.templateData.questNPCOption3,"onUpdate:modelValue":t[14]||(t[14]=e=>_.templateData.questNPCOption3=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(V),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-journal-start"))+":",1)])),_:1}),m(v,{span:18},{default:d((()=>[m($,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:20},modelValue:_.templateData.journalStart,"onUpdate:modelValue":t[15]||(t[15]=e=>_.templateData.journalStart=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(q,{class:"template-setting"},{default:d((()=>[m(v,{span:6,class:"field-name"},{default:d((()=>[u(c(e.$t("template-quest-journal-done"))+":",1)])),_:1}),m(v,{span:18},{default:d((()=>[m($,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:20},modelValue:_.templateData.journalDone,"onUpdate:modelValue":t[16]||(t[16]=e=>_.templateData.journalDone=e)},null,8,["modelValue"])])),_:1})])),_:1}),m(w,{type:"border-card",class:"template-tabs",modelValue:_.objective,"onUpdate:modelValue":t[19]||(t[19]=e=>_.objective=e)},{default:d((()=>[m(N,{label:e.$t("mmobkill"),name:"mmobkill"},{default:d((()=>[ce,m($,{class:"field-editor",style:{width:"200px"},placeholder:e.$t("mmomob-name"),modelValue:_.templateData.mobName,"onUpdate:modelValue":t[17]||(t[17]=e=>_.templateData.mobName=e)},null,8,["placeholder","modelValue"]),re,m($,{class:"field-editor",style:{width:"70px"},placeholder:e.$t("amount"),modelValue:_.templateData.mobAmount,"onUpdate:modelValue":t[18]||(t[18]=e=>_.templateData.mobAmount=e)},null,8,["placeholder","modelValue"]),u(" notify events:event_"+c(_.templateData.questName)+"_done ",1)])),_:1},8,["label"])])),_:1},8,["modelValue"]),m("div",pe,[m(f,{type:"success",onClick:g.apply},{default:d((()=>[u(c(e.$t("apply")),1)])),_:1},8,["onClick"])])]))};const fe={components:{conversation:U,simpleSection:ne,yamlEditor:ie},props:["modelValue","projectData","subSectionName"],data(){return{addVisible:!1,newNameError:null,newName:"",dialogSelected:null,menuSelected:null,newMode:null,sectionSelected:null,templateDialogVisible:!1,templates:[{label:this.$t("template-objective"),template:_(de)}],loadedDialogsections:{}}},computed:{sectionInfo:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{templateOpen(){this.templateDialogVisible=!0},createTemplate(){this.templateDialogVisible=!1},removeDialogSection(e){this.$confirm(this.$t("delete-section").replace("{tab}",e),this.$t("confirm"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((()=>{delete this.projectData[e],this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("tab-deleted").replace("{tab}",e)})}))},addDialoge(){if(this.newName.length<=0)this.newNameError=this.$t("empty-title");else{if(this.sectionInfo.conversations||(this.sectionInfo.conversations={}),"dialog"===this.newMode){if(this.sectionInfo.conversations||(this.sectionInfo.conversations={}),this.sectionInfo.conversations[this.newName])return void(this.newNameError=this.$t("dialog-exists").replace("{newName}",this.newName));this.sectionInfo.conversations[this.newName]={quester:this.newName,NPC_options:{},player_options:{}},this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-section-created").replace("{newName}",this.newName)})}else if("menu"===this.newMode){if(this.sectionInfo.menus||(this.sectionInfo.menus={}),this.sectionInfo.menus[this.newName])return void(this.newNameError=this.$t("menu-section-exists").replace("{newName}",this.newName));this.sectionInfo.menus||(this.sectionInfo.menus={}),this.sectionInfo.menus[this.newName]={},this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("menu-section-created").replace("{newName}",this.newName)})}this.dialogSelected=this.newName,this.newName=null,this.includeExample=!1,this.addVisible=!1,this.newNameError=null,this.newMode=null}},removeDialogSection(e){this.$confirm(this.$t("delete-dialog-section"),this.$t("delete"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((()=>{delete this.sectionInfo.conversations[e],this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-section-deleted").replace("{section}",e)})}))},openNew(e){this.includeExample=!1,this.newMode=e,this.newName="",this.addVisible=!0},closeTemplate(){this.templateDialogVisible=!1},dialogSectionSelect(e,t){this.loadedDialogsections[e.paneName]=!0}}},he={class:"menu-buttons"},ve={class:"dialogs-tabs"},ye={class:"menu-buttons"},be={class:"dialogs-tabs"},qe={class:"dialog-footer"};fe.render=function(e,t,n,a,_,f){const h=o("el-button"),v=o("conversation"),y=o("el-tab-pane"),b=o("el-tabs"),q=o("yamlEditor"),$=o("simpleSection"),V=o("el-alert"),N=o("el-input"),w=o("el-dialog");return l(),s(r,null,[m(b,{"tab-position":"left",modelValue:_.sectionSelected,"onUpdate:modelValue":t[12]||(t[12]=e=>_.sectionSelected=e),class:"section-tabs",onTabRemove:f.removeDialogSection},{default:d((()=>[m(y,{label:e.$t("dialogs")},{default:d((()=>[m("div",he,[m(h,{size:"mini",onClick:t[1]||(t[1]=e=>f.openNew("dialog")),class:"menu-button",icon:"el-icon-plus"},{default:d((()=>[u(c(e.$t("add-dialog-section")),1)])),_:1}),m(h,{size:"mini",onClick:f.templateOpen,class:"menu-button",icon:"el-icon-document-add",type:"primary",plain:""},{default:d((()=>[u(c(e.$t("template-create")),1)])),_:1},8,["onClick"])]),m("div",ve,[m(b,{"tab-position":"left",modelValue:_.dialogSelected,"onUpdate:modelValue":t[2]||(t[2]=e=>_.dialogSelected=e),closable:!0,onTabRemove:f.removeDialogSection,onTabClick:f.dialogSectionSelect},{default:d((()=>[(l(!0),s(r,null,i(f.sectionInfo.conversations,((e,t)=>(l(),s(y,{label:t,name:t,key:t},{default:d((()=>[_.loadedDialogsections[t]?(l(),s(v,{key:0,modelValue:f.sectionInfo.conversations[t],"onUpdate:modelValue":e=>f.sectionInfo.conversations[t]=e,"dialog-section-name":t,"project-data":n.projectData,"sub-section-name":n.subSectionName},null,8,["modelValue","onUpdate:modelValue","dialog-section-name","project-data","sub-section-name"])):p("",!0)])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue","onTabRemove","onTabClick"])])])),_:1},8,["label"]),m(y,{label:e.$t("menus")},{default:d((()=>[m("div",ye,[m(h,{size:"mini",onClick:t[3]||(t[3]=e=>f.openNew("menu")),class:"menu-button"},{default:d((()=>[u(c(e.$t("add-menu")),1)])),_:1})]),m("div",be,[m(b,{"tab-position":"left",modelValue:_.menuSelected,"onUpdate:modelValue":t[4]||(t[4]=e=>_.menuSelected=e)},{default:d((()=>[(l(!0),s(r,null,i(f.sectionInfo.menus,((e,t)=>(l(),s(y,{label:t,name:t,key:t},{default:d((()=>[m(q,{modelValue:f.sectionInfo.menus[t],"onUpdate:modelValue":e=>f.sectionInfo.menus[t]=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])])),_:1},8,["label"]),m(y,{label:e.$t("events")},{default:d((()=>[m($,{modelValue:f.sectionInfo.events,"onUpdate:modelValue":t[5]||(t[5]=e=>f.sectionInfo.events=e)},null,8,["modelValue"])])),_:1},8,["label"]),m(y,{label:e.$t("conditions")},{default:d((()=>[m($,{modelValue:f.sectionInfo.conditions,"onUpdate:modelValue":t[6]||(t[6]=e=>f.sectionInfo.conditions=e)},null,8,["modelValue"])])),_:1},8,["label"]),m(y,{label:e.$t("objectives")},{default:d((()=>[m($,{modelValue:f.sectionInfo.objectives,"onUpdate:modelValue":t[7]||(t[7]=e=>f.sectionInfo.objectives=e)},null,8,["modelValue"])])),_:1},8,["label"]),m(y,{label:e.$t("items")},{default:d((()=>[m($,{modelValue:f.sectionInfo.items,"onUpdate:modelValue":t[8]||(t[8]=e=>f.sectionInfo.items=e)},null,8,["modelValue"])])),_:1},8,["label"]),m(y,{label:e.$t("main")},{default:d((()=>[m(q,{modelValue:f.sectionInfo.main,"onUpdate:modelValue":t[9]||(t[9]=e=>f.sectionInfo.main=e)},null,8,["modelValue"])])),_:1},8,["label"]),m(y,{label:e.$t("journal")},{default:d((()=>[m(q,{modelValue:f.sectionInfo.journal,"onUpdate:modelValue":t[10]||(t[10]=e=>f.sectionInfo.journal=e)},null,8,["modelValue"])])),_:1},8,["label"]),m(y,{label:e.$t("custom")},{default:d((()=>[m(q,{modelValue:f.sectionInfo.custom,"onUpdate:modelValue":t[11]||(t[11]=e=>f.sectionInfo.custom=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["modelValue","onTabRemove"]),m(w,{title:e.$t("create-subsection"),modelValue:_.addVisible,"onUpdate:modelValue":t[15]||(t[15]=e=>_.addVisible=e),width:"30%","custom-class":"create-section-dialog","close-on-click-modal":!1},{footer:d((()=>[m("span",qe,[m(h,{onClick:t[14]||(t[14]=e=>_.addVisible=!1)},{default:d((()=>[u(c(e.$t("cancel")),1)])),_:1}),m(h,{type:"primary",onClick:f.addDialoge},{default:d((()=>[u(c(e.$t("create")),1)])),_:1},8,["onClick"])])])),default:d((()=>[_.newNameError?(l(),s(V,{key:0,title:_.newNameError,type:"error"},null,8,["title"])):p("",!0),m("span",null,c(e.$t("dialog-section-name")),1),m(N,{modelValue:_.newName,"onUpdate:modelValue":t[13]||(t[13]=e=>_.newName=e)},null,8,["modelValue"])])),_:1},8,["title","modelValue"]),m(w,{title:e.$t("template-dialog"),modelValue:_.templateDialogVisible,"onUpdate:modelValue":t[17]||(t[17]=e=>_.templateDialogVisible=e),width:"80%","custom-class":"template-dialog","close-on-click-modal":!1},{default:d((()=>[_.templateDialogVisible?(l(),s(b,{key:0,"tab-position":"left",class:"template-tabs"},{default:d((()=>[(l(!0),s(r,null,i(_.templates,(e=>(l(),s(y,{label:e.label,key:e.label},{default:d((()=>[(l(),s(g(e.template),{modelValue:f.sectionInfo,"onUpdate:modelValue":t[16]||(t[16]=e=>f.sectionInfo=e),onClose:f.closeTemplate},null,8,["modelValue","onClose"]))])),_:2},1032,["label"])))),128))])),_:1})):p("",!0)])),_:1},8,["title","modelValue"])],64)};const $e={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 480"},Ve=m("g",{"fill-rule":"evenodd","stroke-width":"1pt"},[m("path",{fill:"#fff",d:"M0 0h640v480H0z"}),m("path",{fill:"#0039a6",d:"M0 160h640v320H0z"}),m("path",{fill:"#d52b1e",d:"M0 320h640v160H0z"})],-1);function Ne(e,t){return l(),s("svg",$e,[Ve])}const we={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 480"},xe=m("path",{fill:"#012169",d:"M0 0h640v480H0z"},null,-1),je=m("path",{fill:"#FFF",d:"m75 0 244 181L562 0h78v62L400 241l240 178v61h-80L320 301 81 480H0v-60l239-178L0 64V0h75z"},null,-1),ke=m("path",{fill:"#C8102E",d:"m424 281 216 159v40L369 281h55zm-184 20 6 35L54 480H0l240-179zM640 0v3L391 191l2-44L590 0h50zM0 0l239 176h-60L0 42V0z"},null,-1),De=m("path",{fill:"#FFF",d:"M241 0v480h160V0H241zM0 160v160h640V160H0z"},null,-1),Se=m("path",{fill:"#C8102E",d:"M0 193v96h640v-96H0zM273 0v480h96V0h-96z"},null,-1);function Te(e,t){return l(),s("svg",we,[xe,je,ke,De,Se])}const Ce={components:{subSection:fe,ruFlag:Ne,enFlag:Te},data:()=>({projectData:{},sectionSelected:null,dialogAddSectionVisible:!1,newTabName:null,newTabNameError:null,inclideDialogExample:!1,inclideMenuExample:!1,openSettingsVisible:!1,settings:{language:"ru"},avaliableLanguages:{en:Te,ru:Ne}}),created(){this.readSettings();h().setLocale(this.settings.language)},methods:{changeLang(e){this.settings.language=e,this.saveSettings(),document.location.reload()},closeAndSaveSettings(){this.openSettingsVisible=!1,this.saveSettings()},saveSettings(){localStorage.setItem("settings",JSON.stringify(this.settings))},readSettings(){const e=JSON.parse(localStorage.getItem("settings"));e&&(this.settings=e)},addTab(){if(this.newTabName.length<=0)this.newTabNameError=this.$t("error-title-name-empty");else if(!this.projectData[this.newTabName]&&this.newTabName.match(/^[a-z0-9_]+$/)){if(this.projectData[this.newTabName]={},this.inclideDialogExample){const e=t.load("conversations:\n  gregory:\n    quester:\n      en: 'Gregory'\n      ru: 'Грегори'\n    first: message_start\n    stop: 'false' \n\n    NPC_options:\n\n      message_start:\n        text: \n          ru: 'Да?'\n          en: 'Yes?'\n        pointers: option_el_start,option_el_done, option_golem_start,option_golem_done ,option_bye\n\n      # el\n      message_el_start:\n        text: \n          ru: 'Здравствуй путник! Мое имя Грегори, Грегори Д`Вагнер, этот мир я увидел тридцать восемь зим назад. Когда-то давно, я тоже искал приключения, и жил опираясь только на миг настоящего, даже не задумываясь о будущем, считая, что в этом заключается мое счастье, быть свободным словно ветер и смотреть, как по ночному небу робко пробегают первые всполохи рассвета, пробиваясь сквозь сияние звезд. Что-то у меня в горле пересохло.. Я с удовольствием продолжу историю если ты принесёшь бутылочку эля.\\n\\n&6Необходимый уровень 5\\n\\n&2Награда:\\n✦ $mag_training_exp$ опыта\\n✦ $mag_training_money$ монет'\n        pointers: option_el_yes,option_no\n      message_el_yes:\n        text: \n          ru: 'Ты сможешь найти меня тут.'\n        event: event_el_start\n        pointers: option_ok\n      message_el_done:\n        text: 'Хороший эль.. О чем это я, так я считал до того решающего заказа на логово орков, где повстречал ее. Она не просто бегала, она буквально порхала вокруг целой толпы громил, кувыркаясь, приседая и осыпая чудовищ смертельными ударами своего кинжала. С этого задания и началась наша новая жизнь. Она была такая же, свободная и прекрасная, как лепестки сакуры на ветру, неуловима и свежа, словно теплый весенний ветерок в лесу.. Выпей со мной!'\n        event: event_el_paid\n        pointers: option_ok\n\n      # golem\n      message_golem_start:\n        text: \n          ru: 'В какой-то момент ей надоела жизнь на дороге и мы купили себе небольшой дом и мы хотели мирно жить.. Но меня манила свобода, и я, ослепленный ей, снова взял заказ, на пещерного голема. Будь проклят тот день, когда я решился на это.. Моя прекрасная Мэри естественно отправилась со мной, но там было слишком опасно. Она.. умерла прямо на моих глазах, а я ничего не мог сделать и сам еле спасся и был покалечен. Слепой идиот, слишком любивший свободу..'\n        pointers: option_golem_start_1\n      message_golem_start_1:\n        text: \n          ru: 'Так, свобода, о которой я так мечтал, стала для меня вечным пустым и холодным одиночеством.. Выбирай свои ценности правильно, не повторяй моих ошибок.'\n        pointers: option_golem_yes,option_no\n      message_golem_yes:\n        text: \n          ru: 'Если ты уверен, что хочешь этим заняться. Я отдам тебе всю награду.'\n        event: event_golem_start\n        pointers: option_ok\n      message_golem_done:\n        text: \n          ru: 'Невероятно! Вот, возьми всю награду.'\n        pointers: option_golem_paid1,option_golem_paid2\n\n    player_options:\n\n      option_el_start:\n        text: \n          ru: '$quest_prefix$Здравствуй'\n        conditions: '!cond_el_started'\n        pointers: message_el_start\n      option_el_yes:\n        text: \n          ru: '$quest_yes_prefix$Хорошо, я принесу.'\n        pointers: message_el_yes\n      option_el_done:\n        text: \n          ru: '$quest_done_prefix$Вот бутылочка'\n        conditions: 'cond_el_done,!cond_el_paid'\n        pointers: message_el_done\n\n      option_golem_start:\n        text: \n          ru: '$quest_prefix$Так что было дальше?'\n        conditions: '!cond_golem_started,cond_el_paid'\n        pointers: message_golem_start\n      option_golem_start_1:\n        text: \n          ru: '$quest_prefix$Почему?'\n        pointers: message_golem_start_1\n      option_golem_yes:\n        text: \n          ru: '$quest_yes_prefix$Возможно я смогу тебе помочь с заданием?'\n        pointers: message_golem_yes\n      option_golem_done:\n        text: \n          ru: '$quest_done_prefix$Я убил голема!'\n        conditions: 'cond_golem_done,!cond_golem_paid'\n        pointers: message_golem_done\n\n      option_golem_paid1:\n        text: \n          ru: '$quest_done_prefix$Не надо. Тебе эти деньги теперь нужны больше.'\n        event: event_golem_paid_exp\n      option_golem_paid2:\n        text: \n          ru: '$quest_done_prefix$Да, давай. Спасибо!'\n        event: event_golem_paid_money\n\n      option_no:\n        text:\n          ru: '$quest_no_prefix$Мне некогда'\n        pointers: message_start\n\n      option_ok:\n        text:\n          ru: 'Хорошо'\n        pointers: message_start\n\n      option_bye:\n        text:\n          ru: '{oak_door}До встречи'\n\nevents:\n  event_el_start: folder event_el_s2,event_el_s3,event_el_s4\n  event_el_s2: journal add j_el_started\n  event_el_s3: tag add tag_el_started\n  event_el_s4: notify &2Вы начали квест &a$el_name$ category:start_quest\n\n  event_el_done: folder event_el_d1,event_el_d2,event_el_d3,event_el_d4,event_el_d5\n  event_el_d1: journal delete j_el_started\n  event_el_d2: journal add j_el_done\n  event_el_d3: tag add tag_el_done\n  event_el_d4: money -50 notify\n  event_el_d5: give el_item notify\n\n  event_el_paid: folder event_el_p1,event_el_p2,event_el_p3,event_el_p5,event_el_p6\n  event_el_p1: journal delete j_el_done\n  event_el_p2: tag add tag_el_paid\n  event_el_p3: run ^command mmocore admin exp give %player% main $el_exp$ ^notify &eВы получили &6$el_exp$ &eопыта category:reward\n  event_el_p5: notify &2Вы закончили квест &a$el_name$ category:end_quest\n  event_el_p6: take el_item notify\n\n  event_golem_start: folder event_golem_s2,event_golem_s3,event_golem_s4,event_golem_s5,event_golem_s6\n  event_golem_s2: journal add j_golem_started\n  event_golem_s3: tag add tag_golem_started\n  event_golem_s4: notify &2Вы начали квест &a$golem_name$ category:start_quest\n  event_golem_s5: objective start obj_golem\n  event_golem_s6: compass add cave_golem\n\n  event_golem_done: folder event_golem_d1,event_golem_d2,event_golem_d3\n  event_golem_d1: journal delete j_golem_started\n  event_golem_d2: journal add j_golem_done\n  event_golem_d3: tag add tag_golem_done\n\n  event_golem_paid: folder event_golem_p1,event_golem_p2,event_golem_p5,event_golem_p6\n  event_golem_p1: journal delete j_golem_done\n  event_golem_p2: tag add tag_golem_paid\n  event_golem_p5: notify &2Вы закончили квест &a$golem_name$ category:end_quest\n  event_golem_p6: compass del cave_golem\n\n  event_golem_paid_money: folder event_golem_paid,event_golem_pm\n  event_golem_pm: money $golem_money$ notify\n\n  event_golem_paid_exp: folder event_golem_paid,event_golem_pexp\n  event_golem_pexp: run ^command mmocore admin exp give %player% main $golem_exp$ ^notify &eВы получили &6$golem_exp$ &eопыта category:reward\n\njournal:\n  j_el_started:\n    ru: 'Грегори обещал продолжить свой рассказ если я принесу ему бутылочку эля.'\n  j_el_done:\n    ru: 'Я раздобыл эль, я могу отнести его Грегори.'\n\n  j_golem_started:\n    ru: 'Грегори указал на пещеру, мне надо убить там пещерного голема.'\n  j_golem_done:\n    ru: 'Я убил пещерного голема, я могу рассказать об этом Грегори.'\n\nmain:\n  variables:\n    quest_prefix: '{book}&a[Квест]&e '\n    quest_done_prefix: '{enchanted_book}&2[Завершение квеста]&e '\n    quest_yes_prefix: '{book}&a[Принять]&e '\n    quest_no_prefix: '{barrier}&c[Отмена]&e '\n    quest_exit: '{oak_door}&7[Выход]&e '\n    gui_smith: '{anvil}&7[Ковка]&e '\n\n  npcs:\n    '70': gregory\n\n  compass:\n    cave_golem:\n      name:\n        ru: 'Пещерный голем'\n      location: -932;77;-510;world_rpg\n      item: compass_button\n\nobjectives:\n  obj_golem: mmobkill cave_golem amount:1 notify events:event_golem_done\n\ncustom:\n  notifications:\n    start_quest:\n      io: advancement\n      frame: task\n      icon: book\n      sound: entity.experience_orb.pickup\n    get_item:\n      frame: task\n      io: advancement\n      sound: entity.experience_orb.pickup\n    task_done:\n      frame: task\n      io: advancement\n      sound: entity.experience_orb.pickup\n    reward:\n      io: chat\n    chat:\n      io: chat\n\n  npc_holograms:\n    check_interval: 100\n    quest_avalible_gregory:\n      lines:\n        - 'item:default.quest_avalible'\n      vector: '0;3.2;0'\n      npcs:\n        - 70\n      conditions: 'cond_quest_avalible_gregory,!cond_quest_progress_gregory,!cond_quest_done_gregory'\n    quest_progress_gregory:\n      lines:\n        - 'item:default.quest_progress'\n      vector: '0;3.2;0'\n      npcs:\n        - 70\n      conditions: 'cond_quest_progress_gregory,!cond_quest_done_gregory'\n    quest_done_gregory:\n      lines:\n        - 'item:default.quest_done'\n      vector: '0;3.2;0'\n      npcs:\n        - 70\n      conditions: 'cond_quest_done_gregory'\n\nconditions:\n  cond_quest_avalible_gregory: or cond_gregory_el_icon1,cond_gregory_golem_icon1\n  cond_quest_progress_gregory: or cond_gregory_el_icon2,cond_gregory_golem_icon2\n  cond_quest_done_gregory: or cond_gregory_el_icon3,cond_gregory_golem_icon3\n\n  cond_gregory_el_icon1: and !cond_el_started\n  cond_gregory_el_icon2: and cond_el_started,!cond_el_done\n  cond_gregory_el_icon3: and cond_el_done,!cond_el_paid\n\n  cond_gregory_golem_icon1: and !cond_golem_started,cond_el_paid\n  cond_gregory_golem_icon2: and cond_golem_started,!cond_golem_done\n  cond_gregory_golem_icon3: and cond_golem_done,!cond_golem_paid\n\n  cond_el_started: tag tag_el_started\n  cond_el_done: tag tag_el_done\n  cond_el_paid: tag tag_el_paid\n\n  cond_golem_started: tag tag_golem_started\n  cond_golem_done: tag tag_golem_done\n  cond_golem_paid: tag tag_golem_paid\n  cond_50_coins: money 50\n\nitems:\n");this.projectData[this.newTabName].conversations=e.conversations,this.projectData[this.newTabName].conditions=e.conditions,this.projectData[this.newTabName].custom=e.custom,this.projectData[this.newTabName].events=e.events,this.projectData[this.newTabName].items=e.items,this.projectData[this.newTabName].journal=e.journal,this.projectData[this.newTabName].main=e.main,this.projectData[this.newTabName].objectives=e.objectives}if(this.inclideDialogExample=!1,this.inclideMenuExample){const e=t.load("example:\n  height: 3\n  title: '&6&lQuests'\n  bind: menu_quests_open\n  command: '/quests'\n  open_conditions: 'menu_quests_open_permission'\n  items:\n    quest1_active:\n      item: menu_quests_1\n      amount: 1\n      conditions: '!menu_quests_1_tag_completed'\n      text:\n        en:\n          - '&7[Quest] &f&lBone ripper'\n          - '&f&oRipp some skeletons off'\n          - '&f&otheir bones to complete'\n          - '&f&othis quest.'\n          - '&f&o'\n          - '&eLeft click to locate npc'\n          - '&eRight click to cancel quest'\n        de:\n          - '&7[Quest] &f&lKnochenbrecher'\n          - '&f&oBrech den Skeletten alle'\n          - '&f&oKnochen um diese Quest'\n          - '&f&oabzuschließen'\n          - '&f&o'\n          - '&eLinksclick um den NPC zu finden'\n          - '&eRechstclick um die Quest abzubrechen'\n      click:\n        right: menu_quests_1_cancel,menu_quests_1_cancel_msg\n        left: menu_quests_1_compass,menu_quests_1_location_msg\n      close: true\n    quest1_completed:\n      item: menu_quests_1_completed\n      amount: 1\n      conditions: menu_quests_1_tag_completed\n      text:\n        en:\n          - '&2[Quest] &f&lBone ripper'\n          - '&f&oRipp some skeletons off'\n          - '&f&otheir bones to complete'\n          - '&f&othis quest.'\n          - '&f&o'\n          - '&2Quest completed!'\n        de:\n          - '&2[Quest] &f&lKnochenbrecher'\n          - '&f&oBrech den Skeletten alle'\n          - '&f&oKnochen um diese Quest'\n          - '&f&oabzuschließen'\n          - '&f&o'\n          - '&2Quest abgeschlossen!'\n      close: false\n    quest2_active:\n      item: menu_quests_2\n      amount: 1\n      conditions: '!menu_quests_2_tag_completed'\n      text:\n        en:\n          - '&7[Quest] &7&lSorcerer''s apprentice'\n          - '&d&oCollect some ingredients'\n          - '&d&ofor the sorcerer to'\n          - '&d&ocomplete this quest.'\n          - '&d&o'\n          - '&eLeft click to locate npc'\n          - '&eRight click to cancel quest'\n        de:\n          - '&7[Quest] &7&lZauberlehrling'\n          - '&d&oSammel für den Zauberer'\n          - '&d&oeinige Trankzutaten um '\n          - '&d&odiese Quest abzuschließen.'\n          - '&d&o'\n          - '&eLinksclick um den NPC zu finden'\n          - '&eRechstclick um die Quest abzubrechen'\n      click:\n        right: menu_quests_2_cancel,menu_quests_2_cancel_msg\n        left: menu_quests_2_compass,menu_quests_2_location_msg\n      close: true\n    quest2_completed:\n      item: menu_quests_2_completed\n      amount: 1\n      conditions: menu_quests_2_tag_completed\n      text:\n        en:\n          - '&2[Quest] &7&lSorcerer''s apprentice'\n          - '&d&oCollect some ingredients'\n          - '&d&ofor the sorcerer to'\n          - '&d&ocomplete this quest.'\n          - '&d&o'\n          - '&2Quest completed!'\n        de:\n          - '&2[Quest] &7&lZauberlehrling'\n          - '&d&oSammel für den Zauberer'\n          - '&d&oeinige Trankzutaten um '\n          - '&d&odiese Quest abzuschließen.'\n          - '&d&o'\n          - '&2Quest abgeschlossen!'\n      close: false\n    quest3_active:\n      item: menu_quests_3\n      amount: 1\n      conditions: '!menu_quests_3_tag_completed'\n      text:\n        en:\n          - '&7[Quest] &6&lThe lost amulet'\n          - '&4&oFind the lost amulet of'\n          - '&4&oSonequa to complete '\n          - '&4&othis quest.'\n          - '&4&o'\n          - '&eLeft click to locate npc'\n          - '&eRight click to cancel quest'\n        de:\n          - '&7[Quest] &6&lDas verlorene Amulet'\n          - '&4&oFinde das verlorene Amulet'\n          - '&4&ovon Sonequa um diese'\n          - '&4&oQuest abzuschließen.'\n          - '&4&o'\n          - '&eLinksclick um den NPC zu finden'\n          - '&eRechstclick um die Quest abzubrechen'\n      click:\n        right: menu_quests_3_cancel,menu_quests_3_cancel_msg\n        left: menu_quests_3_compass,menu_quests_3_location_msg\n      close: true\n    quest3_completed:\n      item: menu_quests_3_completed\n      amount: 1\n      conditions: menu_quests_3_tag_completed\n      text:\n        en:\n          - '&2[Quest] &6&lThe lost amulet'\n          - '&4&oFind the lost amulet of'\n          - '&4&oSonequa to complete '\n          - '&4&othis quest.'\n          - '&4&o'\n          - '&2Quest completed!'\n        de:\n          - '&2[Quest] &6&lDas verlorene Amulet'\n          - '&4&oFinde das verlorene Amulet'\n          - '&4&ovon Sonequa um diese'\n          - '&4&oQuest abzuschließen.'\n          - '&4&o'\n          - '&2Quest abgeschlossen!'\n      close: false\n    reputation:\n      item: menu_quests_reputation\n      amount: 1\n      text:\n        en:\n          - '&2Quest reputation: &6&l%point.quest_reputation.amount%'\n        de:\n          - '&2Quest Ansehen: &6&l%point.quest_reputation.amount%'\n      click: menu_quests_reputation_msg\n      close: true\n  slots:\n    8: reputation\n    11: 'quest1_active,quest1_completed'\n    13: 'quest2_active,quest2_completed'\n    15: 'quest3_active,quest3_completed'\n");this.projectData[this.newTabName].menus=e}this.inclideMenuExample=!1,this.$message({dangerouslyUseHTMLString:!0,message:`Section <b>${this.newTabName}</b> created!`,type:"success"}),this.sectionSelected=this.newTabName,this.newTabName=null,this.dialogAddSectionVisible=!1,this.newTabNameError=null}else this.newTabNameError=this.$t("exists-regex")},openNewTabDialog(){this.newTabName="",this.dialogAddSectionVisible=!0},removeTab(e){this.$confirm(this.$t("delete-section").replace("{tab}",e),this.$t("confirm"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((()=>{delete this.projectData[e],this.$message({type:"success",message:`Tab ${e} deleted`})}))},openArchive(){this.$refs.arciveFileInput.click()},async onFileArchivePicked(e){const t=e.target.files;this.projectData={},await $(t[0],this.projectData)},openJson(){this.$refs.jsonFileInput.click()},async onFileJsonPicked(e){const t=e.target.files;this.projectData={},self=this;var n=new FileReader;n.onload=function(){self.projectData=JSON.parse(n.result)},n.readAsText(t[0])},saveAsJson(){const e=JSON.stringify(this.projectData),t=new Blob([e],{type:"text/plain"}),n=JSON.stringify(new Date);this.downloadBlob(t,`bq${n}.json`)},saveAsZip(){this.projectData?function(a){var o=new e;const l={lineWidth:-1};for(const[e,n]of Object.entries(a)){n.events&&o.file(`${e}/events.yml`,t.dump(n.events,l)),n.conditions&&o.file(`${e}/conditions.yml`,t.dump(n.conditions,l)),n.objectives&&o.file(`${e}/objectives.yml`,t.dump(n.objectives,l)),n.items&&o.file(`${e}/items.yml`,t.dump(n.items,l)),n.main&&o.file(`${e}/main.yml`,t.dump(n.main,l)),n.journal&&o.file(`${e}/journal.yml`,t.dump(n.journal,l)),n.custom&&o.file(`${e}/custom.yml`,t.dump(n.custom,l));for(const a of V)if(n[a])for(const[s,i]of Object.entries(n[a]))o.file(`${e}/${a}/${s}.yml`,t.dump(i,l))}o.generateAsync({type:"blob"}).then((function(e){const t=`bq${JSON.stringify(new Date)}.zip`;n.exports.saveAs(e,t)}),(function(e){console.log(`Error with zip save: ${e}`)}))}(this.projectData):this.$message({dangerouslyUseHTMLString:!0,message:this.$t("data-is-empty"),type:"info"})},downloadBlob(e,t){const n=document.createEvent("MouseEvents"),a=document.createElement("a");a.download=t,a.href=window.URL.createObjectURL(e),a.dataset.downloadurl=["text/json",a.download,a.href].join(":"),n.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(n)},openLocalStorage(e){const t=JSON.parse(localStorage.getItem(`projects_${e}`));t?(this.projectData=t,this.$message({dangerouslyUseHTMLString:!0,message:`Project loaded from <b>${e}</b> slot`,type:"success"})):this.$message({message:`Project slot ${e} emty`,type:"info"})},saveLocalStorage(e){localStorage.setItem(`projects_${e}`,JSON.stringify(this.projectData)),this.$message({dangerouslyUseHTMLString:!0,message:`Project saved to <b>${e}</b> slot`,type:"success"})}}},Ie={class:"el-container is-vertical"},Pe={class:"el-header header-section"},Ue=m("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),ze=m("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),Le={class:"right-header"},Oe={class:"el-dropdown-link"},Re=m("br",null,null,-1),Ee=m("br",null,null,-1),Me=m("br",null,null,-1),Ae=m("br",null,null,-1),Qe={class:"dialog-footer"},Fe={class:"dialog-footer"};Ce.render=function(e,t,n,a,_,f){const h=o("el-button"),v=o("el-dropdown-item"),y=o("el-dropdown-menu"),b=o("el-dropdown"),q=o("el-link"),$=o("el-alert"),V=o("el-input"),N=o("el-checkbox"),w=o("el-dialog"),x=o("subSection"),j=o("el-tab-pane"),k=o("el-tabs");return l(),s("section",Ie,[m("input",{type:"file",style:{display:"none"},ref:"arciveFileInput",accept:".zip,",onChange:t[1]||(t[1]=(...e)=>f.onFileArchivePicked&&f.onFileArchivePicked(...e))},null,544),m("input",{type:"file",style:{display:"none"},ref:"jsonFileInput",accept:".json,",onChange:t[2]||(t[2]=(...e)=>f.onFileJsonPicked&&f.onFileJsonPicked(...e))},null,544),m("header",Pe,[m(b,{size:"small"},{dropdown:d((()=>[m(y,null,{default:d((()=>[m(v,{onClick:f.openArchive},{default:d((()=>[u(c(e.$t("open-zip")),1)])),_:1},8,["onClick"]),m(v,{onClick:f.openJson},{default:d((()=>[u(c(e.$t("open-json")),1)])),_:1},8,["onClick"]),(l(),s(r,null,i(5,(t=>m(v,{onClick:e=>f.openLocalStorage(t),key:t,divided:1===t},{default:d((()=>[u(c(e.$t("open-slot"))+" "+c(t),1)])),_:2},1032,["onClick","divided"]))),64))])),_:1})])),default:d((()=>[m(h,{size:"mini",class:"header-buttons",icon:"el-icon-folder-opened"},{default:d((()=>[u(c(e.$t("open")),1),Ue])),_:1})])),_:1}),m(b,{size:"small"},{dropdown:d((()=>[m(y,null,{default:d((()=>[m(v,{onClick:f.saveAsZip},{default:d((()=>[u(c(e.$t("save-zip")),1)])),_:1},8,["onClick"]),m(v,{onClick:f.saveAsJson},{default:d((()=>[u(c(e.$t("save-json")),1)])),_:1},8,["onClick"]),(l(),s(r,null,i(5,(t=>m(v,{onClick:e=>f.saveLocalStorage(t),key:t,divided:1===t},{default:d((()=>[u(c(e.$t("save-slot"))+" "+c(t),1)])),_:2},1032,["onClick","divided"]))),64))])),_:1})])),default:d((()=>[m(h,{size:"mini",class:"header-buttons",icon:"el-icon-takeaway-box"},{default:d((()=>[u(c(e.$t("save")),1),ze])),_:1})])),_:1}),m(h,{size:"mini",onClick:f.openNewTabDialog,class:"header-buttons",icon:"el-icon-folder-add"},{default:d((()=>[u(c(e.$t("new-section")),1)])),_:1},8,["onClick"]),m(q,{type:"primary",target:"_blank",rel:"noopener noreferrer",href:"https://docs.betonquest.org/",class:"header-buttons"},{default:d((()=>[u(c(e.$t("bq-doc")),1)])),_:1}),m(q,{type:"primary",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/BetonQuest/RPGMenu/wiki/",class:"header-buttons"},{default:d((()=>[u(c(e.$t("rpgmenu-doc")),1)])),_:1}),m(q,{type:"primary",target:"_blank",rel:"noopener noreferrer",href:"https://mcmodels.net/how-to-tutorials/betonquest-tutorials/",class:"header-buttons"},{default:d((()=>[u(c(e.$t("bq-mcmodels-tutorials")),1)])),_:1}),m("div",Le,[m(b,null,{dropdown:d((()=>[m(y,null,{default:d((()=>[(l(!0),s(r,null,i(_.avaliableLanguages,((e,t)=>(l(),s(v,{class:"lang-option",onClick:e=>f.changeLang(t)},{default:d((()=>[(l(),s(g(e),{class:"lang-icon"}))])),_:2},1032,["onClick"])))),256))])),_:1})])),default:d((()=>[m("span",Oe,[(l(),s(g(_.avaliableLanguages[_.settings.language]),{class:"lang-icon"}))])])),_:1})])]),m(w,{title:e.$t("create-section"),modelValue:_.dialogAddSectionVisible,"onUpdate:modelValue":t[7]||(t[7]=e=>_.dialogAddSectionVisible=e),width:"30%","custom-class":"dialog create-section"},{footer:d((()=>[m("span",Qe,[m(h,{onClick:t[6]||(t[6]=e=>_.dialogAddSectionVisible=!1)},{default:d((()=>[u(c(e.$t("cancel")),1)])),_:1}),m(h,{type:"primary",onClick:f.addTab},{default:d((()=>[u(c(e.$t("create")),1)])),_:1},8,["onClick"])])])),default:d((()=>[_.newTabNameError?(l(),s($,{key:0,title:_.newTabNameError,type:"error"},null,8,["title"])):p("",!0),m("span",null,c(e.$t("quest-name")),1),m(V,{modelValue:_.newTabName,"onUpdate:modelValue":t[3]||(t[3]=e=>_.newTabName=e)},null,8,["modelValue"]),Re,Ee,m(N,{modelValue:_.inclideDialogExample,"onUpdate:modelValue":t[4]||(t[4]=e=>_.inclideDialogExample=e)},{default:d((()=>[u(c(e.$t("quest-example")),1)])),_:1},8,["modelValue"]),Me,m(N,{modelValue:_.inclideMenuExample,"onUpdate:modelValue":t[5]||(t[5]=e=>_.inclideMenuExample=e)},{default:d((()=>[u(c(e.$t("menu-example")),1)])),_:1},8,["modelValue"]),Ae])),_:1},8,["title","modelValue"]),m(w,{title:e.$t("settings"),modelValue:_.openSettingsVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>_.openSettingsVisible=e),width:"30%","custom-class":"dialog setting-dialog"},{footer:d((()=>[m("span",Fe,[m(h,{type:"primary",onClick:f.closeAndSaveSettings},{default:d((()=>[u(c(e.$t("save")),1)])),_:1},8,["onClick"])])])),default:d((()=>[u(c(e.$t("language"))+": ",1)])),_:1},8,["title","modelValue"]),m(k,{class:"sections-tabs",modelValue:_.sectionSelected,"onUpdate:modelValue":t[9]||(t[9]=e=>_.sectionSelected=e),type:"border-card",closable:"",onTabRemove:f.removeTab},{default:d((()=>[(l(!0),s(r,null,i(_.projectData,((e,t)=>(l(),s(j,{key:t,label:t,name:t,class:"section-tab"},{default:d((()=>[m(x,{modelValue:_.projectData[t],"onUpdate:modelValue":e=>_.projectData[t]=e,"project-data":_.projectData,"sub-section-name":t},null,8,["modelValue","onUpdate:modelValue","project-data","sub-section-name"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue","onTabRemove"])])};const Be=v({locale:"ru",messages:{en:t.load("open: Open\nopen-zip: Open Project zip\nopen-json: Open Project json\nopen-slot: Open Project from local slot\nsave-json: Export as json\nsave: Save\nsave-slot: Save Project to local slot\nnew-section: New section\nsettings: Settings\nbq-doc: BetonQuest documentation\nrpgmenu-doc: RPGMenu documentation\nquest-name: Provide quest section name\nquest-example: Include dialog example\nmenu-example: Include menu example\ncancel: Cancel\ncreate: Create\nlanguage: Language\nerror-title-name-empty: Section title cannot be empty\ncreate-section: Create section\nadd-dialog-section: Add dialog section\ndialogs: Dialogs\nadd-menu: Add menu\nmenus: Menu\nevents: Events\nconditions: Conditions\nobjectives: Objectives\nitems: Items\nmain: Main\njournal: Journal\ncustom: Custom\ncreate-subsection: Create section\ndialog-section-name: Enter section name\nprovide-name: Provide name\nempty-title: Title cannot be empty\ndelete-section: Delete section {tab}?\nconfirm: Confirm\ndelete: Delete\ntab-deleted: Tab <b>{tab}</b> deleted\ndialog-exists: Dialog {newName} already exisis\ndialog-section-created: Dialog section <b>{newName}</b> created\nmenu-section-exists: Menu {newName} already exisis\nmenu-section-created: Menu section <b>{newName}</b> created\nyaml-editor: Yaml editor\nadd-dialog: Add dialog option\nsave-and-return: Save and return visual editor\nenter-dialog-name: Provide dialog name\ndialog-window-title: New dialog\nexists-regex: Already exists or bad name (use only a-z 0-9 and _)\ndialog-created: Dialog <b>{value}</b> created\ndialog-renamed: Dialog renamed from <b>{old}</b> to <b>{new}</b>\ndialog-deleted: Dialog <b>{dialogKey}</b> deleted\nNPC_options: NPC options\nplayer_options: Player options\nno-options: No options found\nno-results: No results found\ndelete-section-key: Delete {name} from {from}?\ndelete-key: Delete {key}?\nnew-setting: New setting\nquester-name: Quester name\nnew-setting-key: Enter new setting key\nsave-zip: Export as zip\ndata-is-empty: Data is empty\ntemplate-create: Create with template\ntemplate-dialog: Creation with template\ntemplate-objective: Objective template\ndelete-dialog-section: Delete dialog section\ndialog-section-deleted: Dialog section <b>{section}</b> deleted\ndiagram-editor: Diagram editor\n\ntemplate-quest-name: Quest name for system\ntemplate-quest-readable-name: Readable quest name\ntemplate-quest-NPC-option-1: Quest text\ntemplate-quest-NPC-option-2: Text after player confirm\ntemplate-quest-NPC-option-3: NPC thanks\ntemplate-quest-player-option-1: Player message\ntemplate-quest-player-option-2: Agreement from player\ntemplate-quest-player-option-3: Message about quest complete\ntemplate-quest-journal-start: Journal note about quest start\ntemplate-quest-journal-done: Journal note about quest end\ntemplate-quest-exp-reward: Exp reward\ntemplate-quest-money-reward: Money reward\ntemplate-quest-level: Required level\ntemplate-quest-select: Quester\npreview: Preview\nreturn-to-edit: Return to editor\napply: Apply\nmmobkill: Mythic mob kill\nmmomob-name: Mythicmob name\namount: amount\nno-quester: Quester not selected\ntemplate-applyed: Template applyed\ntemplate-quest-compass-name: Compass name\ntemplate-quest-compass-location: Compass location\n\nenter-new-name: Enter new name\nrename: Rename\npointers: Conversation pointers\ndelete-language: Delete text of language {language}?\nadd-language: Add language\nadd: Add\nfirst-option: First dialog\nselect-option: Select option\nstop-option: Lock player in dialog\nbq-mcmodels-tutorials: BetonQuest Tutorials on mcmodels.net\n"),ru:t.load("open: Открыть\nopen-zip: Открыть zip\nopen-json: Открыть json\nopen-slot: Открыть сохранённый слот\nsave-json: Экспорт в json\nsave: Сохранить\nsave-slot: Сохранить в слот\nnew-section: Новый раздел\nsettings: Настройки\nbq-doc: Документация BetonQuest\nrpgmenu-doc: Документация RPGMenu\nquest-name: Введите название раздела квестов\nquest-example: Добавить пример квеста?\nmenu-example: Добавить пример меню?\ncancel: Отмена\ncreate: Создать\nlanguage: Язык\nerror-title-name-empty: Заголовок раздела не может быть пустым\ncreate-section: Создание раздела\nadd-dialog-section: Добавить раздел диалога\ndialogs: Диалоги\nadd-menu: Добавить меню\nmenus: Меню\nevents: События\nobjectives: Задания\nconditions: Условия\nitems: Предметы\nmain: Главное\njournal: Журнал\ncustom: Разное\ncreate-subsection: Создание раздела\ndialog-section-name: Введите название раздела\nprovide-name: Введите название\nempty-title: Заголовок не может быть пустым\ndelete-section: Удалить раздел {tab}?\nconfirm: Подтвердить\ndelete: Удалить\ntab-deleted: Раздел <b>{tab}</b> удалён\ndialog-exists: Диалог {newName} уже существует\ndialog-section-created: Раздел диалогов <b>{newName}</b> создан\nmenu-section-exists: Меню {newName} уже существует\nmenu-section-created: Раздел меню <b>{newName}</b> создан\nyaml-editor: Yaml редактор\nadd-dialog: Добавить вариант диалога\nsave-and-return: Сохранить и вернуться в визуальный редактор\nenter-dialog-name: Введите название диалога\ndialog-window-title: Новый диалог\nexists-regex: Уже существует или ошибка в названии (используйте a-z 0-9 и _)\ndialog-created: Диалог <b>{value}</b> создан\ndialog-renamed: Диалог <b>{old}</b> периименован <b>{new}</b>\ndialog-deleted: Диалог <b>{dialogKey}</b> удалён\nNPC_options: Варианты ответов NPC\nplayer_options: Варианты от игрока\nno-options: Нет вариантов\nno-results: Не найдено вариантов\ndelete-section-key: Удалить {name} из раздела {from}?\ndelete-key: Удалить {key}?\nnew-setting: Добавить запись\nquester-name: Имя квестодателя\nnew-setting-key: Введите название\nsave-zip: Экспорт в zip архив\ndata-is-empty: Нет данных для сохранения\ntemplate-create: Создать по шаблону\ntemplate-dialog: Создание по шаблону\ntemplate-objective: Шаблон простого задания\ndelete-dialog-section: Удаление раздела диалогов\ndialog-section-deleted: Раздел диалогов <b>{section}</b> удалён\ndiagram-editor: Редактор диаграм\n\ntemplate-quest-name: Название квеста для системы\ntemplate-quest-readable-name: Читаемое название квеста\ntemplate-quest-NPC-option-1: Текст просмотра квеста\ntemplate-quest-NPC-option-2: Текст после подтверждения\ntemplate-quest-NPC-option-3: Благодарность от NPC\ntemplate-quest-player-option-1: Вопрос к NPC\ntemplate-quest-player-option-2: Соглашение выполнить квест\ntemplate-quest-player-option-3: Сообщение об выполненном квесте\ntemplate-quest-journal-start: Запись в журнале о задаче квеста\ntemplate-quest-journal-done: Запись в журнале о завешении квеста\ntemplate-quest-exp-reward: Размер опыта за выполнение\ntemplate-quest-money-reward: Монеты за выполнение\ntemplate-quest-level: Необходимый лвл для выполнения\ntemplate-quest-select: NPC\npreview: Предпросмотр\nreturn-to-edit: Вернуться к редактированию\napply: Применить\nmmobkill: Убийство моба\nmmomob-name: Название Mythic-моба\namount: кол-во\nno-quester: Квестодатель не выбран\ntemplate-applyed: Шаблон применён\ntemplate-quest-compass-name: Название компаса\ntemplate-quest-compass-location: Локация компаса\n\nenter-new-name: Введите новое имя\nrename: Переименование\npointers: Ссылки на диалоги\ndelete-language: Удалить текст языка {language}?\nadd-language: Добавить язык\nadd: Добавить\nfirst-option: Стартовый диалог\nselect-option: Выберите вариант\nstop-option: Закрытие диалога только при завершении\nbq-mcmodels-tutorials: Туториалы BetonQuest на mcmodels.net\n")}}),He=y(Ce);He.use(b),He.use(Be),He.mount("#app");
