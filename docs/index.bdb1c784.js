import{j as e,J as t,h as n,F as o,E as a,r as l,o as s,c as i,a as d,w as c,b as r,d as m,t as u,e as p,f as _,g,V as h,i as E,k as v,l as y,m as N,n as b}from"./vendor.1736b6b3.js";const T={schema:e.DEFAULT_SCHEMA},S={schema:e.DEFAULT_SCHEMA,lineWidth:-1};function $(t){return e.load(t.replaceAll(">-","|-"),T)}function U(t){return e.dump(t,S).replaceAll("|-",">-")}const A=["conversations","menus"];function w(e,n){t.loadAsync(e).then((function(e){e.forEach((function(e,t){t.dir||t.async("text").then((function(e){let o=function(e,t){const n=e.split("/");let o={section:n[0],fileType:n[1].replace(".yml",""),data:{}};if(A.indexOf(o.fileType)>=0&&(o.subsection=n[2].replace(".yml","")),t)try{const e=$(t);o.data=e}catch(a){console.error(`Section "${e}" error: ${a}`)}return o}(t.name,e);n[o.section]||(n[o.section]={}),A.indexOf(o.fileType)>=0?(n[o.section][o.fileType]||(n[o.section][o.fileType]={}),n[o.section][o.fileType][o.subsection]=o.data):n[o.section][o.fileType]=o.data}))}))}),(function(e){console.error(`Error reading ${f.name}: ${e.message}`)}))}const V=["conversations","menus"];const M={components:{Multiselect:a},props:["modelValue","placeholder","type","dialogSectionName","dialogType","max","options"],data:()=>({selectedTags:null}),mounted(){this.modelValue&&(this.selectedTags=this.modelValue.split(",").map((e=>({value:e.trim(),label:e.trim()}))))},methods:{tagsChange(e){this.$emit("update:modelValue",e.map((e=>e.value)).join(","))}}};M.render=function(e,t,n,o,a,d){const c=l("Multiselect");return s(),i(c,{class:"autocomplete",modelValue:a.selectedTags,"onUpdate:modelValue":t[1]||(t[1]=e=>a.selectedTags=e),mode:"tags",searchable:!0,createTag:!0,minChars:1,resolveOnLoad:!0,appendNewTag:!0,object:!0,options:this.options,placeholder:n.placeholder,max:n.max||-1,canClear:!1,openDirection:"top",onChange:d.tagsChange,ref:"multiselect",noOptionsText:e.$t("no-options"),noResultsText:e.$t("no-results")},null,8,["modelValue","options","placeholder","max","onChange","noOptionsText","noResultsText"])};const Q={props:["modelValue","spanLeft","spanRight","maxRows"],data:()=>({}),computed:{localValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},created(){if("string"==typeof this.localValue){const e={};e[this.$root.settings.language]=this.localValue,this.localValue=e}},methods:{delLang(e){this.$confirm(this.$t("delete-language").replace("{language}",e),this.$t("delete"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((()=>{delete this.localValue[e]}))}}};Q.render=function(e,t,n,o,a,_){const g=l("el-tag"),f=l("el-col"),h=l("el-input"),E=l("el-row");return s(!0),i(p,null,d(_.localValue,((e,t)=>(s(),i(E,{class:"dialog-setting-section section-lang"},{default:c((()=>[r(f,{span:n.spanLeft||1},{default:c((()=>[r(g,{type:"info",class:"setting-header lang-delete",onClick:e=>_.delLang(t)},{default:c((()=>[m(u(t),1)])),_:2},1032,["onClick"])])),_:2},1032,["span"]),r(f,{span:n.spanRight||23},{default:c((()=>[r(h,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:n.maxRows||20},modelValue:_.localValue[t],"onUpdate:modelValue":e=>_.localValue[t]=e},null,8,["autosize","modelValue","onUpdate:modelValue"])])),_:2},1032,["span"])])),_:2},1024)))),256)};const x={emits:["newLang"],data:()=>({newLang:""}),methods:{addLang(){2===this.newLang.length&&(this.$emit("newLang",this.newLang.toLowerCase()),this.newLang="",this.$refs.languagePopover.hide())}}},k=r("i",{class:"el-icon-plus"},null,-1),I=r("i",{class:"el-icon-s-flag el-input__icon"},null,-1);x.render=function(e,t,n,o,a,d){const p=l("el-tag"),_=l("el-input"),g=l("el-button"),f=l("el-popover");return s(),i(f,{placement:"bottom",title:e.$t("add-language"),trigger:"click","popper-class":"language-popover",ref:"languagePopover","show-after":0,"hide-after":0},{reference:c((()=>[r(p,{type:"info",class:"setting-header"},{default:c((()=>[k])),_:1})])),default:c((()=>[r(_,{modelValue:a.newLang,"onUpdate:modelValue":t[1]||(t[1]=e=>a.newLang=e),maxlength:2,minlength:2,size:"mini",class:"lang-input"},{prefix:c((()=>[I])),_:1},8,["modelValue"]),r(g,{type:"primary",size:"mini",onClick:d.addLang},{default:c((()=>[m(u(e.$t("add")),1)])),_:1},8,["onClick"])])),_:1},8,["title"])};const q={components:{tagComplete:M,langField:Q,langHeader:x},props:["modelValue","dialogType","subSectionName","dialogName","dialogSectionName","dialogSectionInfo","options"],data:()=>({}),created(){void 0!==this.dialogInfo?(this.dialogInfo.event&&(this.dialogInfo.events=this.dialogInfo.event,delete this.dialogInfo.event),this.dialogInfo.condition&&(this.dialogInfo.conditions=this.dialogInfo.condition,delete this.dialogInfo.condition),this.dialogInfo.pointer&&(this.dialogInfo.pointers=this.dialogInfo.pointer,delete this.dialogInfo.pointer)):console.error(`dialogInfo is undefined in dialogOption; dialogType: ${this.dialogType} dialogName: ${this.dialogName}`)},computed:{dialogInfo:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{renameDialog(){this.$prompt(this.$t("enter-new-name"),this.$t("rename"),{confirmButtonText:"Rename",cancelButtonText:"Cancel",inputPattern:/^[a-zA-Z0-9_]+$/,inputErrorMessage:this.$t("exists-regex"),inputValidator:e=>!this.dialogSectionInfo[this.dialogType][e],inputValue:this.dialogName}).then((({value:e})=>{this.$emit("rename",this.dialogName,this.dialogType,e)}))},deleteDialog(){this.$confirm(this.$t("delete-section-key").replace("{name}",this.dialogName).replace("{from}",this.dialogSectionName),this.$t("delete"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((()=>{this.$emit("delete",this.dialogType,this.dialogName)}))},newLang(e){this.dialogInfo.text||(this.dialogInfo.text={}),this.dialogInfo.text[e]=""},addDialogToFirstOption(){const e=this.dialogSectionInfo.first;if(e){const t=this.dialogSectionInfo.NPC_options[e].pointers;if(!t.includes(this.dialogName)){const e=`${this.dialogName},${t}`;this.$emit("updateFirstPointers",e)}}}}},C={class:"dialog-header"},j=r("i",{class:"el-icon-edit"},null,-1),L=r("i",{class:"el-icon-delete"},null,-1),O=r("i",{class:"el-icon-link"},null,-1);q.render=function(e,t,n,o,a,d){const m=l("el-tag"),p=l("langHeader"),g=l("el-tooltip"),f=l("langField"),h=l("el-col"),E=l("el-row"),v=l("tagComplete"),y=l("el-card");return s(),i(y,{class:"dialog-card"},{header:c((()=>[r("div",C,u(n.dialogName),1),r(m,{type:"info",class:"setting-header",onClick:t[1]||(t[1]=e=>d.renameDialog())},{default:c((()=>[j])),_:1}),r(m,{type:"info",class:"setting-header",onClick:t[2]||(t[2]=e=>d.deleteDialog())},{default:c((()=>[L])),_:1}),r(p,{onNewLang:d.newLang},null,8,["onNewLang"]),"player_options"==n.dialogType?(s(),i(g,{key:0,class:"item",effect:"light",content:e.$t("add-dialog-to-first-option"),placement:"top"},{default:c((()=>[r(m,{type:"info",class:"setting-header",onClick:t[3]||(t[3]=e=>d.addDialogToFirstOption())},{default:c((()=>[O])),_:1})])),_:1},8,["content"])):_("",!0)])),default:c((()=>[r(E,{class:"dialog-setting-section section-lang"},{default:c((()=>[r(h,{span:24},{default:c((()=>[r(f,{ref:"dialogLangs",modelValue:d.dialogInfo.text,"onUpdate:modelValue":t[4]||(t[4]=e=>d.dialogInfo.text=e),"max-rows":10},null,8,["modelValue"])])),_:1})])),_:1}),r(E,{class:"dialog-setting-section section-conditions"},{default:c((()=>[r(h,{span:24},{default:c((()=>[r(v,{type:"conditions",modelValue:d.dialogInfo.conditions,"onUpdate:modelValue":t[5]||(t[5]=e=>d.dialogInfo.conditions=e),options:n.options.conditions,"dialog-section-name":n.dialogSectionName,"dialog-type":n.dialogType,placeholder:e.$t("conditions")},null,8,["modelValue","options","dialog-section-name","dialog-type","placeholder"])])),_:1})])),_:1}),r(E,{class:"dialog-setting-section section-event"},{default:c((()=>[r(h,{span:24},{default:c((()=>[r(v,{type:"events",modelValue:d.dialogInfo.events,"onUpdate:modelValue":t[6]||(t[6]=e=>d.dialogInfo.events=e),options:n.options.events,"dialog-section-name":n.dialogSectionName,"dialog-type":n.dialogType,placeholder:e.$t("events")},null,8,["modelValue","options","dialog-section-name","dialog-type","placeholder"])])),_:1})])),_:1}),r(E,{class:"dialog-setting-section section-pointers"},{default:c((()=>[r(h,{span:24},{default:c((()=>[r(v,{type:"pointers",modelValue:d.dialogInfo.pointers,"onUpdate:modelValue":t[7]||(t[7]=e=>d.dialogInfo.pointers=e),options:n.options.pointers[n.dialogType],"dialog-section-name":n.dialogSectionName,"dialog-type":n.dialogType,placeholder:e.$t("pointers")},null,8,["modelValue","options","dialog-section-name","dialog-type","placeholder"])])),_:1})])),_:1})])),_:1})};const D={props:["initData"],data:()=>({}),computed:{questData:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{}},P={class:"diagram-editor"};D.render=function(e,t,n,o,a,l){return s(),i("div",P)},g.config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds/src-noconflict/");const R={props:["modelValue","class","raw","readonly"],components:{VAceEditor:h},data(){return{text:"",customClass:this.class||"yaml-editor"}},created(){if(this.raw)this.text=this.modelValue;else try{this.text=U(this.modelValue,this.$root.jsonDumpOptions)}catch(e){console.error("Yaml error:",e.message),this.$message({type:"error",message:`'Yaml error: ${e.message}`})}},methods:{textUpdate(e,t){if(this.raw)this.$emit("update:modelValue",this.text);else try{this.$emit("update:modelValue",$(this.text,this.$root.jsonLoadOptions))}catch(n){console.error("Yaml error:",n.message),this.$message({type:"error",message:`'Yaml error: ${n.message}`})}},useDarkTheme(){this.$root.settings.dark=!this.$root.settings.dark,this.$root.settings=this.$root.settings}}};R.render=function(e,t,n,o,a,d){const c=l("v-ace-editor");return s(),i(c,{value:a.text,"onUpdate:value":t[1]||(t[1]=e=>a.text=e),lang:"yaml",theme:e.$root.settings.dark?"ambiance":"chrome",class:a.customClass,printMargin:!1,wrap:!0,readonly:n.readonly,onChange:d.textUpdate},null,8,["value","theme","class","readonly","onChange"])};const z={components:{dialogOption:q,diagramEdit:D,langField:Q,langHeader:x,tagComplete:M,aceEditor:R},props:["modelValue","projectData","dialogSectionName","subSectionName"],data:()=>({editMode:null,diagramData:null,dialogKey:0,tagOptions:{}}),computed:{dialogSectionInfo:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},created(){this.updateOptions()},methods:{changeToDiagram(){this.editMode="diagram"},changeToYaml(){this.editMode="yaml"},changeFromYamlToEditor(){this.editMode=null},useDarkTheme(){this.$root.settings.dark=!this.$root.settings.dark,this.$root.settings=this.$root.settings},changeFromDiagramToEditor(){this.editMode=null},addDialogOption(e){let t="message_";"player_options"===e&&(t="option_"),this.$prompt(this.$t("enter-dialog-name"),this.$t("dialog-window-title"),{confirmButtonText:this.$t("create"),cancelButtonText:this.$t("cancel"),inputPattern:/^[a-z0-9_]+$/,inputErrorMessage:this.$t("exists-regex"),inputValidator:t=>!this.dialogSectionInfo[e][t],closeOnClickModal:!1,inputValue:t}).then((({value:t})=>{const n={text:{}};n.text[this.$root.settings.language]="",this.dialogSectionInfo[e][t]=n,this.updateOptions(),this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-created").replace("{value}",t)})}))},renameDialog(e,t,n){this.dialogSectionInfo[t][n]=this.dialogSectionInfo[t][e],delete this.dialogSectionInfo[t][e],this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-renamed").replace("{old}",e).replace("{new}",n)})},deleteDialog(e,t){delete this.dialogSectionInfo[e][t],this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-deleted").replace("{dialogKey}",t)})},updateFirstPointers(e){const t=this.dialogSectionInfo.first;this.dialogSectionInfo.NPC_options[t].pointers=e,this.dialogKey+=1},newQuesterNameLang(e){this.dialogSectionInfo.quester||(this.dialogSectionInfo.quester={}),this.dialogSectionInfo.quester[e]=""},updateOptions(){this.tagOptions={conditions:[],events:[],pointers:{NPC_options:[],player_options:[]}};const e=this.projectData[this.subSectionName];if(!e.conditions)return void(e.conditions={});for(const[n,o]of Object.entries(e.conditions))this.tagOptions.conditions.push({value:n,label:n});if(!e.events)return void(e.events={});for(const[n,o]of Object.entries(e.events))this.tagOptions.events.push({value:n,label:n});if(!e.conversations)return void(e.conversations={NPC_options:{},player_options:{}});const t=e.conversations[this.dialogSectionName];for(const[n,o]of Object.entries(t.player_options))this.tagOptions.pointers.NPC_options.push({value:n,label:n});for(const[n,o]of Object.entries(t.NPC_options))this.tagOptions.pointers.player_options.push({value:n,label:n});console.log("tagOptions",this.tagOptions)}}},F={key:0,class:"view-editor-section dialog-section"},G={class:"menu-buttons"},Y=r("i",{class:"el-icon-document el-icon--right"},null,-1),H=r("i",{class:"el-icon-data-line el-icon--right"},null,-1),B={class:"conversation-settings-sction"},K={class:"conversation-setting-title"},J=r("div",{class:"conversation-settings-separator"},null,-1),W={class:"conversation-settings-sction"},Z={class:"conversation-setting-title"},X={class:"conversation-settings-sction"},ee={class:"conversation-setting-title"},te=r("br",null,null,-1),ne={class:"dialog-options-section"},oe={class:"menu-buttons"},ae={class:"dialog-title"},le={key:1,class:"yaml-editor-section"},se={class:"menu-buttons"},ie=r("i",{class:"el-icon-chat-line-square el-icon--right"},null,-1),de=r("i",{class:"el-icon-view el-icon--right"},null,-1),ce={key:2,class:"yaml-editor-section"},re={class:"menu-buttons"},me=r("i",{class:"el-icon-chat-line-square el-icon--right"},null,-1);z.render=function(e,t,n,o,a,g){const f=l("el-button"),h=l("el-affix"),E=l("langHeader"),v=l("langField"),y=l("tagComplete"),N=l("el-checkbox"),b=l("el-card"),T=l("dialogOption"),S=l("el-space"),$=l("aceEditor"),U=l("diagramEdit");return a.editMode?"yaml"===a.editMode?(s(),i("div",le,[r(h,{offset:0},{default:c((()=>[r("div",se,[r(f,{size:"mini",onClick:g.changeFromYamlToEditor,type:"primary",class:"menu-button"},{default:c((()=>[ie,m(" "+u(e.$t("save-and-return")),1)])),_:1},8,["onClick"]),r(f,{size:"mini",onClick:g.useDarkTheme,class:"menu-button"},{default:c((()=>[de,m(" "+u(e.$t("use-dark-theme")),1)])),_:1},8,["onClick"])])])),_:1}),r($,{modelValue:this.dialogSectionInfo,"onUpdate:modelValue":t[4]||(t[4]=e=>this.dialogSectionInfo=e),class:"yaml-conversation yaml-editor"},null,8,["modelValue"])])):"diagram"===a.editMode?(s(),i("div",ce,[r(h,{offset:0},{default:c((()=>[r("div",re,[r(f,{size:"mini",onClick:g.changeFromDiagramToEditor,class:"menu-button"},{default:c((()=>[me,m(" "+u(e.$t("save-and-return")),1)])),_:1},8,["onClick"])])])),_:1}),r(U,{"init-data":n.modelValue},null,8,["init-data"])])):_("",!0):(s(),i("div",F,[r(h,{offset:0},{default:c((()=>[r("div",G,[r(f,{size:"mini",onClick:g.changeToYaml,type:"primary",class:"menu-button"},{default:c((()=>[Y,m(" "+u(e.$t("yaml-editor")),1)])),_:1},8,["onClick"]),r(f,{size:"mini",onClick:g.changeToDiagram,class:"menu-button"},{default:c((()=>[H,m(" "+u(e.$t("diagram-editor")),1)])),_:1},8,["onClick"])])])),_:1}),r(b,{class:"conversation-settings"},{default:c((()=>[r("div",B,[r("div",K,u(e.$t("quester-name"))+":",1),r(E,{onNewLang:g.newQuesterNameLang},null,8,["onNewLang"]),r(v,{modelValue:g.dialogSectionInfo.quester,"onUpdate:modelValue":t[1]||(t[1]=e=>g.dialogSectionInfo.quester=e),"span-left":3,"span-right":25},null,8,["modelValue"])]),J,r("div",W,[r("div",Z,u(e.$t("first-option"))+":",1),r(y,{modelValue:g.dialogSectionInfo.first,"onUpdate:modelValue":t[2]||(t[2]=e=>g.dialogSectionInfo.first=e),type:"pointers",options:a.tagOptions.NPC_options,"dialog-section-name":n.dialogSectionName,placeholder:e.$t("select-option"),max:1},null,8,["modelValue","options","dialog-section-name","placeholder"])]),r("div",X,[r("div",ee,u(e.$t("stop-option"))+":",1),r(N,{modelValue:g.dialogSectionInfo.stop,"onUpdate:modelValue":t[3]||(t[3]=e=>g.dialogSectionInfo.stop=e)},null,8,["modelValue"]),te])])),_:1}),(s(),i(p,null,d(["NPC_options","player_options"],(t=>r("div",ne,[r("div",oe,[r("div",ae,u(e.$t(t)),1),r(f,{size:"mini",onClick:e=>g.addDialogOption(t),class:"menu-button",type:"success",plain:"",icon:"el-icon-chat-line-round"},{default:c((()=>[m(u(e.$t("add-dialog")),1)])),_:2},1032,["onClick"])]),r(S,{wrap:"",class:"dialogs-section"},{default:c((()=>[(s(!0),i(p,null,d(g.dialogSectionInfo[t],((e,o)=>(s(),i(T,{key:a.dialogKey,modelValue:g.dialogSectionInfo[t][o],"onUpdate:modelValue":e=>g.dialogSectionInfo[t][o]=e,"dialog-name":o,"dialog-type":t,options:a.tagOptions,"dialog-section-name":n.dialogSectionName,"dialog-section-info":g.dialogSectionInfo,"sub-section-name":n.subSectionName,onDelete:g.deleteDialog,onRename:g.renameDialog,onUpdateFirstPointers:g.updateFirstPointers},null,8,["modelValue","onUpdate:modelValue","dialog-name","dialog-type","options","dialog-section-name","dialog-section-info","sub-section-name","onDelete","onRename","onUpdateFirstPointers"])))),128))])),_:2},1024)]))),64))]))};const ue={props:["modelValue","valueKey","activeKey"],data:()=>({}),computed:{localValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},localActiveKey:{get(){return this.activeKey},set(e){this.$emit("update:activeKey",e)}}},methods:{deleteSetting(e){this.$confirm(this.$t("delete-key").replace("{key}",e),this.$t("delete"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((()=>{this.$emit("delete",e)}))}}},pe={class:"setting-section el-row"},_e=r("i",{class:"el-icon-delete"},null,-1),ge={key:1,class:"field-editor"};ue.render=function(e,t,n,o,a,d){const p=l("el-tag"),_=l("el-input");return s(),i("div",pe,[r(p,{type:"info",class:"setting-header delete-button",onClick:t[1]||(t[1]=e=>d.deleteSetting(n.valueKey))},{default:c((()=>[_e])),_:1}),r(p,{type:"info",class:"setting-header el-col el-col-4"},{default:c((()=>[m(u(n.valueKey),1)])),_:1}),d.localActiveKey!==n.valueKey?(s(),i("div",{key:0,class:"setting-value el-col-18",onClick:t[2]||(t[2]=e=>d.localActiveKey=n.valueKey)},u(d.localValue),1)):(s(),i("div",ge,[r(_,{modelValue:d.localValue,"onUpdate:modelValue":t[3]||(t[3]=e=>d.localValue=e)},null,8,["modelValue"])]))])};const fe={components:{simpleField:ue},props:["modelValue"],data:()=>({yamlEdit:!1,yamlText:null,activeKey:""}),computed:{localValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{changeToYaml(){this.yamlText=e.dump(this.localValue,{lineWidth:-1}),this.yamlEdit=!0},changeToEditor(){this.localValue=e.load(this.yamlText),this.yamlText=null,this.yamlEdit=!1},deleteSetting(e){delete this.localValue[e]},newSetting(){this.$prompt(this.$t("new-setting-key"),this.$t("create"),{confirmButtonText:this.$t("create"),cancelButtonText:this.$t("cancel"),inputPattern:/^[a-z0-9_]+$/,inputErrorMessage:this.$t("exists-regex"),inputValidator:e=>!this.localValue[e]}).then((({value:e})=>{this.localValue[e]=""}))}}},he={key:0,class:"view-editor-section"},Ee={class:"menu-buttons"},ve={key:1,class:"yaml-editor-section"},ye={class:"menu-buttons"};fe.render=function(e,t,n,o,a,_){const g=l("el-button"),f=l("el-affix"),h=l("simpleField"),E=l("el-input");return a.yamlEdit?(s(),i("div",ve,[r(f,{offset:0},{default:c((()=>[r("div",ye,[r(g,{size:"mini",onClick:_.changeToEditor,class:"menu-button"},{default:c((()=>[m(u(this.$t("save-and-return")),1)])),_:1},8,["onClick"])])])),_:1}),r(E,{class:"yaml-editor",type:"textarea",autosize:{minRows:20,maxRows:50},modelValue:a.yamlText,"onUpdate:modelValue":t[2]||(t[2]=e=>a.yamlText=e)},null,8,["modelValue"])])):(s(),i("div",he,[r(f,{offset:0},{default:c((()=>[r("div",Ee,[r(g,{size:"mini",onClick:_.changeToYaml,class:"menu-button"},{default:c((()=>[m(u(this.$t("yaml-editor")),1)])),_:1},8,["onClick"]),r(g,{size:"mini",onClick:_.newSetting,class:"menu-button",type:"success",icon:"el-icon-plus",plain:""},{default:c((()=>[m(u(e.$t("new-setting")),1)])),_:1},8,["onClick"])])])),_:1}),(s(!0),i(p,null,d(_.localValue,((e,n)=>(s(),i(h,{modelValue:_.localValue[n],"onUpdate:modelValue":e=>_.localValue[n]=e,"value-key":n,activeKey:a.activeKey,"onUpdate:activeKey":t[1]||(t[1]=e=>a.activeKey=e),onDelete:_.deleteSetting},null,8,["modelValue","onUpdate:modelValue","value-key","activeKey","onDelete"])))),256))]))};const Ne={props:["modelValue","class"],components:{aceEditor:R},computed:{text:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{}};Ne.render=function(e,t,n,o,a,d){const c=l("aceEditor");return s(),i(c,{modelValue:d.text,"onUpdate:modelValue":t[1]||(t[1]=e=>d.text=e),class:n.class},null,8,["modelValue","class"])};const be={props:["modelValue","class"],components:{aceEditor:R},data:()=>({aceEditorKey:0,itemMenuVisible:!1,newItemError:null,newItem:{},defaultItemSettings:{settingName:"name",material:"paper",cmd:null,name:null,lore:"&ftext\n&2Предмет_для_задания",questItemsunbreakable:!0}}),computed:{data:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{openMenu(){this.newItem=this.defaultItemSettings,this.itemMenuVisible=!0},createItem(){if(this.newItemError=null,this.data[this.newItem.settingName])return void(this.newItemError=this.$t("newitem-already-exists").replace("{settingName}",this.newItem.settingName));let e=`${this.newItem.material}`;if(this.newItem.cmd&&(e+=` custom-model-data:${this.newItem.cmd}`),this.newItem.name&&(e+=` name:${this.newItem.name}`),this.newItem.lore){e+=` lore:${this.newItem.lore.replaceAll(" ","_").replaceAll("\n",";")}`}this.newItem.questItemsunbreakable&&(e+=" quest_items_unbreakable:true"),this.data[this.newItem.settingName]=e,this.itemMenuVisible=!1,this.aceEditorKey+=1}}},Te={class:"menu-buttons"},Se=r("i",{class:"el-icon-plus el-icon--right"},null,-1),$e={class:"dialog-subsection"},Ue={class:"dialog-subsection"},Ae={class:"dialog-subsection"},we={class:"dialog-subsection"},Ve={class:"dialog-subsection"},Me={class:"dialog-subsection"},Qe={class:"dialog-footer"};be.render=function(e,t,n,o,a,d){const g=l("el-button"),f=l("el-affix"),h=l("aceEditor"),E=l("el-alert"),v=l("el-input"),y=l("el-checkbox"),N=l("el-dialog");return s(),i(p,null,[r(f,{offset:0},{default:c((()=>[r("div",Te,[r(g,{size:"mini",onClick:d.openMenu,class:"menu-button"},{default:c((()=>[Se,m(" "+u(e.$t("create-item")),1)])),_:1},8,["onClick"])])])),_:1}),r(h,{modelValue:d.data,"onUpdate:modelValue":t[1]||(t[1]=e=>d.data=e),class:n.class,key:a.aceEditorKey},null,8,["modelValue","class"]),r(N,{title:e.$t("create-item-dialog"),modelValue:a.itemMenuVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>a.itemMenuVisible=e),width:"30%","custom-class":"create-section-dialog","close-on-click-modal":!1},{footer:c((()=>[r("span",Qe,[r(g,{onClick:t[8]||(t[8]=e=>a.itemMenuVisible=!1)},{default:c((()=>[m(u(e.$t("cancel")),1)])),_:1}),r(g,{type:"primary",onClick:d.createItem},{default:c((()=>[m(u(e.$t("create")),1)])),_:1},8,["onClick"])])])),default:c((()=>[a.newItemError?(s(),i(E,{key:0,title:a.newItemError,type:"error"},null,8,["title"])):_("",!0),r("div",$e,[r("span",null,u(e.$t("newitem-settingName")),1),r(v,{modelValue:a.newItem.settingName,"onUpdate:modelValue":t[2]||(t[2]=e=>a.newItem.settingName=e)},null,8,["modelValue"])]),r("div",Ue,[r("span",null,u(e.$t("newitem-material")),1),r(v,{modelValue:a.newItem.material,"onUpdate:modelValue":t[3]||(t[3]=e=>a.newItem.material=e)},null,8,["modelValue"])]),r("div",Ae,[r("span",null,u(e.$t("newitem-cmd")),1),r(v,{modelValue:a.newItem.cmd,"onUpdate:modelValue":t[4]||(t[4]=e=>a.newItem.cmd=e)},null,8,["modelValue"])]),r("div",we,[r("span",null,u(e.$t("newitem-name")),1),r(v,{modelValue:a.newItem.name,"onUpdate:modelValue":t[5]||(t[5]=e=>a.newItem.name=e)},null,8,["modelValue"])]),r("div",Ve,[r("span",null,u(e.$t("newitem-lore")),1),r(v,{type:"textarea",autosize:{minRows:1,maxRows:20},modelValue:a.newItem.lore,"onUpdate:modelValue":t[6]||(t[6]=e=>a.newItem.lore=e)},null,8,["modelValue"])]),r("div",Me,[r(y,{modelValue:a.newItem.questItemsunbreakable,"onUpdate:modelValue":t[7]||(t[7]=e=>a.newItem.questItemsunbreakable=e)},{default:c((()=>[m(u(e.$t("newitem-quest-items-unbreakable")),1)])),_:1},8,["modelValue"])])])),_:1},8,["title","modelValue"])],64)};const xe={components:{aceEditor:R},props:["modelValue","subSectionName","sourceYaml"],data:()=>({sectionInfo:null,templateData:{},preview:!1,previewText:null,error:null,templateInfo:{},questerFrom:null,questerTo:null,questers:[],addToHologram:!0,addToFirst:!0,addCompass:!0}),computed:{projectData:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},created(){for(const[e,t]of Object.entries(this.projectData))if(t.conversations)for(const[n,o]of Object.entries(t.conversations))this.questers.push({quester:n,sectionKey:e});this.sectionInfo=this.projectData[this.subSectionName],this.templateInfo=e.load(this.sourceYaml).template_info;for(const[e,t]of Object.entries(this.templateInfo.variables))this.templateData[e]=t.default},methods:{togglePreview(){this.previewText=this.getFormattedYaml(),this.preview=!0},toggleEdit(){this.previewText=null,this.preview=!1},getFormattedYaml(){let e=this.sourceYaml;for(const[t,n]of Object.entries(this.templateData))e=e.replaceAll(t,n||"");return e},apply(){try{if(this.error=null,!this.questerFrom)return void(this.error=this.$t("no-quester"));let t=e.load(this.getFormattedYaml()),n=this.questerFrom.split(".")[1],o=this.questerFrom.split(".")[0];const a=this.projectData[o];if(a.conversations[n].NPC_options=Object.assign({},a.conversations[n].NPC_options,t.conversations.from.NPC_options),a.conversations[n].player_options=Object.assign({},a.conversations[n].player_options,t.conversations.from.player_options),a.events=Object.assign({},a.events,t.events),a.objectives=Object.assign({},a.events,t.objectives),a.conditions=Object.assign({},a.conditions,t.conditions),a.journal=Object.assign({},a.journal,t.journal),t.items&&(a.items=Object.assign({},a.journal,t.items)),a.main||(a.main={variables:{},npcs:{},compass:{}}),a.main.variables=Object.assign({},a.main.variables,t.main.variables),a.main.compass=Object.assign({},a.main.compass,t.main.compass),this.addToFirst){const e=a.conversations[n].first;if(e){let t=a.conversations[n].NPC_options[e].pointers;a.conversations[n].NPC_options[e].pointers=`option_${this.templateData.questName}_done,option_${this.templateData.questName}_start,${t}`}}if(this.addToHologram){let e=a.conditions[`cond_quest_avalible_${n}`];a.conditions[`cond_quest_avalible_${n}`]=`${e},cond_${this.templateData.questName}_icon1`}if(this.templateInfo.settings.secondNpc){if(!this.questerTo)return void(this.error=this.$t("no-quester-to"));let e=this.questerTo.split(".")[1],n=this.questerTo.split(".")[0];const o=this.projectData[n];if(o.conversations[e].NPC_options=Object.assign({},o.conversations[e].NPC_options,t.conversations.to.NPC_options),o.conversations[e].player_options=Object.assign({},o.conversations[e].player_options,t.conversations.to.player_options),this.addToFirst){const t=o.conversations[e].first;if(t){let n=o.conversations[e].NPC_options[t].pointers;o.conversations[e].NPC_options[t].pointers=`option_${this.templateData.questName}_done,${n}`}}if(this.addToHologram){let t=o.conditions[`cond_quest_progress_${e}`];t&&(o.conditions[`cond_quest_progress_${e}`]=`${t},{sectionQuesterFrom}.cond_${this.templateData.questName}_icon2`);let n=o.conditions[`cond_quest_done_${e}`];n&&(o.conditions[`cond_quest_done_${e}`]=`${n},{sectionQuesterFrom}.cond_${this.templateData.questName}_icon3`)}}this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("template-applyed")}),this.$emit("close")}catch(t){let e=t;"YAMLException"===t.name&&(e=t.message),this.error=e}}}},ke={key:0},Ie={class:"menu-buttons"},qe={class:"right-section"},Ce={key:1},je={class:"menu-buttons"};xe.render=function(e,t,n,o,a,g){const f=l("el-button"),h=l("el-alert"),E=l("el-col"),v=l("el-option"),y=l("el-select"),N=l("el-row"),b=l("el-divider"),T=l("el-tooltip"),S=l("el-input"),$=l("el-checkbox"),U=l("aceEditor");return a.preview?(s(),i("div",Ce,[r("div",je,[r(f,{size:"mini",class:"menu-button",onClick:g.toggleEdit},{default:c((()=>[m(u(e.$t("return-to-edit")),1)])),_:1},8,["onClick"])]),r(U,{readonly:!0,raw:!0,modelValue:a.previewText,"onUpdate:modelValue":t[6]||(t[6]=e=>a.previewText=e),class:"yaml-conversation yaml-editor"},null,8,["modelValue"])])):(s(),i("div",ke,[r("div",Ie,[r(f,{size:"mini",class:"menu-button",onClick:g.togglePreview},{default:c((()=>[m(u(e.$t("preview")),1)])),_:1},8,["onClick"])]),a.error?(s(),i(h,{key:0,title:a.error,class:"template-error",type:"error"},null,8,["title"])):_("",!0),r(N,{class:"template-setting"},{default:c((()=>[r(E,{span:6,class:"field-name"},{default:c((()=>[m(u(e.$t("template-quest-select-from"))+":",1)])),_:1}),r(E,{span:18,class:"field-editor"},{default:c((()=>[r(y,{modelValue:a.questerFrom,"onUpdate:modelValue":t[1]||(t[1]=e=>a.questerFrom=e),placeholder:" "},{default:c((()=>[(s(!0),i(p,null,d(a.questers,(e=>(s(),i(v,{key:`from_${e.quester}`,label:`${e.sectionKey}.${e.quester}`,value:`${e.sectionKey}.${e.quester}`},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),a.templateInfo.settings.secondNpc?(s(),i(N,{key:1,class:"template-setting"},{default:c((()=>[r(E,{span:6,class:"field-name"},{default:c((()=>[m(u(e.$t("template-quest-select-to"))+":",1)])),_:1}),r(E,{span:18,class:"field-editor"},{default:c((()=>[r(y,{modelValue:a.questerTo,"onUpdate:modelValue":t[2]||(t[2]=e=>a.questerTo=e),placeholder:" "},{default:c((()=>[(s(!0),i(p,null,d(a.questers,(e=>(s(),i(v,{key:`to_${e.quester}`,label:`${e.sectionKey}.${e.quester}`,value:`${e.sectionKey}.${e.quester}`},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})):_("",!0),r(b),(s(!0),i(p,null,d(a.templateInfo.variables,((t,n)=>(s(),i(N,{class:"template-setting"},{default:c((()=>[r(T,{effect:"light",placement:"left",content:n},{default:c((()=>[r(E,{span:6,class:"field-name"},{default:c((()=>[m(u(t.title[e.$root.settings.language])+":",1)])),_:2},1024)])),_:2},1032,["content"]),r(E,{span:18},{default:c((()=>[r(S,{class:"small-editor",type:"textarea",autosize:{minRows:1,maxRows:20},modelValue:a.templateData[n],"onUpdate:modelValue":e=>a.templateData[n]=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),256)),r(b),r(N,{class:"template-setting"},{default:c((()=>[r($,{modelValue:a.addToHologram,"onUpdate:modelValue":t[3]||(t[3]=e=>a.addToHologram=e)},{default:c((()=>[m(u(e.$t("template-add-to-hologram-conditions")),1)])),_:1},8,["modelValue"])])),_:1}),r(N,{class:"template-setting"},{default:c((()=>[r($,{modelValue:a.addToFirst,"onUpdate:modelValue":t[4]||(t[4]=e=>a.addToFirst=e)},{default:c((()=>[m(u(e.$t("template-add-to-first-message")),1)])),_:1},8,["modelValue"])])),_:1}),r(N,{class:"template-setting"},{default:c((()=>[r($,{modelValue:a.addCompass,"onUpdate:modelValue":t[5]||(t[5]=e=>a.addCompass=e)},{default:c((()=>[m(u(e.$t("template-add-compass")),1)])),_:1},8,["modelValue"])])),_:1}),r("div",qe,[r(f,{type:"success",onClick:g.apply},{default:c((()=>[m(u(e.$t("apply")),1)])),_:1},8,["onClick"])])]))};const Le={components:{templateComponent:xe},props:["modelValue","subSectionName"],data:()=>({templateTabSelected:null,templatesYamls:["conversations:\n  from:\n    NPC_options:\n      message_QUESTNAME_start:\n        text:\n          LANGSLUG: 'QUESTNPCOPTION1\\n\\n&6Необходимый уровень REQUIEDLEVEL\\n\\n&2Награда:\\n✦ $QUESTNAME_exp$ опыта\\n■ $QUESTNAME_money$ монет&0---'\n        pointers: option_QUESTNAME_yes, option_no\n      message_QUESTNAME_yes:\n        text: \n          LANGSLUG: 'QUESTNPCOPTION2'\n        event: event_QUESTNAME_start\n        pointers: option_ok\n      message_QUESTNAME_done:\n        text: \n          LANGSLUG: 'QUESTNPCOPTION3'\n        event: event_QUESTNAME_paid\n        pointers: option_ok\n\n    player_options:\n      option_QUESTNAME_start:\n        text: \n          LANGSLUG: 'QUESTPLAYEROPTION1'\n        conditions: '!cond_QUESTNAME_started'\n        pointers: message_QUESTNAME_start\n      option_QUESTNAME_yes:\n        text: \n          LANGSLUG: 'QUESTPLAYEROPTION2'\n        conditions: 'default.cond_level_REQUIEDLEVEL'\n        pointers: message_QUESTNAME_yes\n      option_QUESTNAME_done:\n        text:\n          LANGSLUG: 'QUESTPLAYEROPTION3'\n        conditions: 'cond_QUESTNAME_done,!cond_QUESTNAME_paid'\n        pointers: message_QUESTNAME_done\n\nevents:\n  event_QUESTNAME_start: |-\n    run\n    ^ journal add j_QUESTNAME_started\n    ^ tag add tag_QUESTNAME_started\n    ^ notify &2Вы начали квест &A$QUESTNAME_name$ category:start_quest\n    ^ compass add compass_QUESTNAME\n    ^ objective start obj_QUESTNAME\n\n  event_QUESTNAME_done: |-\n    run\n    ^ journal delete j_QUESTNAME_started\n    ^ journal add j_QUESTNAME_done\n    ^ tag add tag_QUESTNAME_done\n    ^ folder default.event_task_done\n    ^ folder default.totem_task_completed\n\n  event_QUESTNAME_paid: |-\n    run\n    ^ journal delete j_QUESTNAME_done\n    ^ tag add tag_QUESTNAME_paid\n    ^ command mmocore admin exp give %player% main $QUESTNAME_exp$\n    ^ notify &eВы получили &6$QUESTNAME_exp$ &eопыта category:reward\n    ^ money $QUESTNAME_money$ notify\n    ^ notify &2Вы закончили квест &A$QUESTNAME_name$ category:end_quest\n    ^ take QUESTNAME_item notify\n    ^ compass del compass_QUESTNAME\n\nconditions:\n  cond_QUESTNAME_icon1: and !cond_QUESTNAME_started\n  cond_QUESTNAME_icon2: and cond_QUESTNAME_started,!cond_QUESTNAME_done\n  cond_QUESTNAME_icon3: and cond_QUESTNAME_done,!cond_QUESTNAME_paid\n\n  cond_QUESTNAME_started: tag tag_QUESTNAME_started\n  cond_QUESTNAME_done: tag tag_QUESTNAME_done\n  cond_QUESTNAME_paid: tag tag_QUESTNAME_paid\n\njournal:\n  j_QUESTNAME_started:\n    LANGSLUG: 'JOURNALSTART'\n  j_QUESTNAME_done:\n    LANGSLUG: 'JOURNALDONE'\n\nmain:\n  variables:\n    QUESTNAME_name: 'QUESTREADABLENAME'\n    QUESTNAME_exp: EXPREWARD\n    QUESTNAME_money: MONEYREWARD\n  compass:\n    compass_QUESTNAME:\n      name:\n        ru: COMPASSNAME\n      location: COMPASSLOCATION\n      item: compass_button\n\nobjectives:\n  obj_QUESTNAME: OBJECTIVE\n\ntemplate_info:\n  title:\n    en: Objective template\n    ru: Шаблон простого задания\n\n  settings:\n    secondNpc: false\n\n  variables:\n    LANGSLUG:\n      title:\n        en: Language\n        ru: Язык\n      default: en\n\n    OBJECTIVE:\n      title:\n        en: Objective\n        ru: Задание\n      default: 'mmobkill MobName amount:1 notify events:event_QUESTNAME_done'\n\n    QUESTNAME:\n      title:\n        en: Quest name for system\n        ru: Название квеста для системы\n      default: example\n        \n    QUESTREADABLENAME:\n      title:\n        en: Readable Quest name\n        ru: Читаемое название квеста\n      default: Example quest\n        \n    EXPREWARD:\n      title:\n        en: Exp reward\n        ru: Размер опыта за выполнение\n      default: 200\n\n    MONEYREWARD:\n      title:\n        en: Money reward\n        ru: Монеты за выполнение\n      default: 1000\n\n    REQUIEDLEVEL:\n      title:\n        en: Required level\n        ru: Необходимый лвл для выполнения\n      default: 10\n\n    QUESTPLAYEROPTION1:\n      title:\n        en: Player message\n        ru: Вопрос к NPC\n      default: '$default.quest_prefix$Hi!'\n\n    QUESTNPCOPTION1:\n      title:\n        en: Quest text\n        ru: Текст просмотра квеста\n      default: 'Hello, do the quest for the glory of example!'\n\n    QUESTPLAYEROPTION2:\n      title:\n        en: Agreement from player\n        ru: Соглашение выполнить квест\n      default: '$default.quest_yes_prefix$Okay, I will.'\n\n    QUESTNPCOPTION2:\n      title:\n        en: Text after player confirm\n        ru: Текст после подтверждения\n      default: 'Go and do it!'\n\n    QUESTPLAYEROPTION3:\n      title:\n        en: Message about quest complete\n        ru: Сообщение об выполненном квесте\n      default: '$default.quest_done_prefix$I did what you told'\n\n    QUESTNPCOPTION3:\n      title:\n        en: NPC thanks\n        ru: Благодарность от NPC\n      default: 'Thank you!'\n\n    JOURNALSTART:\n      title:\n        en: Journal note about quest start\n        ru: Запись в журнале о задаче квеста\n      default: 'Started.'\n\n    JOURNALDONE:\n      title:\n        en: Journal note about quest end\n        ru: Запись в журнале о завешении квеста\n      default: 'Done.'\n","conversations:\n  from:\n    NPC_options:\n      message_QUESTNAME_start:\n        text:\n          LANGSLUG: 'QUESTNPCOPTION1\\n\\n&6Необходимый уровень REQUIEDLEVEL\\n\\n&2Награда:\\n✦ $QUESTNAME_exp$ опыта\\n■ $QUESTNAME_money$ монет&0---'\n        pointers: option_QUESTNAME_yes, option_no\n      message_QUESTNAME_yes:\n        text: \n          LANGSLUG: 'QUESTNPCOPTION2'\n        event: event_QUESTNAME_start\n        pointers: option_ok\n      message_QUESTNAME_done:\n        text: \n          LANGSLUG: 'QUESTNPCOPTION3'\n        event: event_QUESTNAME_paid\n        pointers: option_ok\n\n    player_options:\n      option_QUESTNAME_start:\n        text: \n          LANGSLUG: 'QUESTPLAYEROPTION1'\n        conditions: '!cond_QUESTNAME_started'\n        pointers: message_QUESTNAME_start\n      option_QUESTNAME_yes:\n        text: \n          LANGSLUG: 'QUESTPLAYEROPTION2'\n        conditions: 'cond_level_REQUIEDLEVEL'\n        pointers: message_QUESTNAME_yes\n      option_QUESTNAME_done:\n        text:\n          LANGSLUG: 'QUESTPLAYEROPTION3'\n        conditions: 'cond_QUESTNAME_done,!cond_QUESTNAME_paid'\n        pointers: message_QUESTNAME_done\n\nevents:\n  event_QUESTNAME_start: |-\n    run\n    ^ journal add j_QUESTNAME_started\n    ^ tag add tag_QUESTNAME_started\n    ^ notify &2Вы начали квест &a$QUESTNAME_name$ category:start_quest\n\n  event_QUESTNAME_give_item: give item_QUESTNAME notify\n\n  event_QUESTNAME_paid: |-\n    run\n    ^ journal delete j_QUESTNAME_started\n    ^ tag add tag_QUESTNAME_paid\n    ^ run ^command mmocore admin exp give %player% main $QUESTNAME_exp$ ^notify &eВы получили &6$QUESTNAME_exp$ &eопыта category:reward\n    ^ money $QUESTNAME_money$ notify\n    ^ notify &2Вы закончили квест &a$QUESTNAME_name$ category:end_quest\n    ^ take item_QUESTNAME notify\n\nconditions:\n  cond_QUESTNAME_icon1: and cond_level_REQUIEDLEVEL,!cond_QUESTNAME_started\n  cond_QUESTNAME_icon2: and cond_QUESTNAME_started,!cond_QUESTNAME_done,!cond_QUESTNAME_paid\n  cond_QUESTNAME_icon3: and cond_QUESTNAME_done,!cond_QUESTNAME_paid\n\n  cond_QUESTNAME_started: tag tag_QUESTNAME_started\n  cond_QUESTNAME_item: item item_QUESTNAME\n  cond_QUESTNAME_done: and cond_QUESTNAME_started,cond_QUESTNAME_item\n  cond_QUESTNAME_paid: tag tag_QUESTNAME_paid\n\nitems:\n  item_QUESTNAME: ITEMSETTING\n\njournal:\n  j_QUESTNAME_started:\n    LANGSLUG: 'JOURNALSTART'\n\nmain:\n  variables:\n    QUESTNAME_name: 'QUESTREADABLENAME'\n    QUESTNAME_exp: EXPREWARD\n    QUESTNAME_money: MONEYREWARD\n\nobjectives:\n  obj_QUESTNAME: ITEMOBJECTIVE events:event_QUESTNAME_give_item range:2 global\n\ntemplate_info:\n  title:\n    en: Quest bring item\n    ru: Задание принести предмет\n\n  settings:\n    secondNpc: false\n\n  variables:\n    LANGSLUG:\n      title:\n        en: Language\n        ru: Язык\n      default: en\n\n    QUESTNAME:\n      title:\n        en: Quest name for system\n        ru: Название квеста для системы\n      default: example\n        \n    QUESTREADABLENAME:\n      title:\n        en: Readable Quest name\n        ru: Читаемое название квеста\n      default: Example quest\n        \n    EXPREWARD:\n      title:\n        en: Exp reward\n        ru: Размер опыта за выполнение\n      default: 200\n\n    MONEYREWARD:\n      title:\n        en: Money reward\n        ru: Монеты за выполнение\n      default: 1000\n\n    REQUIEDLEVEL:\n      title:\n        en: Required level\n        ru: Необходимый лвл для выполнения\n      default: 10\n\n    QUESTPLAYEROPTION1:\n      title:\n        en: Player message\n        ru: Вопрос к NPC\n      default: '$default.quest_prefix$Hi!'\n\n    QUESTNPCOPTION1:\n      title:\n        en: Quest text\n        ru: Текст просмотра квеста\n      default: 'Hello, do the quest for the glory of example!'\n\n    QUESTPLAYEROPTION2:\n      title:\n        en: Agreement from player\n        ru: Соглашение выполнить квест\n      default: '$default.quest_yes_prefix$Okay, I will.'\n\n    QUESTNPCOPTION2:\n      title:\n        en: Text after player confirm\n        ru: Текст после подтверждения\n      default: 'Go and do it!'\n\n    QUESTPLAYEROPTION3:\n      title:\n        en: Message about quest complete\n        ru: Сообщение об выполненном квесте\n      default: '$default.quest_done_prefix$I did what you told'\n\n    QUESTNPCOPTION3:\n      title:\n        en: NPC thanks\n        ru: Благодарность от NPC\n      default: 'Thank you!'\n\n    JOURNALSTART:\n      title:\n        en: Journal note about quest start\n        ru: Запись в журнале о задаче квеста\n      default: 'Started.'\n\n    ITEMSETTING:\n      title:\n        en: Item setting\n        ru: Настройка предмета\n      default: 'paper custom-model-data:330 name:&fItem_name lore:&7Item;&7description_space;&2Предмет_для_задания quest_items_unbreakable:true'\n\n    ITEMOBJECTIVE:\n      title:\n        en: Item recieve objective\n        ru: Задание получения предмета\n      default: 'action right item_name loc:-100;64;-100;world_rpg'\n","conversations:\n  from:\n    NPC_options:\n      message_QUESTNAME_start:\n        text:\n          LANGSLUG: 'QUESTNPCOPTION1\\n\\n&6Необходимый уровень REQUIEDLEVEL\\n\\n&2Награда:\\n✦ $QUESTNAME_exp$ опыта\\n■ $QUESTNAME_money$ монет&0---'\n        pointers: option_QUESTNAME_yes, option_no\n      message_QUESTNAME_yes:\n        text: \n          LANGSLUG: 'QUESTNPCOPTION2'\n        event: event_QUESTNAME_start\n        pointers: option_ok\n\n    player_options:\n      option_QUESTNAME_start:\n        text: \n          LANGSLUG: 'QUESTPLAYEROPTION1'\n        conditions: '!cond_QUESTNAME_started'\n        pointers: message_QUESTNAME_start\n      option_QUESTNAME_yes:\n        text: \n          LANGSLUG: 'QUESTPLAYEROPTION2'\n        conditions: 'default.cond_level_REQUIEDLEVEL'\n        pointers: message_QUESTNAME_yes\n\n  to:\n    NPC_options:\n      message_QUESTNAME_done:\n        text:\n          LANGSLUG: 'QUESTNPCOPTION3'\n        event: SECTIONQUESTERFROM.event_QUESTNAME_paid\n        pointers: option_ok\n\n    player_options:\n      option_QUESTNAME_done:\n        text:\n          LANGSLUG: 'QUESTPLAYEROPTION3'\n        conditions: 'SECTIONQUESTERFROM.cond_QUESTNAME_started,!SECTIONQUESTERFROM.cond_QUESTNAME_paid'\n        pointers: message_QUESTNAME_done\n\nevents:\n  event_QUESTNAME_start: |-\n    run\n    ^ journal add j_QUESTNAME_started\n    ^ tag add tag_QUESTNAME_started\n    ^ notify &2Вы начали квест &a$QUESTNAME_name$ category:default.start_quest\n    ^ compass add compass_QUESTNAME\n\n  event_QUESTNAME_paid: |-\n    run\n    ^ journal delete j_QUESTNAME_started\n    ^ tag add tag_QUESTNAME_paid\n    ^ run ^command mmocore admin exp give %player% main $QUESTNAME_exp$ ^notify &eВы получили &6$QUESTNAME_exp$ &eопыта category:default.reward\n    ^ money $QUESTNAME_money$ notify\n    ^ notify &2Вы закончили квест &a$QUESTNAME_name$ category:default.end_quest\n    ^ compass del compass_QUESTNAME\n\nconditions:\n  cond_QUESTNAME_icon1: and default.cond_level_REQUIEDLEVEL,!cond_QUESTNAME_started\n  cond_QUESTNAME_icon2: and cond_QUESTNAME_started,!cond_QUESTNAME_paid\n  cond_QUESTNAME_icon3: and cond_QUESTNAME_icon2\n\n  cond_QUESTNAME_started: tag tag_QUESTNAME_started\n  cond_QUESTNAME_paid: tag tag_QUESTNAME_paid\n\njournal:\n  j_QUESTNAME_started:\n    LANGSLUG: 'JOURNALSTART'\n\nmain:\n  variables:\n    QUESTNAME_name: 'QUESTREADABLENAME'\n    QUESTNAME_exp: EXPREWARD\n    QUESTNAME_money: MONEYREWARD\n  compass:\n    compass_QUESTNAME:\n      name:\n        ru: COMPASSNAME\n      location: COMPASSLOCATION\n      item: compass_button\n\ntemplate_info:\n  title:\n    en: Move from npc to npc\n    ru: Переходный квест между npc\n\n  settings:\n    secondNpc: true\n\n  variables:\n    LANGSLUG:\n      title:\n        en: Language\n        ru: Язык\n      default: en\n\n    QUESTNAME:\n      title:\n        en: Quest name for system\n        ru: Название квеста для системы\n      default: example\n        \n    QUESTREADABLENAME:\n      title:\n        en: Readable Quest name\n        ru: Читаемое название квеста\n      default: Example quest\n        \n    EXPREWARD:\n      title:\n        en: Exp reward\n        ru: Размер опыта за выполнение\n      default: 200\n\n    MONEYREWARD:\n      title:\n        en: Money reward\n        ru: Монеты за выполнение\n      default: 1000\n\n    REQUIEDLEVEL:\n      title:\n        en: Required level\n        ru: Необходимый лвл для выполнения\n      default: 10\n\n    QUESTPLAYEROPTION1:\n      title:\n        en: Player message\n        ru: Вопрос к NPC\n      default: '$default.quest_prefix$Hi!'\n\n    QUESTNPCOPTION1:\n      title:\n        en: Quest text\n        ru: Текст просмотра квеста\n      default: 'Hello, do the quest for the glory of example!'\n\n    QUESTPLAYEROPTION2:\n      title:\n        en: Agreement from player\n        ru: Соглашение выполнить квест\n      default: '$default.quest_yes_prefix$Okay, I will.'\n\n    QUESTNPCOPTION2:\n      title:\n        en: Text after player confirm\n        ru: Текст после подтверждения\n      default: 'Go and do it!'\n\n    QUESTPLAYEROPTION3:\n      title:\n        en: Message about quest complete\n        ru: Сообщение об выполненном квесте\n      default: '$default.quest_done_prefix$I did what you told'\n\n    QUESTNPCOPTION3:\n      title:\n        en: NPC thanks\n        ru: Благодарность от NPC\n      default: 'Thank you!'\n\n    JOURNALSTART:\n      title:\n        en: Journal note about quest start\n        ru: Запись в журнале о задаче квеста\n      default: 'Started.'\n\n    COMPASSNAME:\n      title:\n        en: Compass name\n        ru: Название компаса\n      default: Target\n\n    COMPASSLOCATION:\n      title:\n        en: Compass location\n        ru: Локация компаса\n      default: '100;66;100;world_rpg'\n"],templates:[]}),computed:{projectData:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},created(){for(const n of this.templatesYamls)try{const t=e.load(n);console.log(t);const o=t.template_info;this.templates.push({label:o.title[this.$root.settings.language],yaml:n})}catch(t){let e=t;"YAMLException"===t.name&&(e=t.message),console.error("Error with load template:",e)}this.templateTabSelected=this.templates[0].label}};Le.render=function(e,t,n,o,a,m){const u=l("templateComponent"),_=l("el-tab-pane"),g=l("el-tabs");return s(),i(g,{"tab-position":"left",modelValue:a.templateTabSelected,"onUpdate:modelValue":t[2]||(t[2]=e=>a.templateTabSelected=e),class:"template-tabs"},{default:c((()=>[(s(!0),i(p,null,d(a.templates,(e=>(s(),i(_,{label:e.label,name:e.label,key:e.label},{default:c((()=>[r(u,{modelValue:m.projectData,"onUpdate:modelValue":t[1]||(t[1]=e=>m.projectData=e),"source-yaml":e.yaml,"sub-section-name":n.subSectionName},null,8,["modelValue","source-yaml","sub-section-name"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])};const Oe={components:{conversation:z,simpleSection:fe,yamlEditor:Ne,templateView:Le,itemsEditor:be},props:["modelValue","projectData","subSectionName"],data:()=>({addVisible:!1,newNameError:null,newName:"",newNPCID:null,newNPCholograms:!1,dialogSelected:null,menuSelected:null,newMode:null,sectionSelected:"dialogs",templateDialogVisible:!1,loadedDialogsections:{}}),computed:{sectionInfo:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{templateOpen(){this.templateDialogVisible=!0},createTemplate(){this.templateDialogVisible=!1},removeDialogSection(e){this.$confirm(this.$t("delete-section").replace("{tab}",e),this.$t("confirm"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((()=>{delete this.projectData[e],this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("tab-deleted").replace("{tab}",e)})}))},addDialog(){if(this.newName.length<=0)this.newNameError=this.$t("empty-title");else{if(this.sectionInfo.conversations||(this.sectionInfo.conversations={}),"dialog"===this.newMode){if(this.sectionInfo.conversations[this.newName])return void(this.newNameError=this.$t("dialog-exists").replace("{newName}",this.newName));if(!this.newName.match(/^[a-z0-9_]+$/))return void(this.newNameError=this.$t("exists-regex"));if(this.newNPCID&&!this.newNPCID.match(/^[0-9]+$/))return void(this.newNameError=this.$t("id-only-numbers"));!function(t,n,o,a,l){t.conversations||(t.conversations={});const s="npc_holograms:\n  quest_avalible_{npcName}:\n    lines:\n      - item:default.quest_avalible\n    vector: 0;3.2;0\n    npcs:\n      - {npcID}\n    conditions: cond_quest_avalible_{npcName},!cond_quest_progress_{npcName},!cond_quest_done_{npcName}\n  quest_progress_{npcName}:\n    lines:\n      - item:default.quest_progress\n    vector: 0;3.2;0\n    npcs:\n      - {npcID}\n    conditions: cond_quest_progress_{npcName},!cond_quest_done_{npcName}\n  quest_done_{npcName}:\n    lines:\n      - item:default.quest_done\n    vector: 0;3.2;0\n    npcs:\n      - {npcID}\n    conditions: cond_quest_done_{npcName}\n\nconditions:\n  cond_quest_avalible_{npcName}: and cond_false\n  cond_quest_progress_{npcName}: and cond_false\n  cond_quest_done_{npcName}: and cond_false\n\nconversations:\n  quester:\n    {langSlug}: {npcName}\n  first: message_start\n  stop: 'false'\n  NPC_options:\n    message_start:\n      text:\n        {langSlug}: Привет.\n      pointers: option_bye\n  player_options:\n    option_ok:\n      text:\n        {langSlug}: Я понял\n      pointers: message_start\n    option_no:\n      text:\n        {langSlug}: $default.quest_no_prefix$Может позже.\n      pointers: message_start\n    option_bye:\n      text:\n        {langSlug}: $default.quest_exit$До свидания\n".replaceAll("{npcName}",n).replaceAll("{npcID}",o).replaceAll("{langSlug}",l),i=e.load(s);t.conversations[n]=i.conversations,o&&(t.main.npcs[o]=n,t.custom||(t.custom={npc_holograms:{check_interval:100}}),a&&(t.custom.npc_holograms=Object.assign({},t.custom.npc_holograms,i.npc_holograms)),a&&(t.conditions=Object.assign({},t.conditions,i.conditions)))}(this.sectionInfo,this.newName,this.newNPCID,this.newNPCholograms,this.$root.settings.language),this.dialogSelected=this.newName,this.newNPCID=null,this.newNPCholograms=!1,this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-section-created").replace("{newName}",this.newName)})}else if("menu"===this.newMode){if(this.sectionInfo.menus||(sectionInfo.menus={}),sectionInfo.menus[this.newName])return void(this.newNameError=this.$t("menu-section-exists").replace("{newName}",this.newName));sectionInfo.menus||(sectionInfo.menus={}),sectionInfo.menus[this.newName]={},this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("menu-section-created").replace("{newName}",this.newName)})}this.newName=null,this.includeExample=!1,this.addVisible=!1,this.newNameError=null,this.newMode=null}},removeDialogSection(e){this.$confirm(this.$t("delete-dialog-section"),this.$t("delete"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((()=>{delete this.sectionInfo.conversations[e],this.$message({type:"success",dangerouslyUseHTMLString:!0,message:this.$t("dialog-section-deleted").replace("{section}",e)})}))},openNew(e){this.includeExample=!1,this.newMode=e,this.newName="",this.addVisible=!0},closeTemplate(){this.templateDialogVisible=!1},dialogSectionSelect(e,t){this.loadedDialogsections[e.paneName]=!0}}},De=r("i",{class:"el-icon-chat-line-round"},null,-1),Pe={class:"menu-buttons"},Re={class:"dialogs-tabs"},ze=r("i",{class:"el-icon-s-grid"},null,-1),Fe={class:"menu-buttons"},Ge={class:"dialogs-tabs"},Ye=r("i",{class:"el-icon-setting"},null,-1),He=r("i",{class:"el-icon-magic-stick"},null,-1),Be=r("i",{class:"el-icon-lock"},null,-1),Ke=r("i",{class:"el-icon-document-checked"},null,-1),Je=r("i",{class:"el-icon-shopping-bag-2"},null,-1),We=r("i",{class:"el-icon-tickets"},null,-1),Ze=r("i",{class:"el-icon-more-outline"},null,-1),Xe={class:"dialog-subsection"},et={key:1,class:"dialog-subsection"},tt={key:2,class:"dialog-subsection"},nt={class:"dialog-footer"};Oe.render=function(e,t,n,o,a,g){const f=l("el-button"),h=l("conversation"),E=l("el-tab-pane"),v=l("el-tabs"),y=l("yamlEditor"),N=l("itemsEditor"),b=l("el-alert"),T=l("el-input"),S=l("el-checkbox"),$=l("el-dialog"),U=l("templateView");return s(),i(p,null,[r(v,{"tab-position":"left",modelValue:a.sectionSelected,"onUpdate:modelValue":t[12]||(t[12]=e=>a.sectionSelected=e),class:"section-tabs",onTabRemove:g.removeDialogSection},{default:c((()=>[r(E,{name:"dialogs"},{label:c((()=>[r("span",null,[m(u(e.$t("dialogs"))+" ",1),De])])),default:c((()=>[r("div",Pe,[r(f,{size:"mini",onClick:t[1]||(t[1]=e=>g.openNew("dialog")),class:"menu-button",icon:"el-icon-plus"},{default:c((()=>[m(u(e.$t("add-dialog-section")),1)])),_:1}),r(f,{size:"mini",onClick:g.templateOpen,class:"menu-button",icon:"el-icon-document-add",type:"primary",plain:""},{default:c((()=>[m(u(e.$t("template-create")),1)])),_:1},8,["onClick"])]),r("div",Re,[r(v,{"tab-position":"left",modelValue:a.dialogSelected,"onUpdate:modelValue":t[2]||(t[2]=e=>a.dialogSelected=e),closable:!0,onTabRemove:g.removeDialogSection,onTabClick:g.dialogSectionSelect},{default:c((()=>[(s(!0),i(p,null,d(g.sectionInfo.conversations,((e,t)=>(s(),i(E,{label:t,name:t,key:t},{default:c((()=>[a.loadedDialogsections[t]?(s(),i(h,{key:0,modelValue:g.sectionInfo.conversations[t],"onUpdate:modelValue":e=>g.sectionInfo.conversations[t]=e,"dialog-section-name":t,"project-data":n.projectData,"sub-section-name":n.subSectionName},null,8,["modelValue","onUpdate:modelValue","dialog-section-name","project-data","sub-section-name"])):_("",!0)])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue","onTabRemove","onTabClick"])])])),_:1}),r(E,null,{label:c((()=>[r("span",null,[m(u(e.$t("menus"))+" ",1),ze])])),default:c((()=>[r("div",Fe,[r(f,{size:"mini",onClick:t[3]||(t[3]=e=>g.openNew("menu")),class:"menu-button"},{default:c((()=>[m(u(e.$t("add-menu")),1)])),_:1})]),r("div",Ge,[r(v,{"tab-position":"left",modelValue:a.menuSelected,"onUpdate:modelValue":t[4]||(t[4]=e=>a.menuSelected=e)},{default:c((()=>[(s(!0),i(p,null,d(g.sectionInfo.menus,((e,t)=>(s(),i(E,{label:t,name:t,key:t},{default:c((()=>[r(y,{modelValue:g.sectionInfo.menus[t],"onUpdate:modelValue":e=>g.sectionInfo.menus[t]=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])])),_:1}),r(E,{name:"main"},{label:c((()=>[r("span",null,[m(u(e.$t("main"))+" ",1),Ye])])),default:c((()=>["main"===a.sectionSelected?(s(),i(y,{key:0,modelValue:g.sectionInfo.main,"onUpdate:modelValue":t[5]||(t[5]=e=>g.sectionInfo.main=e)},null,8,["modelValue"])):_("",!0)])),_:1}),r(E,{name:"events"},{label:c((()=>[r("span",null,[m(u(e.$t("events"))+" ",1),He])])),default:c((()=>["events"===a.sectionSelected?(s(),i(y,{key:0,modelValue:g.sectionInfo.events,"onUpdate:modelValue":t[6]||(t[6]=e=>g.sectionInfo.events=e)},null,8,["modelValue"])):_("",!0)])),_:1}),r(E,{name:"conditions"},{label:c((()=>[r("span",null,[m(u(e.$t("conditions"))+" ",1),Be])])),default:c((()=>["conditions"===a.sectionSelected?(s(),i(y,{key:0,modelValue:g.sectionInfo.conditions,"onUpdate:modelValue":t[7]||(t[7]=e=>g.sectionInfo.conditions=e)},null,8,["modelValue"])):_("",!0)])),_:1}),r(E,{name:"objectives"},{label:c((()=>[r("span",null,[m(u(e.$t("objectives"))+" ",1),Ke])])),default:c((()=>["objectives"===a.sectionSelected?(s(),i(y,{key:0,modelValue:g.sectionInfo.objectives,"onUpdate:modelValue":t[8]||(t[8]=e=>g.sectionInfo.objectives=e)},null,8,["modelValue"])):_("",!0)])),_:1}),r(E,{name:"items"},{label:c((()=>[r("span",null,[m(u(e.$t("items"))+" ",1),Je])])),default:c((()=>["items"===a.sectionSelected?(s(),i(N,{key:0,modelValue:g.sectionInfo.items,"onUpdate:modelValue":t[9]||(t[9]=e=>g.sectionInfo.items=e)},null,8,["modelValue"])):_("",!0)])),_:1}),r(E,{name:"journal"},{label:c((()=>[r("span",null,[m(u(e.$t("journal"))+" ",1),We])])),default:c((()=>["journal"===a.sectionSelected?(s(),i(y,{key:0,modelValue:g.sectionInfo.journal,"onUpdate:modelValue":t[10]||(t[10]=e=>g.sectionInfo.journal=e)},null,8,["modelValue"])):_("",!0)])),_:1}),r(E,{name:"custom"},{label:c((()=>[r("span",null,[m(u(e.$t("custom"))+" ",1),Ze])])),default:c((()=>["custom"===a.sectionSelected?(s(),i(y,{key:0,modelValue:g.sectionInfo.custom,"onUpdate:modelValue":t[11]||(t[11]=e=>g.sectionInfo.custom=e)},null,8,["modelValue"])):_("",!0)])),_:1})])),_:1},8,["modelValue","onTabRemove"]),r($,{title:e.$t("create-subsection"),modelValue:a.addVisible,"onUpdate:modelValue":t[17]||(t[17]=e=>a.addVisible=e),width:"30%","custom-class":"create-section-dialog","close-on-click-modal":!1},{footer:c((()=>[r("span",nt,[r(f,{onClick:t[16]||(t[16]=e=>a.addVisible=!1)},{default:c((()=>[m(u(e.$t("cancel")),1)])),_:1}),r(f,{type:"primary",onClick:g.addDialog},{default:c((()=>[m(u(e.$t("create")),1)])),_:1},8,["onClick"])])])),default:c((()=>[a.newNameError?(s(),i(b,{key:0,title:a.newNameError,type:"error"},null,8,["title"])):_("",!0),r("div",Xe,[r("span",null,u(e.$t("dialog-section-name")),1),r(T,{modelValue:a.newName,"onUpdate:modelValue":t[13]||(t[13]=e=>a.newName=e)},null,8,["modelValue"])]),"dialog"===a.newMode?(s(),i("div",et,[r("span",null,u(e.$t("dialog-quester-npc-id")),1),r(T,{modelValue:a.newNPCID,"onUpdate:modelValue":t[14]||(t[14]=e=>a.newNPCID=e)},null,8,["modelValue"])])):_("",!0),"dialog"===a.newMode?(s(),i("div",tt,[r(S,{modelValue:a.newNPCholograms,"onUpdate:modelValue":t[15]||(t[15]=e=>a.newNPCholograms=e),disabled:!a.newNPCID},{default:c((()=>[m(u(e.$t("add-configs-hologram-and-conditions-for-npc")),1)])),_:1},8,["modelValue","disabled"])])):_("",!0)])),_:1},8,["title","modelValue"]),r($,{title:e.$t("template-dialog"),modelValue:a.templateDialogVisible,"onUpdate:modelValue":t[19]||(t[19]=e=>a.templateDialogVisible=e),width:"80%","custom-class":"template-dialog","close-on-click-modal":!1},{default:c((()=>[r(U,{modelValue:n.projectData,"onUpdate:modelValue":t[18]||(t[18]=e=>n.projectData=e),"sub-section-name":n.subSectionName,onClose:g.closeTemplate},null,8,["modelValue","sub-section-name","onClose"])])),_:1},8,["title","modelValue"])],64)};const ot={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 480"},at=r("g",{"fill-rule":"evenodd","stroke-width":"1pt"},[r("path",{fill:"#fff",d:"M0 0h640v480H0z"}),r("path",{fill:"#0039a6",d:"M0 160h640v320H0z"}),r("path",{fill:"#d52b1e",d:"M0 320h640v160H0z"})],-1);function lt(e,t){return s(),i("svg",ot,[at])}const st={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 480"},it=r("path",{fill:"#012169",d:"M0 0h640v480H0z"},null,-1),dt=r("path",{fill:"#FFF",d:"m75 0 244 181L562 0h78v62L400 241l240 178v61h-80L320 301 81 480H0v-60l239-178L0 64V0h75z"},null,-1),ct=r("path",{fill:"#C8102E",d:"m424 281 216 159v40L369 281h55zm-184 20 6 35L54 480H0l240-179zM640 0v3L391 191l2-44L590 0h50zM0 0l239 176h-60L0 42V0z"},null,-1),rt=r("path",{fill:"#FFF",d:"M241 0v480h160V0H241zM0 160v160h640V160H0z"},null,-1),mt=r("path",{fill:"#C8102E",d:"M0 193v96h640v-96H0zM273 0v480h96V0h-96z"},null,-1);function ut(e,t){return s(),i("svg",st,[it,dt,ct,rt,mt])}const pt={components:{subSection:Oe,ruFlag:lt,enFlag:ut},data:()=>({projectData:{},sectionSelected:null,dialogAddSectionVisible:!1,newTabName:null,newTabNameError:null,inclideDialogExample:!1,inclideMenuExample:!1,openSettingsVisible:!1,init_settings:{language:"ru",dark:!1},_settings:{},avaliableLanguages:{en:ut,ru:lt}}),computed:{settings:{get:function(){return this._settings},set:function(e){this._settings=e,this.saveSettings(this._settings)}}},created(){this.readSettings();E().setLocale(this.settings.language)},mounted(){document.addEventListener("keydown",this.keydown)},methods:{keydown(e){83===e.keyCode&&e.ctrlKey?(this.saveLocalStorage(0),e.preventDefault()):76===e.keyCode&&e.ctrlKey?(this.openLocalStorage(0),e.preventDefault()):69===e.keyCode&&e.ctrlKey?(this.saveAsZip(),e.preventDefault()):79===e.keyCode&&e.ctrlKey&&(this.openArchive(),e.preventDefault())},changeLang(e){this.settings.language=e,this.saveSettings(this.settings),document.location.reload()},closeAndSaveSettings(){this.openSettingsVisible=!1,this.saveSettings(this.settings)},saveSettings(e){localStorage.setItem("settings",JSON.stringify(e))},readSettings(){const e=JSON.parse(localStorage.getItem("settings"));this._settings=e||this.init_settings},addTab(){if(this.newTabName.length<=0)this.newTabNameError=this.$t("error-title-name-empty");else if(!this.projectData[this.newTabName]&&this.newTabName.match(/^[a-z0-9_]+$/)){if(this.projectData[this.newTabName]={custom:{npc_holograms:{check_interval:100}},main:{variables:{},npcs:{},compass:{}}},this.inclideDialogExample){const e=$("conversations:\n  gregory:\n    quester:\n      en: 'Gregory'\n      ru: 'Грегори'\n    first: message_start\n    stop: 'false' \n\n    NPC_options:\n\n      message_start:\n        text: \n          ru: 'Да?'\n          en: 'Yes?'\n        pointers: option_el_start,option_el_done, option_golem_start,option_golem_done ,option_bye\n\n      # el\n      message_el_start:\n        text: \n          ru: 'Здравствуй путник! Мое имя Грегори, Грегори Д`Вагнер, этот мир я увидел тридцать восемь зим назад. Когда-то давно, я тоже искал приключения, и жил опираясь только на миг настоящего, даже не задумываясь о будущем, считая, что в этом заключается мое счастье, быть свободным словно ветер и смотреть, как по ночному небу робко пробегают первые всполохи рассвета, пробиваясь сквозь сияние звезд. Что-то у меня в горле пересохло.. Я с удовольствием продолжу историю если ты принесёшь бутылочку эля.\\n\\n&6Необходимый уровень 5\\n\\n&2Награда:\\n✦ $mag_training_exp$ опыта\\n✦ $mag_training_money$ монет'\n        pointers: option_el_yes,option_no\n      message_el_yes:\n        text: \n          ru: 'Ты сможешь найти меня тут.'\n        event: event_el_start\n        pointers: option_ok\n      message_el_done:\n        text: 'Хороший эль.. О чем это я, так я считал до того решающего заказа на логово орков, где повстречал ее. Она не просто бегала, она буквально порхала вокруг целой толпы громил, кувыркаясь, приседая и осыпая чудовищ смертельными ударами своего кинжала. С этого задания и началась наша новая жизнь. Она была такая же, свободная и прекрасная, как лепестки сакуры на ветру, неуловима и свежа, словно теплый весенний ветерок в лесу.. Выпей со мной!'\n        event: event_el_paid\n        pointers: option_ok\n\n      # golem\n      message_golem_start:\n        text: \n          ru: 'В какой-то момент ей надоела жизнь на дороге и мы купили себе небольшой дом и мы хотели мирно жить.. Но меня манила свобода, и я, ослепленный ей, снова взял заказ, на пещерного голема. Будь проклят тот день, когда я решился на это.. Моя прекрасная Мэри естественно отправилась со мной, но там было слишком опасно. Она.. умерла прямо на моих глазах, а я ничего не мог сделать и сам еле спасся и был покалечен. Слепой идиот, слишком любивший свободу..'\n        pointers: option_golem_start_1\n      message_golem_start_1:\n        text: \n          ru: 'Так, свобода, о которой я так мечтал, стала для меня вечным пустым и холодным одиночеством.. Выбирай свои ценности правильно, не повторяй моих ошибок.'\n        pointers: option_golem_yes,option_no\n      message_golem_yes:\n        text: \n          ru: 'Если ты уверен, что хочешь этим заняться. Я отдам тебе всю награду.'\n        event: event_golem_start\n        pointers: option_ok\n      message_golem_done:\n        text: \n          ru: 'Невероятно! Вот, возьми всю награду.'\n        pointers: option_golem_paid1,option_golem_paid2\n\n    player_options:\n\n      option_el_start:\n        text: \n          ru: '$quest_prefix$Здравствуй'\n        conditions: '!cond_el_started'\n        pointers: message_el_start\n      option_el_yes:\n        text: \n          ru: '$quest_yes_prefix$Хорошо, я принесу.'\n        pointers: message_el_yes\n      option_el_done:\n        text: \n          ru: '$quest_done_prefix$Вот бутылочка'\n        conditions: 'cond_el_done,!cond_el_paid'\n        pointers: message_el_done\n\n      option_golem_start:\n        text: \n          ru: '$quest_prefix$Так что было дальше?'\n        conditions: '!cond_golem_started,cond_el_paid'\n        pointers: message_golem_start\n      option_golem_start_1:\n        text: \n          ru: '$quest_prefix$Почему?'\n        pointers: message_golem_start_1\n      option_golem_yes:\n        text: \n          ru: '$quest_yes_prefix$Возможно я смогу тебе помочь с заданием?'\n        pointers: message_golem_yes\n      option_golem_done:\n        text: \n          ru: '$quest_done_prefix$Я убил голема!'\n        conditions: 'cond_golem_done,!cond_golem_paid'\n        pointers: message_golem_done\n\n      option_golem_paid1:\n        text: \n          ru: '$quest_done_prefix$Не надо. Тебе эти деньги теперь нужны больше.'\n        event: event_golem_paid_exp\n      option_golem_paid2:\n        text: \n          ru: '$quest_done_prefix$Да, давай. Спасибо!'\n        event: event_golem_paid_money\n\n      option_no:\n        text:\n          ru: '$quest_no_prefix$Мне некогда'\n        pointers: message_start\n\n      option_ok:\n        text:\n          ru: 'Хорошо'\n        pointers: message_start\n\n      option_bye:\n        text:\n          ru: '{oak_door}До встречи'\n\nevents:\n  event_el_start: folder event_el_s2,event_el_s3,event_el_s4\n  event_el_s2: journal add j_el_started\n  event_el_s3: tag add tag_el_started\n  event_el_s4: notify &2Вы начали квест &a$el_name$ category:start_quest\n\n  event_el_done: folder event_el_d1,event_el_d2,event_el_d3,event_el_d4,event_el_d5\n  event_el_d1: journal delete j_el_started\n  event_el_d2: journal add j_el_done\n  event_el_d3: tag add tag_el_done\n  event_el_d4: money -50 notify\n  event_el_d5: give el_item notify\n\n  event_el_paid: folder event_el_p1,event_el_p2,event_el_p3,event_el_p5,event_el_p6\n  event_el_p1: journal delete j_el_done\n  event_el_p2: tag add tag_el_paid\n  event_el_p3: run ^command mmocore admin exp give %player% main $el_exp$ ^notify &eВы получили &6$el_exp$ &eопыта category:reward\n  event_el_p5: notify &2Вы закончили квест &a$el_name$ category:end_quest\n  event_el_p6: take el_item notify\n\n  event_golem_start: folder event_golem_s2,event_golem_s3,event_golem_s4,event_golem_s5,event_golem_s6\n  event_golem_s2: journal add j_golem_started\n  event_golem_s3: tag add tag_golem_started\n  event_golem_s4: notify &2Вы начали квест &a$golem_name$ category:start_quest\n  event_golem_s5: objective start obj_golem\n  event_golem_s6: compass add cave_golem\n\n  event_golem_done: folder event_golem_d1,event_golem_d2,event_golem_d3\n  event_golem_d1: journal delete j_golem_started\n  event_golem_d2: journal add j_golem_done\n  event_golem_d3: tag add tag_golem_done\n\n  event_golem_paid: folder event_golem_p1,event_golem_p2,event_golem_p5,event_golem_p6\n  event_golem_p1: journal delete j_golem_done\n  event_golem_p2: tag add tag_golem_paid\n  event_golem_p5: notify &2Вы закончили квест &a$golem_name$ category:end_quest\n  event_golem_p6: compass del cave_golem\n\n  event_golem_paid_money: folder event_golem_paid,event_golem_pm\n  event_golem_pm: money $golem_money$ notify\n\n  event_golem_paid_exp: folder event_golem_paid,event_golem_pexp\n  event_golem_pexp: run ^command mmocore admin exp give %player% main $golem_exp$ ^notify &eВы получили &6$golem_exp$ &eопыта category:reward\n\njournal:\n  j_el_started:\n    ru: 'Грегори обещал продолжить свой рассказ если я принесу ему бутылочку эля.'\n  j_el_done:\n    ru: 'Я раздобыл эль, я могу отнести его Грегори.'\n\n  j_golem_started:\n    ru: 'Грегори указал на пещеру, мне надо убить там пещерного голема.'\n  j_golem_done:\n    ru: 'Я убил пещерного голема, я могу рассказать об этом Грегори.'\n\nmain:\n  variables:\n    quest_prefix: '{book}&a[Квест]&e '\n    quest_done_prefix: '{enchanted_book}&2[Завершение квеста]&e '\n    quest_yes_prefix: '{book}&a[Принять]&e '\n    quest_no_prefix: '{barrier}&c[Отмена]&e '\n    quest_exit: '{oak_door}&7[Выход]&e '\n    gui_smith: '{anvil}&7[Ковка]&e '\n\n  npcs:\n    '70': gregory\n\n  compass:\n    cave_golem:\n      name:\n        ru: 'Пещерный голем'\n      location: -932;77;-510;world_rpg\n      item: compass_button\n\nobjectives:\n  obj_golem: mmobkill cave_golem amount:1 notify events:event_golem_done\n\ncustom:\n  notifications:\n    start_quest:\n      io: advancement\n      frame: task\n      icon: book\n      sound: entity.experience_orb.pickup\n    get_item:\n      frame: task\n      io: advancement\n      sound: entity.experience_orb.pickup\n    task_done:\n      frame: task\n      io: advancement\n      sound: entity.experience_orb.pickup\n    reward:\n      io: chat\n    chat:\n      io: chat\n\n  npc_holograms:\n    check_interval: 100\n    quest_avalible_gregory:\n      lines:\n        - 'item:default.quest_avalible'\n      vector: '0;3.2;0'\n      npcs:\n        - 70\n      conditions: 'cond_quest_avalible_gregory,!cond_quest_progress_gregory,!cond_quest_done_gregory'\n    quest_progress_gregory:\n      lines:\n        - 'item:default.quest_progress'\n      vector: '0;3.2;0'\n      npcs:\n        - 70\n      conditions: 'cond_quest_progress_gregory,!cond_quest_done_gregory'\n    quest_done_gregory:\n      lines:\n        - 'item:default.quest_done'\n      vector: '0;3.2;0'\n      npcs:\n        - 70\n      conditions: 'cond_quest_done_gregory'\n\nconditions:\n  cond_quest_avalible_gregory: or cond_gregory_el_icon1,cond_gregory_golem_icon1\n  cond_quest_progress_gregory: or cond_gregory_el_icon2,cond_gregory_golem_icon2\n  cond_quest_done_gregory: or cond_gregory_el_icon3,cond_gregory_golem_icon3\n\n  cond_gregory_el_icon1: and !cond_el_started\n  cond_gregory_el_icon2: and cond_el_started,!cond_el_done\n  cond_gregory_el_icon3: and cond_el_done,!cond_el_paid\n\n  cond_gregory_golem_icon1: and !cond_golem_started,cond_el_paid\n  cond_gregory_golem_icon2: and cond_golem_started,!cond_golem_done\n  cond_gregory_golem_icon3: and cond_golem_done,!cond_golem_paid\n\n  cond_el_started: tag tag_el_started\n  cond_el_done: tag tag_el_done\n  cond_el_paid: tag tag_el_paid\n\n  cond_golem_started: tag tag_golem_started\n  cond_golem_done: tag tag_golem_done\n  cond_golem_paid: tag tag_golem_paid\n  cond_50_coins: money 50\n\nitems:\n");this.projectData[this.newTabName].conversations=e.conversations,this.projectData[this.newTabName].conditions=e.conditions,this.projectData[this.newTabName].custom=e.custom,this.projectData[this.newTabName].events=e.events,this.projectData[this.newTabName].items=e.items,this.projectData[this.newTabName].journal=e.journal,this.projectData[this.newTabName].main=e.main,this.projectData[this.newTabName].objectives=e.objectives}if(this.inclideDialogExample=!1,this.inclideMenuExample){const e=$("example:\n  height: 3\n  title: '&6&lQuests'\n  bind: menu_quests_open\n  command: '/quests'\n  open_conditions: 'menu_quests_open_permission'\n  items:\n    quest1_active:\n      item: menu_quests_1\n      amount: 1\n      conditions: '!menu_quests_1_tag_completed'\n      text:\n        en:\n          - '&7[Quest] &f&lBone ripper'\n          - '&f&oRipp some skeletons off'\n          - '&f&otheir bones to complete'\n          - '&f&othis quest.'\n          - '&f&o'\n          - '&eLeft click to locate npc'\n          - '&eRight click to cancel quest'\n        de:\n          - '&7[Quest] &f&lKnochenbrecher'\n          - '&f&oBrech den Skeletten alle'\n          - '&f&oKnochen um diese Quest'\n          - '&f&oabzuschließen'\n          - '&f&o'\n          - '&eLinksclick um den NPC zu finden'\n          - '&eRechstclick um die Quest abzubrechen'\n      click:\n        right: menu_quests_1_cancel,menu_quests_1_cancel_msg\n        left: menu_quests_1_compass,menu_quests_1_location_msg\n      close: true\n    quest1_completed:\n      item: menu_quests_1_completed\n      amount: 1\n      conditions: menu_quests_1_tag_completed\n      text:\n        en:\n          - '&2[Quest] &f&lBone ripper'\n          - '&f&oRipp some skeletons off'\n          - '&f&otheir bones to complete'\n          - '&f&othis quest.'\n          - '&f&o'\n          - '&2Quest completed!'\n        de:\n          - '&2[Quest] &f&lKnochenbrecher'\n          - '&f&oBrech den Skeletten alle'\n          - '&f&oKnochen um diese Quest'\n          - '&f&oabzuschließen'\n          - '&f&o'\n          - '&2Quest abgeschlossen!'\n      close: false\n    quest2_active:\n      item: menu_quests_2\n      amount: 1\n      conditions: '!menu_quests_2_tag_completed'\n      text:\n        en:\n          - '&7[Quest] &7&lSorcerer''s apprentice'\n          - '&d&oCollect some ingredients'\n          - '&d&ofor the sorcerer to'\n          - '&d&ocomplete this quest.'\n          - '&d&o'\n          - '&eLeft click to locate npc'\n          - '&eRight click to cancel quest'\n        de:\n          - '&7[Quest] &7&lZauberlehrling'\n          - '&d&oSammel für den Zauberer'\n          - '&d&oeinige Trankzutaten um '\n          - '&d&odiese Quest abzuschließen.'\n          - '&d&o'\n          - '&eLinksclick um den NPC zu finden'\n          - '&eRechstclick um die Quest abzubrechen'\n      click:\n        right: menu_quests_2_cancel,menu_quests_2_cancel_msg\n        left: menu_quests_2_compass,menu_quests_2_location_msg\n      close: true\n    quest2_completed:\n      item: menu_quests_2_completed\n      amount: 1\n      conditions: menu_quests_2_tag_completed\n      text:\n        en:\n          - '&2[Quest] &7&lSorcerer''s apprentice'\n          - '&d&oCollect some ingredients'\n          - '&d&ofor the sorcerer to'\n          - '&d&ocomplete this quest.'\n          - '&d&o'\n          - '&2Quest completed!'\n        de:\n          - '&2[Quest] &7&lZauberlehrling'\n          - '&d&oSammel für den Zauberer'\n          - '&d&oeinige Trankzutaten um '\n          - '&d&odiese Quest abzuschließen.'\n          - '&d&o'\n          - '&2Quest abgeschlossen!'\n      close: false\n    quest3_active:\n      item: menu_quests_3\n      amount: 1\n      conditions: '!menu_quests_3_tag_completed'\n      text:\n        en:\n          - '&7[Quest] &6&lThe lost amulet'\n          - '&4&oFind the lost amulet of'\n          - '&4&oSonequa to complete '\n          - '&4&othis quest.'\n          - '&4&o'\n          - '&eLeft click to locate npc'\n          - '&eRight click to cancel quest'\n        de:\n          - '&7[Quest] &6&lDas verlorene Amulet'\n          - '&4&oFinde das verlorene Amulet'\n          - '&4&ovon Sonequa um diese'\n          - '&4&oQuest abzuschließen.'\n          - '&4&o'\n          - '&eLinksclick um den NPC zu finden'\n          - '&eRechstclick um die Quest abzubrechen'\n      click:\n        right: menu_quests_3_cancel,menu_quests_3_cancel_msg\n        left: menu_quests_3_compass,menu_quests_3_location_msg\n      close: true\n    quest3_completed:\n      item: menu_quests_3_completed\n      amount: 1\n      conditions: menu_quests_3_tag_completed\n      text:\n        en:\n          - '&2[Quest] &6&lThe lost amulet'\n          - '&4&oFind the lost amulet of'\n          - '&4&oSonequa to complete '\n          - '&4&othis quest.'\n          - '&4&o'\n          - '&2Quest completed!'\n        de:\n          - '&2[Quest] &6&lDas verlorene Amulet'\n          - '&4&oFinde das verlorene Amulet'\n          - '&4&ovon Sonequa um diese'\n          - '&4&oQuest abzuschließen.'\n          - '&4&o'\n          - '&2Quest abgeschlossen!'\n      close: false\n    reputation:\n      item: menu_quests_reputation\n      amount: 1\n      text:\n        en:\n          - '&2Quest reputation: &6&l%point.quest_reputation.amount%'\n        de:\n          - '&2Quest Ansehen: &6&l%point.quest_reputation.amount%'\n      click: menu_quests_reputation_msg\n      close: true\n  slots:\n    8: reputation\n    11: 'quest1_active,quest1_completed'\n    13: 'quest2_active,quest2_completed'\n    15: 'quest3_active,quest3_completed'\n");this.projectData[this.newTabName].menus=e}this.inclideMenuExample=!1,this.$message({dangerouslyUseHTMLString:!0,message:`Section <b>${this.newTabName}</b> created!`,type:"success"}),this.sectionSelected=this.newTabName,this.newTabName=null,this.dialogAddSectionVisible=!1,this.newTabNameError=null}else this.newTabNameError=this.$t("exists-regex")},openNewTabDialog(){this.newTabName="",this.dialogAddSectionVisible=!0},removeTab(e){this.$confirm(this.$t("delete-section").replace("{tab}",e),this.$t("confirm"),{confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel"),type:"warning"}).then((()=>{delete this.projectData[e],this.$message({type:"success",message:`Tab ${e} deleted`})}))},openArchive(){this.$refs.arciveFileInput.click()},async onFileArchivePicked(e){const t=e.target.files;this.projectData={},await w(t[0],this.projectData)},openJson(){this.$refs.jsonFileInput.click()},postLoadEvent(){if(!this.sectionSelected){const e=Object.keys(this.projectData)[0];this.sectionSelected=e}},async onFileJsonPicked(e){const t=e.target.files;this.projectData={},self=this;var n=new FileReader;n.onload=function(){self.projectData=JSON.parse(n.result)},n.readAsText(t[0]),this.postLoadEvent()},saveAsJson(){if(0===Object.keys(this.projectData).length)return void this.$message({dangerouslyUseHTMLString:!0,message:this.$t("data-is-empty"),type:"info"});const e=JSON.stringify(this.projectData),t=new Blob([e],{type:"text/plain"});JSON.stringify(new Date),this.downloadBlob(t,`bq${n().format("DD.MM.YYYY_HH:MM")}.json`)},saveAsZip(){0!==Object.keys(this.projectData).length?function(e){var a=new t;for(const[t,n]of Object.entries(e)){n.events&&a.file(`${t}/events.yml`,U(n.events)),n.conditions&&a.file(`${t}/conditions.yml`,U(n.conditions)),n.objectives&&a.file(`${t}/objectives.yml`,U(n.objectives)),n.items&&a.file(`${t}/items.yml`,U(n.items)),n.main&&a.file(`${t}/main.yml`,U(n.main)),n.journal&&a.file(`${t}/journal.yml`,U(n.journal)),n.custom&&a.file(`${t}/custom.yml`,U(n.custom));for(const e of V)if(n[e])for(const[o,l]of Object.entries(n[e]))a.file(`${t}/${e}/${o}.yml`,U(l))}a.generateAsync({type:"blob"}).then((function(e){const t=`bq${n().format("YYYY-MM-DD-HH-MM")}.zip`;o.exports.saveAs(e,t)}),(function(e){console.log(`Error with zip save: ${e}`)}))}(this.projectData):this.$message({dangerouslyUseHTMLString:!0,message:this.$t("data-is-empty"),type:"info"})},downloadBlob(e,t){const n=document.createEvent("MouseEvents"),o=document.createElement("a");o.download=t,o.href=window.URL.createObjectURL(e),o.dataset.downloadurl=["text/json",o.download,o.href].join(":"),n.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(n)},openLocalStorage(e){const t=JSON.parse(localStorage.getItem(`projects_${e}`));t?(this.projectData=t,this.$message({dangerouslyUseHTMLString:!0,message:`Project loaded from <b>${e}</b> slot`,type:"success"})):this.$message({message:`Project slot ${e} emty`,type:"info"}),this.postLoadEvent()},saveLocalStorage(e){0!==Object.keys(this.projectData).length?(localStorage.setItem(`projects_${e}`,JSON.stringify(this.projectData)),localStorage.setItem(`projects_${e}_date`,n().format("DD.MM.YYYY HH:MM")),this.$message({dangerouslyUseHTMLString:!0,message:`Project saved to <b>${e}</b> slot`,type:"success"})):this.$message({dangerouslyUseHTMLString:!0,message:this.$t("data-is-empty"),type:"info"})},lastTimeUsedSlot(e){const t=localStorage.getItem(`projects_${e}_date`);if(t)return` (${t})`}}},_t={class:"el-container is-vertical"},gt={class:"el-header header-section"},ft=r("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),ht=r("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),Et={class:"right-header"},vt={class:"el-dropdown-link"},yt={class:"dialog-subsection"},Nt=r("br",null,null,-1),bt=r("br",null,null,-1),Tt=r("br",null,null,-1),St=r("br",null,null,-1),$t={class:"dialog-footer"},Ut={class:"dialog-footer"},At=r("div",{class:"to-top"},"UP",-1);pt.render=function(e,t,n,o,a,g){const f=l("el-button"),h=l("el-dropdown-item"),E=l("el-dropdown-menu"),y=l("el-dropdown"),N=l("el-link"),b=l("el-alert"),T=l("el-input"),S=l("el-checkbox"),$=l("el-dialog"),U=l("subSection"),A=l("el-tab-pane"),w=l("el-tabs"),V=l("el-backtop");return s(),i(p,null,[r("section",_t,[r("input",{type:"file",style:{display:"none"},ref:"arciveFileInput",accept:".zip,",onChange:t[1]||(t[1]=(...e)=>g.onFileArchivePicked&&g.onFileArchivePicked(...e))},null,544),r("input",{type:"file",style:{display:"none"},ref:"jsonFileInput",accept:".json,",onChange:t[2]||(t[2]=(...e)=>g.onFileJsonPicked&&g.onFileJsonPicked(...e))},null,544),r("header",gt,[r(y,{size:"small"},{dropdown:c((()=>[r(E,null,{default:c((()=>[r(h,{onClick:g.openArchive},{default:c((()=>[m(u(e.$t("open-zip"))+" (ctrl-o)",1)])),_:1},8,["onClick"]),r(h,{onClick:g.openJson},{default:c((()=>[m(u(e.$t("open-json")),1)])),_:1},8,["onClick"]),r(h,{onClick:t[3]||(t[3]=e=>g.openLocalStorage(0)),divided:""},{default:c((()=>[m(u(e.$t("open-slot"))+" (ctrl-l)"+u(g.lastTimeUsedSlot(0)),1)])),_:1}),(s(),i(p,null,d(5,(t=>r(h,{onClick:e=>g.openLocalStorage(t),key:t},{default:c((()=>[m(u(e.$t("open-slot"))+" "+u(t)+u(g.lastTimeUsedSlot(t)),1)])),_:2},1032,["onClick"]))),64))])),_:1})])),default:c((()=>[r(f,{size:"mini",class:"header-buttons",icon:"el-icon-folder-opened"},{default:c((()=>[m(u(e.$t("open")),1),ft])),_:1})])),_:1}),r(y,{size:"small"},{dropdown:c((()=>[r(E,null,{default:c((()=>[r(h,{onClick:g.saveAsZip},{default:c((()=>[m(u(e.$t("save-zip"))+" (ctrl-e)",1)])),_:1},8,["onClick"]),r(h,{onClick:g.saveAsJson},{default:c((()=>[m(u(e.$t("save-json")),1)])),_:1},8,["onClick"]),r(h,{onClick:t[4]||(t[4]=e=>g.saveLocalStorage(0)),divided:""},{default:c((()=>[m(u(e.$t("save-slot"))+" (ctrl-s)"+u(g.lastTimeUsedSlot(0)),1)])),_:1}),(s(),i(p,null,d(5,(t=>r(h,{onClick:e=>g.saveLocalStorage(t),key:t},{default:c((()=>[m(u(e.$t("save-slot"))+" "+u(t)+u(g.lastTimeUsedSlot(t)),1)])),_:2},1032,["onClick"]))),64))])),_:1})])),default:c((()=>[r(f,{size:"mini",class:"header-buttons",icon:"el-icon-takeaway-box"},{default:c((()=>[m(u(e.$t("save")),1),ht])),_:1})])),_:1}),r(f,{size:"mini",onClick:g.openNewTabDialog,class:"header-buttons",icon:"el-icon-folder-add"},{default:c((()=>[m(u(e.$t("new-section")),1)])),_:1},8,["onClick"]),r(N,{type:"primary",target:"_blank",rel:"noopener noreferrer",href:"https://docs.betonquest.org/",class:"header-buttons"},{default:c((()=>[m(u(e.$t("bq-doc")),1)])),_:1}),r(N,{type:"primary",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/BetonQuest/RPGMenu/wiki/",class:"header-buttons"},{default:c((()=>[m(u(e.$t("rpgmenu-doc")),1)])),_:1}),r(N,{type:"primary",target:"_blank",rel:"noopener noreferrer",href:"https://mcmodels.net/how-to-tutorials/betonquest-tutorials/",class:"header-buttons"},{default:c((()=>[m(u(e.$t("bq-mcmodels-tutorials")),1)])),_:1}),r("div",Et,[r(y,null,{dropdown:c((()=>[r(E,null,{default:c((()=>[(s(!0),i(p,null,d(a.avaliableLanguages,((e,t)=>(s(),i(h,{class:"lang-option",onClick:e=>g.changeLang(t)},{default:c((()=>[(s(),i(v(e),{class:"lang-icon"}))])),_:2},1032,["onClick"])))),256))])),_:1})])),default:c((()=>[r("span",vt,[(s(),i(v(a.avaliableLanguages[g.settings.language]),{class:"lang-icon"}))])])),_:1})])]),r($,{title:e.$t("create-section"),modelValue:a.dialogAddSectionVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>a.dialogAddSectionVisible=e),width:"30%","custom-class":"dialog create-section"},{footer:c((()=>[r("span",$t,[r(f,{onClick:t[8]||(t[8]=e=>a.dialogAddSectionVisible=!1)},{default:c((()=>[m(u(e.$t("cancel")),1)])),_:1}),r(f,{type:"primary",onClick:g.addTab},{default:c((()=>[m(u(e.$t("create")),1)])),_:1},8,["onClick"])])])),default:c((()=>[a.newTabNameError?(s(),i(b,{key:0,title:a.newTabNameError,type:"error"},null,8,["title"])):_("",!0),r("div",yt,[r("span",null,u(e.$t("quest-name")),1),r(T,{modelValue:a.newTabName,"onUpdate:modelValue":t[5]||(t[5]=e=>a.newTabName=e)},null,8,["modelValue"]),Nt,bt]),r(S,{modelValue:a.inclideDialogExample,"onUpdate:modelValue":t[6]||(t[6]=e=>a.inclideDialogExample=e)},{default:c((()=>[m(u(e.$t("quest-example")),1)])),_:1},8,["modelValue"]),Tt,r(S,{modelValue:a.inclideMenuExample,"onUpdate:modelValue":t[7]||(t[7]=e=>a.inclideMenuExample=e)},{default:c((()=>[m(u(e.$t("menu-example")),1)])),_:1},8,["modelValue"]),St])),_:1},8,["title","modelValue"]),r($,{title:e.$t("settings"),modelValue:a.openSettingsVisible,"onUpdate:modelValue":t[10]||(t[10]=e=>a.openSettingsVisible=e),width:"30%","custom-class":"dialog setting-dialog"},{footer:c((()=>[r("span",Ut,[r(f,{type:"primary",onClick:g.closeAndSaveSettings},{default:c((()=>[m(u(e.$t("save")),1)])),_:1},8,["onClick"])])])),default:c((()=>[m(u(e.$t("language"))+": ",1)])),_:1},8,["title","modelValue"]),Object.keys(a.projectData).length>0?(s(),i(w,{key:0,class:"sections-tabs",modelValue:a.sectionSelected,"onUpdate:modelValue":t[11]||(t[11]=e=>a.sectionSelected=e),type:"border-card",closable:"",onTabRemove:g.removeTab},{default:c((()=>[(s(!0),i(p,null,d(a.projectData,((e,t)=>(s(),i(A,{key:t,label:t,name:t,class:"section-tab"},{default:c((()=>[r(U,{modelValue:a.projectData[t],"onUpdate:modelValue":e=>a.projectData[t]=e,"project-data":a.projectData,"sub-section-name":t},null,8,["modelValue","onUpdate:modelValue","project-data","sub-section-name"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue","onTabRemove"])):_("",!0)]),r(V,{target:".el-header",bottom:50},{default:c((()=>[At])),_:1})],64)};const wt=y({locale:"ru",messages:{en:e.load("open: Open\nopen-zip: Open Project zip\nopen-json: Open Project json\nopen-slot: Open Project from local slot\nsave-json: Export as json\nsave: Save\nsave-slot: Save Project to local slot\nnew-section: New section\nsettings: Settings\nbq-doc: BetonQuest documentation\nrpgmenu-doc: RPGMenu documentation\nquest-name: Provide quest section name\nquest-example: Include dialog example\nmenu-example: Include menu example\ncancel: Cancel\ncreate: Create\nlanguage: Language\nerror-title-name-empty: Section title cannot be empty\ncreate-section: Create section\nadd-dialog-section: Add dialog section\ndialogs: Dialogs\nadd-menu: Add menu\nmenus: Menu\nevents: Events\nconditions: Conditions\nobjectives: Objectives\nitems: Items\nmain: Main\njournal: Journal\ncustom: Custom\ncreate-subsection: Create section\ndialog-section-name: Enter section name\nprovide-name: Provide name\nempty-title: Title cannot be empty\ndelete-section: Delete section {tab}?\nconfirm: Confirm\ndelete: Delete\ntab-deleted: Tab <b>{tab}</b> deleted\ndialog-exists: Dialog {newName} already exisis\ndialog-section-created: Dialog section <b>{newName}</b> created\nmenu-section-exists: Menu {newName} already exisis\nmenu-section-created: Menu section <b>{newName}</b> created\nyaml-editor: Yaml editor\nadd-dialog: Add dialog option\nsave-and-return: Save and return visual editor\nenter-dialog-name: Provide dialog name\ndialog-window-title: New dialog\nexists-regex: Already exists or bad name (use only a-z 0-9 and _)\ndialog-created: Dialog <b>{value}</b> created\ndialog-renamed: Dialog renamed from <b>{old}</b> to <b>{new}</b>\ndialog-deleted: Dialog <b>{dialogKey}</b> deleted\nNPC_options: NPC options\nplayer_options: Player options\nno-options: No options found\nno-results: No results found\ndelete-section-key: Delete {name} from {from}?\ndelete-key: Delete {key}?\nnew-setting: New setting\nquester-name: Quester name\nnew-setting-key: Enter new setting key\nsave-zip: Export as zip\ndata-is-empty: Data is empty\ntemplate-create: Create with template\ntemplate-dialog: Creation with template\ndelete-dialog-section: Delete dialog section\ndialog-section-deleted: Dialog section <b>{section}</b> deleted\ndiagram-editor: Diagram editor\n\ntemplate-quest-select: Quester\npreview: Preview\nreturn-to-edit: Return to editor\napply: Apply\nobjective-mmobkill: Mythic mob kill\nobjective-custom: Custom objective\nmmomob-name: Mythicmob name\namount: amount\nno-quester: Quester is not selected\nno-quester-to: Second quester is not selected\ntemplate-applyed: Template applyed\n\nenter-new-name: Enter new name\nrename: Rename\npointers: Conversation pointers\ndelete-language: Delete text of language {language}?\nadd-language: Add language\nadd: Add\nfirst-option: First dialog\nselect-option: Select option\nstop-option: Lock player in dialog\nbq-mcmodels-tutorials: BetonQuest Tutorials on mcmodels.net\n\ntemplate-quest-item-objective: Item recieve objective\n\ndialog-quester-npc-id: Enter id of npc (optional)\n\ntemplate-quest-select-from: Quest giver NPC\ntemplate-quest-select-to: Quest target NPC\ntemplate-add-to-first-message: Add dialog option to first message?\ntemplate-add-to-hologram-conditions: Add to hologram conditions?\n\nadd-configs-hologram-and-conditions-for-npc: Add configs for holograms and conditions?\nid-only-numbers: ID can contain onlt digits\n\nuse-dark-theme: Use dark theme\ntemplate-add-compass: Add compass target\nadd-dialog-to-first-option: Add dialog to first option\ncreate-item: Create item with menu\ncreate-item-dialog: Create item menu\nnewitem-material: Material\nnewitem-cmd: Custom model data\nnewitem-name: Name\nnewitem-lore: Lore\nnewitem-settingName: Setting name\nnewitem-quest-items-unbreakable: Quest items unbreakable\nnewitem-already-exists: Item {settingName} already exists\n"),ru:e.load("open: Открыть\nopen-zip: Открыть zip\nopen-json: Открыть json\nopen-slot: Открыть сохранённый слот\nsave-json: Экспорт в json\nsave: Сохранить\nsave-slot: Сохранить в слот\nnew-section: Новый раздел\nsettings: Настройки\nbq-doc: Документация BetonQuest\nrpgmenu-doc: Документация RPGMenu\nquest-name: Введите название раздела квестов\nquest-example: Добавить пример квеста?\nmenu-example: Добавить пример меню?\ncancel: Отмена\ncreate: Создать\nlanguage: Язык\nerror-title-name-empty: Заголовок раздела не может быть пустым\ncreate-section: Создание раздела\nadd-dialog-section: Добавить секцию квестов\ndialogs: Диалоги\nadd-menu: Добавить меню\nmenus: Меню\nevents: События\nobjectives: Задания\nconditions: Условия\nitems: Предметы\nmain: Основное\njournal: Журнал\ncustom: Разное\ncreate-subsection: Создание секции квестов\ndialog-section-name: Введите название квестера\nprovide-name: Введите название\nempty-title: Заголовок не может быть пустым\ndelete-section: Удалить раздел {tab}?\nconfirm: Подтвердить\ndelete: Удалить\ntab-deleted: Раздел <b>{tab}</b> удалён\ndialog-exists: Диалог {newName} уже существует\ndialog-section-created: Раздел диалогов <b>{newName}</b> создан\nmenu-section-exists: Меню {newName} уже существует\nmenu-section-created: Раздел меню <b>{newName}</b> создан\nyaml-editor: Yaml редактор\nadd-dialog: Добавить вариант диалога\nsave-and-return: Сохранить и вернуться в визуальный редактор\nenter-dialog-name: Введите название диалога\ndialog-window-title: Новый диалог\nexists-regex: Уже существует или ошибка в названии (используйте a-z 0-9 и _)\ndialog-created: Диалог <b>{value}</b> создан\ndialog-renamed: Диалог <b>{old}</b> периименован <b>{new}</b>\ndialog-deleted: Диалог <b>{dialogKey}</b> удалён\nNPC_options: Варианты ответов NPC\nplayer_options: Варианты от игрока\nno-options: Нет вариантов\nno-results: Не найдено вариантов\ndelete-section-key: Удалить {name} из раздела {from}?\ndelete-key: Удалить {key}?\nnew-setting: Добавить запись\nquester-name: Имя квестодателя\nnew-setting-key: Введите название\nsave-zip: Экспорт в zip архив\ndata-is-empty: Нет данных для сохранения\ntemplate-create: Создать по шаблону\ntemplate-dialog: Создание по шаблону\ndelete-dialog-section: Удаление раздела диалогов\ndialog-section-deleted: Раздел диалогов <b>{section}</b> удалён\ndiagram-editor: Редактор диаграм\n\ntemplate-quest-select: NPC\npreview: Предпросмотр\nreturn-to-edit: Вернуться к редактированию\napply: Применить\nobjective-mmobkill: Убийство mythic моба\nobjective-custom: Своё задание\nmmomob-name: Название Mythic-моба\namount: кол-во\nno-quester: Квестодатель не выбран\nno-quester-to: Второй квестодатель не выбран\ntemplate-applyed: Шаблон применён\n\nenter-new-name: Введите новое имя\nrename: Переименование\npointers: Ссылки на диалоги\ndelete-language: Удалить текст языка {language}?\nadd-language: Добавить язык\nadd: Добавить\nfirst-option: Стартовый диалог\nselect-option: Выберите вариант\nstop-option: Закрытие диалога только при завершении\nbq-mcmodels-tutorials: Туториалы BetonQuest на mcmodels.net\n\ndialog-quester-npc-id: Введите id npc квестера (не обязательно)\n\ntemplate-quest-select-from: Квестодатель NPC\ntemplate-quest-select-to: NPC, которому сдавать квест\ntemplate-add-to-first-message: Добавить ответы в первый вариант диалога?\ntemplate-add-to-hologram-conditions: Добавить условия в настройки голограм?\n\nadd-configs-hologram-and-conditions-for-npc: Добавить настройки для голограм и условий для них?\nid-only-numbers: ID может состоять только из чисел\n\nuse-dark-theme: Использовать тёмную тему\ntemplate-add-compass: Добавить направление для компаса\nadd-dialog-to-first-option: Добавить вариант ответа в первый диалог\ncreate-item: Создать предмет через меню\ncreate-item-dialog: Меню создания предметов\nnewitem-material: Материал\nnewitem-cmd: Custom model data\nnewitem-name: Название\nnewitem-lore: Описание\nnewitem-settingName: Название настройки\nnewitem-quest-items-unbreakable: Нельзя уничтожить\nnewitem-already-exists: Предмет {settingName} уже существует\n")}}),Vt=N(pt);Vt.use(b),Vt.use(wt),Vt.mount("#app");
